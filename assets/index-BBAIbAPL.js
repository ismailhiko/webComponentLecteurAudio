(function(){const V=document.createElement("link").relList;if(V&&V.supports&&V.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))m(g);new MutationObserver(g=>{for(const n of g)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&m(u)}).observe(document,{childList:!0,subtree:!0});function N(g){const n={};return g.integrity&&(n.integrity=g.integrity),g.referrerPolicy&&(n.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?n.credentials="include":g.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function m(g){if(g.ep)return;g.ep=!0;const n=N(g);fetch(g.href,n)}})();class bt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`
            <div id="playlist">
                <h3>Playlist</h3>
                <ul id="trackList"></ul>
            </div>
        `,this.tracks=[{title:"Calme",src:"audio.mp3"},{title:"Motivation",src:"audio2.mp3"},{title:"Tristesse",src:"audio3.mp3"}],this.activeTrackIndex=null}connectedCallback(){this.loadCSS(),this.renderPlaylist()}loadCSS(){const V=document.createElement("link");V.rel="stylesheet",V.href="components/audio-playlist/audio-playlist.css",this.shadowRoot.appendChild(V)}renderPlaylist(){const V=this.shadowRoot.querySelector("#trackList");V.innerHTML="",this.tracks.forEach((N,m)=>{const g=document.createElement("li");g.textContent=N.title,g.className="track-item",g.setAttribute("draggable","true"),g.dataset.index=m,g.addEventListener("dragstart",n=>this.handleDragStart(n,m)),g.addEventListener("dragover",n=>this.handleDragOver(n)),g.addEventListener("drop",n=>this.handleDrop(n,m)),g.addEventListener("click",()=>{this.activeTrackIndex=m,this.dispatchEvent(new CustomEvent("selecttrack",{detail:{index:m},bubbles:!0,composed:!0})),this.highlightTrack(m),g.scrollIntoView({behavior:"smooth",block:"nearest"})}),m===this.activeTrackIndex&&g.classList.add("active"),V.appendChild(g)})}handleDragStart(V,N){V.dataTransfer.setData("text/plain",N),V.target.classList.add("dragging")}handleDragOver(V){V.preventDefault(),V.target.classList.add("droppable")}handleDrop(V,N){V.preventDefault();const m=V.dataTransfer.getData("text/plain");if(m!==N){const g=this.tracks.splice(m,1)[0];this.tracks.splice(N,0,g),this.activeTrackIndex===parseInt(m)?this.activeTrackIndex=parseInt(N):this.activeTrackIndex>parseInt(m)&&this.activeTrackIndex<=parseInt(N)?this.activeTrackIndex-=1:this.activeTrackIndex<parseInt(m)&&this.activeTrackIndex>=parseInt(N)&&(this.activeTrackIndex+=1),this.renderPlaylist(),this.dispatchEvent(new CustomEvent("playlistreordered",{detail:{tracks:this.tracks},bubbles:!0,composed:!0}))}this.shadowRoot.querySelectorAll(".track-item").forEach(g=>{g.classList.remove("dragging","droppable")})}highlightTrack(V){this.shadowRoot.querySelectorAll(".track-item").forEach((m,g)=>{g===V?m.classList.add("active"):m.classList.remove("active")})}get tracks(){return this._tracks||[]}set tracks(V){this._tracks=V,this.renderPlaylist()}}customElements.define("audio-playlist",bt);class xt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.currentTrackIndex=0}static get observedAttributes(){return["src","playlist","eq"]}attributeChangedCallback(V,N,m){V==="src"&&(this.src=m),V==="playlist"&&(this.showPlaylist=m==="true"),V==="eq"&&(this.showEqualizer=m==="true")}async connectedCallback(){await this.loadHTML(),this.loadCSS(),this.audio=this.shadowRoot.getElementById("audio"),this.audioSource=this.shadowRoot.getElementById("audioSource"),this.initAudioContext(),this.setupEventListeners(),this.dispatchEvent(new CustomEvent("audio-ready",{detail:{audioElement:this.audio,audioContext:this.audioContext,sourceNode:this.sourceNode,analyser:this.analyser},bubbles:!0,composed:!0})),this.hasAttribute("src")&&(this.src=this.getAttribute("src"))}async loadHTML(){const N=await(await fetch("components/audio-player/audio-player.html")).text();this.shadowRoot.innerHTML=N}loadCSS(){const V=document.createElement("link");V.rel="stylesheet",V.href="components/audio-player/audio-player.css",this.shadowRoot.appendChild(V)}initAudioContext(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioContext.createGain(),this.analyser=this.audioContext.createAnalyser(),this.sourceNode=this.audioContext.createMediaElementSource(this.audio),this.sourceNode.connect(this.gainNode),this.gainNode.connect(this.analyser),this.analyser.connect(this.audioContext.destination)}setupEventListeners(){this.shadowRoot.getElementById("playButton").addEventListener("click",()=>this.playAudio()),this.shadowRoot.getElementById("pauseButton").addEventListener("click",()=>this.pauseAudio()),this.shadowRoot.getElementById("stopButton").addEventListener("click",()=>this.stopAudio()),this.shadowRoot.getElementById("forwardButton").addEventListener("click",()=>this.forwardAudio()),this.shadowRoot.getElementById("volumeControl").addEventListener("input",N=>this.setVolume(N));const V=document.querySelector("audio-playlist");V&&V.addEventListener("selecttrack",N=>{const m=N.detail.index;m!==void 0&&this.loadTrack(m,V.tracks)})}playAudio(){this.audioContext.state==="suspended"&&this.audioContext.resume(),this.audio.play()}pauseAudio(){this.audio.pause()}stopAudio(){this.audio.pause(),this.audio.currentTime=0}forwardAudio(){this.audio.currentTime+=10}setVolume(V){this.gainNode.gain.value=V.target.value}loadTrack(V,N){this.currentTrackIndex=V;const m=N[V];m&&(this.audioSource.src=m.src,this.audio.load(),this.playAudio(),this.dispatchEvent(new CustomEvent("trackchange",{detail:{index:V},bubbles:!0,composed:!0})))}get playing(){return!this.audio.paused}get src(){return this.audio?this.audio.src:""}set src(V){this.audio&&(this.audio.src=V,this.audio.load())}set showPlaylist(V){const N=document.querySelector("audio-playlist");N&&(N.style.display=V?"block":"none")}set showEqualizer(V){const N=document.querySelector("audio-equalizer");N&&(N.style.display=V?"block":"none")}}customElements.define("audio-player",xt);class Tt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`
        <div class="audio-equalizer">
            <div class="slider-container">
                <label for="bassControl">Bass</label>
                <webaudio-knob 
                    id="bassControl" 
                    src="../knobs/ST_Fader_230x69_128f.png" 
                    min="-10" max="10" value="0" step="0.1" 
                    sprites="127"  
                    width="100" 
                    height="100" 
                    tooltip="Bass %d dB">
                </webaudio-knob>
            </div>
            <div class="slider-container">
                <label for="midBassControl">Mid-Bass</label>
                <webaudio-knob 
                    id="midBassControl" 
                    src="../knobs/ST_Fader_230x69_128f.png" 
                    min="-10" max="10" value="0" step="0.1" 
                    sprites="127"  
                    width="100" 
                    height="100" 
                    tooltip="Mid-Bass %d dB">
                </webaudio-knob>
            </div>
            <div class="slider-container">
                <label for="midControl">Mid</label>
                <webaudio-knob 
                    id="midControl" 
                    src="../knobs/ST_Fader_230x69_128f.png" 
                    min="-10" max="10" value="0" step="0.1" 
                    sprites="127"  
                    width="100" 
                    height="100" 
                    tooltip="Mid %d dB">
                </webaudio-knob>
            </div>
            <div class="slider-container">
                <label for="trebleControl">Treble</label>
                <webaudio-knob 
                    id="trebleControl" 
                    src="../knobs/ST_Fader_230x69_128f.png" 
                    min="-10" max="10" value="0" step="0.1" 
                    sprites="127"  
                    width="100" 
                    height="100" 
                    tooltip="Treble %d dB">
                </webaudio-knob>
            </div>
        </div>
        `}connectedCallback(){this.loadCSS(),window.addEventListener("audio-ready",V=>{const{audioContext:N,sourceNode:m}=V.detail;this.initEqualizer(N,m)})}loadCSS(){const V=document.createElement("link");V.rel="stylesheet",V.href="components/audio-equalizer/audio-equalizer.css",this.shadowRoot.appendChild(V)}initEqualizer(V,N){this.filters={bass:this.createFilter(V,"lowshelf",100),midBass:this.createFilter(V,"peaking",500),mid:this.createFilter(V,"peaking",100),treble:this.createFilter(V,"highshelf",80)},N.connect(this.filters.bass),this.filters.bass.connect(this.filters.midBass),this.filters.midBass.connect(this.filters.mid),this.filters.mid.connect(this.filters.treble),this.filters.treble.connect(V.destination),this.audioContext=V,this.addSliderListeners()}createFilter(V,N,m){const g=V.createBiquadFilter();return g.type=N,g.frequency.value=m,g.gain.value=0,g}addSliderListeners(){const V={bassControl:this.filters.bass,midBassControl:this.filters.midBass,midControl:this.filters.mid,trebleControl:this.filters.treble};Object.keys(V).forEach(N=>{const m=this.shadowRoot.getElementById(N),g=V[N];m.addEventListener("input",n=>{g.gain.value=parseFloat(n.target.value)})})}}customElements.define("audio-equalizer",Tt);function Pt(At){return At&&At.__esModule&&Object.prototype.hasOwnProperty.call(At,"default")?At.default:At}var _t={exports:{}},vt;function It(){return vt||(vt=1,function(At,V){(function(m,g){At.exports=g()})(window,function(){return function(N){var m={};function g(n){if(m[n])return m[n].exports;var u=m[n]={i:n,l:!1,exports:{}};return N[n].call(u.exports,u,u.exports,g),u.l=!0,u.exports}return g.m=N,g.c=m,g.d=function(n,u,A){g.o(n,u)||Object.defineProperty(n,u,{enumerable:!0,get:A})},g.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},g.t=function(n,u){if(u&1&&(n=g(n)),u&8||u&4&&typeof n=="object"&&n&&n.__esModule)return n;var A=Object.create(null);if(g.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:n}),u&2&&typeof n!="string")for(var t in n)g.d(A,t,function(e){return n[e]}.bind(null,t));return A},g.n=function(n){var u=n&&n.__esModule?function(){return n.default}:function(){return n};return g.d(u,"a",u),u},g.o=function(n,u){return Object.prototype.hasOwnProperty.call(n,u)},g.p="",g(g.s="./src/index.js")}({"./node_modules/@assemblyscript/loader/index.js":function(N,m,g){g.r(m),g.d(m,"instantiate",function(){return x}),g.d(m,"instantiateSync",function(){return I}),g.d(m,"instantiateStreaming",function(){return M}),g.d(m,"demangle",function(){return R});const n=-8,u=-4,A=0,t=1,e=1,s=2,i=4,a=6,h=2048,l=4096,r=16384,f=0,v=4,c=8,d=12,o=12,E=16,p=typeof BigUint64Array<"u",P=Symbol(),q=32,C=new TextDecoder("utf-16le");function U(S,y){const F=new Uint32Array(S)[y+u>>>2]>>>1,D=new Uint16Array(S,y,F);return F<=q?String.fromCharCode.apply(String,D):C.decode(D)}function w(S){const y={};function F(X,O){return X?U(X.buffer,O):"<yet unknown>"}const D=S.env=S.env||{};return D.abort=D.abort||function(O,k,K,B){const Q=y.memory||D.memory;throw Error(`abort: ${F(Q,O)} at ${F(Q,k)}:${K}:${B}`)},D.trace=D.trace||function(O,k,...K){const B=y.memory||D.memory;console.log(`trace: ${F(B,O)}${k?" ":""}${K.slice(0,k).join(", ")}`)},D.seed=D.seed||Date.now,S.Math=S.Math||Math,S.Date=S.Date||Date,y}function b(S,y){const F=y.exports,D=F.memory,X=F.table,O=F.__new,k=F.__retain,K=F.__rtti_base||-1;function B(j){const J=new Uint32Array(D.buffer),Z=J[K>>>2];if((j>>>=0)>=Z)throw Error(`invalid id: ${j}`);return J[(K+4>>>2)+j*2]}function Q(j){const J=B(j);if(!(J&(e|s|i)))throw Error(`not an array: ${j}, flags=${J}`);return J}function z(j){const J=new Uint32Array(D.buffer),Z=J[K>>>2];if((j>>>=0)>=Z)throw Error(`invalid id: ${j}`);return J[(K+4>>>2)+j*2+1]}function Y(j){return 31-Math.clz32(j>>>a&31)}function W(j){if(j==null)return 0;const J=j.length,Z=O(J<<1,t),H=new Uint16Array(D.buffer);for(var $=0,tt=Z>>>1;$<J;++$)H[tt+$]=j.charCodeAt($);return Z}S.__newString=W;function L(j){if(!j)return null;const J=D.buffer;if(new Uint32Array(J)[j+n>>>2]!==t)throw Error(`not a string: ${j}`);return U(J,j)}S.__getString=L;function rt(j,J,Z){const H=D.buffer;if(Z)switch(j){case 2:return new Float32Array(H);case 3:return new Float64Array(H)}else switch(j){case 0:return new(J?Int8Array:Uint8Array)(H);case 1:return new(J?Int16Array:Uint16Array)(H);case 2:return new(J?Int32Array:Uint32Array)(H);case 3:return new(J?BigInt64Array:BigUint64Array)(H)}throw Error(`unsupported align: ${j}`)}function G(j,J){const Z=Q(j),H=Y(Z),$=J.length,tt=O($<<H,Z&i?j:A);let ut;if(Z&i)ut=tt;else{const et=O(Z&s?E:d,j),st=new Uint32Array(D.buffer);st[et+f>>>2]=k(tt),st[et+v>>>2]=tt,st[et+c>>>2]=$<<H,Z&s&&(st[et+o>>>2]=$),ut=et}const lt=rt(H,Z&h,Z&l);if(Z&r)for(let et=0;et<$;++et)lt[(tt>>>H)+et]=k(J[et]);else lt.set(J,tt>>>H);return ut}S.__newArray=G;function ot(j){const J=new Uint32Array(D.buffer),Z=J[j+n>>>2],H=Q(Z),$=Y(H);let tt=H&i?j:J[j+v>>>2];const ut=H&s?J[j+o>>>2]:J[tt+u>>>2]>>>$;return rt($,H&h,H&l).subarray(tt>>>=$,tt+ut)}S.__getArrayView=ot;function ht(j){const J=ot(j),Z=J.length,H=new Array(Z);for(let $=0;$<Z;$++)H[$]=J[$];return H}S.__getArray=ht;function nt(j){const J=D.buffer,Z=new Uint32Array(J)[j+u>>>2];return J.slice(j,j+Z)}S.__getArrayBuffer=nt;function ft(j,J,Z){return new j(it(j,J,Z))}function it(j,J,Z){const H=D.buffer,$=new Uint32Array(H),tt=$[Z+v>>>2];return new j(H,tt,$[tt+u>>>2]>>>J)}function at(j,J,Z){S[`__get${J}`]=ft.bind(null,j,Z),S[`__get${J}View`]=it.bind(null,j,Z)}[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(j=>{at(j,j.name,31-Math.clz32(j.BYTES_PER_ELEMENT))}),p&&[BigUint64Array,BigInt64Array].forEach(j=>{at(j,j.name.slice(3),3)});function dt(j,J){const Z=new Uint32Array(D.buffer);let H=Z[j+n>>>2];if(H<=Z[K>>>2])do{if(H==J)return!0;H=z(H)}while(H);return!1}return S.__instanceof=dt,S.memory=S.memory||D,S.table=S.table||X,R(F,S)}function _(S){return typeof Response<"u"&&S instanceof Response}function T(S){return S instanceof WebAssembly.Module}async function x(S,y={}){if(_(S=await S))return M(S,y);const F=T(S)?S:await WebAssembly.compile(S),D=w(y),X=await WebAssembly.instantiate(F,y),O=b(D,X);return{module:F,instance:X,exports:O}}function I(S,y={}){const F=T(S)?S:new WebAssembly.Module(S),D=w(y),X=new WebAssembly.Instance(F,y),O=b(D,X);return{module:F,instance:X,exports:O}}async function M(S,y={}){if(!WebAssembly.instantiateStreaming)return x(_(S=await S)?S.arrayBuffer():S,y);const F=w(y),D=await WebAssembly.instantiateStreaming(S,y),X=b(F,D.instance);return{...D,exports:X}}function R(S,y={}){const F=S.__argumentsLength?D=>{S.__argumentsLength.value=D}:S.__setArgumentsLength||S.__setargc||(()=>{});for(let D in S){if(!Object.prototype.hasOwnProperty.call(S,D))continue;const X=S[D];let O=D.split("."),k=y;for(;O.length>1;){let Q=O.shift();Object.prototype.hasOwnProperty.call(k,Q)||(k[Q]={}),k=k[Q]}let K=O[0],B=K.indexOf("#");if(B>=0){const Q=K.substring(0,B),z=k[Q];if(typeof z>"u"||!z.prototype){const Y=function(...W){return Y.wrap(Y.prototype.constructor(0,...W))};Y.prototype={valueOf(){return this[P]}},Y.wrap=function(W){return Object.create(Y.prototype,{[P]:{value:W,writable:!1}})},z&&Object.getOwnPropertyNames(z).forEach(W=>Object.defineProperty(Y,W,Object.getOwnPropertyDescriptor(z,W))),k[Q]=Y}if(K=K.substring(B+1),k=k[Q].prototype,/^(get|set):/.test(K)){if(!Object.prototype.hasOwnProperty.call(k,K=K.substring(4))){let Y=S[D.replace("set:","get:")],W=S[D.replace("get:","set:")];Object.defineProperty(k,K,{get(){return Y(this[P])},set(L){W(this[P],L)},enumerable:!0})}}else K==="constructor"?(k[K]=(...Y)=>(F(Y.length),X(...Y))).original=X:(k[K]=function(...Y){return F(Y.length),X(this[P],...Y)}).original=X}else/^(get|set):/.test(K)?Object.prototype.hasOwnProperty.call(k,K=K.substring(4))||Object.defineProperty(k,K,{get:S[D.replace("set:","get:")],set:S[D.replace("get:","set:")],enumerable:!0}):typeof X=="function"&&X!==F?(k[K]=(...Q)=>(F(Q.length),X(...Q))).original=X:k[K]=X}return y}m.default={instantiate:x,instantiateSync:I,instantiateStreaming:M,demangle:R}},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(N,m){function g(n,u,A){return u in n?Object.defineProperty(n,u,{value:A,enumerable:!0,configurable:!0,writable:!0}):n[u]=A,n}N.exports=g},"./node_modules/ecma-proposal-math-extensions/reference-implementation/index.js":function(N,m,g){{const n=(A,t)=>{var e=typeof t=="function",s=typeof t=="function",i=typeof t=="function";Object.defineProperty(Math,A,{configurable:e,enumerable:i,writable:s,value:t})};n("DEG_PER_RAD",Math.PI/180),n("RAD_PER_DEG",180/Math.PI);const u=new Float32Array(1);n("scale",function(t,e,s,i,a){return arguments.length===0?NaN:Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(s)||Number.isNaN(i)||Number.isNaN(a)?NaN:t===1/0||t===-1/0?t:(t-e)*(a-i)/(s-e)+i}),n("fscale",function(t,e,s,i,a){return u[0]=Math.scale(t,e,s,i,a),u[0]}),n("clamp",function(t,e,s){return Math.min(s,Math.max(e,t))}),n("radians",function(t){return t*Math.DEG_PER_RAD}),n("degrees",function(t){return t*Math.RAD_PER_DEG})}},"./node_modules/eel-wasm/dist/build/parser.js":function(N,m,g){(function(n,u){var A=function(){var t=function(K,B,Q,z){for(Q=Q||{},z=K.length;z--;Q[K[z]]=B);return Q},e=[1,18],s=[1,7],i=[1,19],a=[1,20],h=[1,14],l=[1,15],r=[1,16],f=[1,33],v=[1,31],c=[1,23],d=[1,22],o=[1,24],E=[1,25],p=[1,26],P=[1,27],q=[1,28],C=[1,29],U=[1,30],w=[5,8,15,18,20,28,29,32,33,34,35,36,37,38],b=[5,15,18],_=[5,12,15,17,18,24,25,28,29,30],T=[1,57],x=[5,8,12,15,17,18,24,25,28,29,30],I=[15,18],M=[5,8,15,18,28,29,38],R=[5,8,15,18,28,29,32,33,38],S=[5,8,15,18,28,29,32,33,34,37,38],y=[5,8,15,18,28,29,32,33,34,35,36,37,38],F=[5,8,15,18],D=[5,8,15,18,20,22,28,29,32,33,34,35,36,37,38],X={trace:function(){},yy:{},symbols_:{error:2,SCRIPT:3,expression:4,EOF:5,expressionsOptionalTrailingSemi:6,separator:7,";":8,expressions:9,EXPRESSION_BLOCK:10,IDENTIFIER:11,IDENTIFIER_TOKEN:12,argument:13,arguments:14,",":15,FUNCTION_CALL:16,"(":17,")":18,LOGICAL_EXPRESSION:19,LOGICAL_OPERATOR_TOKEN:20,ASSIGNMENT:21,ASSIGNMENT_OPERATOR_TOKEN:22,number:23,DIGITS_TOKEN:24,".":25,NUMBER_LITERAL:26,UNARY_EXPRESSION:27,"-":28,"+":29,"!":30,BINARY_EXPRESSION:31,"*":32,"/":33,"%":34,"&":35,"|":36,"^":37,COMPARISON_TOKEN:38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:";",12:"IDENTIFIER_TOKEN",15:",",17:"(",18:")",20:"LOGICAL_OPERATOR_TOKEN",22:"ASSIGNMENT_OPERATOR_TOKEN",24:"DIGITS_TOKEN",25:".",28:"-",29:"+",30:"!",32:"*",33:"/",34:"%",35:"&",36:"|",37:"^",38:"COMPARISON_TOKEN"},productions_:[0,[3,2],[3,2],[3,1],[7,1],[7,2],[9,2],[9,3],[6,1],[6,2],[10,1],[11,1],[13,1],[13,1],[14,1],[14,3],[16,3],[16,4],[19,3],[21,3],[21,3],[23,1],[23,2],[23,3],[23,2],[23,1],[26,1],[27,2],[27,2],[27,2],[31,3],[31,3],[31,3],[31,3],[31,3],[31,3],[31,3],[31,3],[31,3],[4,1],[4,1],[4,3],[4,1],[4,1],[4,1],[4,1],[4,1],[4,3]],performAction:function(B,Q,z,Y,W,L,rt){var G=L.length-1;switch(W){case 1:return{type:"SCRIPT",body:[L[G-1]],loc:this._$};case 2:return{type:"SCRIPT",body:L[G-1],loc:this._$};case 3:return{type:"SCRIPT",body:[],loc:this._$};case 6:this.$=[L[G-1]];break;case 7:this.$=L[G-2].concat([L[G-1]]);break;case 8:this.$=L[G];break;case 9:this.$=L[G-1].concat([L[G]]);break;case 10:this.$={type:"EXPRESSION_BLOCK",body:L[G],loc:this._$};break;case 11:this.$={type:"IDENTIFIER",value:L[G].toLowerCase(),loc:this._$};break;case 14:this.$=[L[G]];break;case 15:this.$=L[G-2].concat([L[G]]);break;case 16:this.$={type:"CALL_EXPRESSION",callee:L[G-2],arguments:[],loc:this._$};break;case 17:this.$={type:"CALL_EXPRESSION",callee:L[G-3],arguments:L[G-1],loc:this._$};break;case 18:this.$={type:"LOGICAL_EXPRESSION",left:L[G-2],right:L[G],operator:L[G-1],loc:this._$};break;case 19:case 20:this.$={type:"ASSIGNMENT_EXPRESSION",left:L[G-2],operator:L[G-1],right:L[G],loc:this._$};break;case 21:this.$=Number(L[G]);break;case 22:this.$=Number(L[G-1]);break;case 23:this.$=Number(L[G-2]+L[G-1]+L[G]);break;case 24:this.$=+("0"+L[G-1]+L[G]);break;case 25:this.$=0;break;case 26:this.$={type:"NUMBER_LITERAL",value:L[G],loc:this._$};break;case 27:case 28:case 29:this.$={type:"UNARY_EXPRESSION",value:L[G],operator:L[G-1],loc:this._$};break;case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:this.$={type:"BINARY_EXPRESSION",left:L[G-2],right:L[G],operator:L[G-1],loc:this._$};break;case 41:case 47:this.$=L[G-1];break}},table:[{3:1,4:2,5:[1,4],6:3,9:13,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{1:[3]},{5:[1,21],7:32,8:f,20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U},{5:[1,34]},{1:[2,3]},t(w,[2,39]),t(w,[2,40]),{4:35,6:37,9:13,10:36,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},t(w,[2,42]),t(w,[2,43]),t(w,[2,44],{22:[1,38]}),t(w,[2,45],{17:[1,40],22:[1,39]}),t(w,[2,46]),t(b,[2,8],{31:5,27:6,26:8,21:9,16:10,11:11,19:12,23:17,4:41,12:e,17:s,24:i,25:a,28:h,29:l,30:r}),{4:42,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:43,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:44,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},t(w,[2,26]),t([5,8,15,17,18,20,22,28,29,32,33,34,35,36,37,38],[2,11]),t(w,[2,21],{25:[1,45]}),t(w,[2,25],{24:[1,46]}),{1:[2,1]},{4:47,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:48,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:49,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:50,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:51,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:52,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:53,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:54,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:55,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:56,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},t(_,[2,6],{8:T}),t(x,[2,4]),{1:[2,2]},{7:32,8:f,18:[1,58],20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U},{18:[1,59]},t(I,[2,10]),{4:60,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:61,11:11,12:e,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},{4:65,6:37,9:13,10:66,11:11,12:e,13:64,14:63,16:10,17:s,18:[1,62],19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},t(b,[2,9],{7:67,8:f,20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U}),t(M,[2,27],{20:v,32:o,33:E,34:p,35:P,36:q,37:C}),t(M,[2,28],{20:v,32:o,33:E,34:p,35:P,36:q,37:C}),t(M,[2,29],{20:v,32:o,33:E,34:p,35:P,36:q,37:C}),t(w,[2,22],{24:[1,68]}),t(w,[2,24]),t(M,[2,30],{20:v,32:o,33:E,34:p,35:P,36:q,37:C}),t(M,[2,31],{20:v,32:o,33:E,34:p,35:P,36:q,37:C}),t(R,[2,32],{20:v,34:p,35:P,36:q,37:C}),t(R,[2,33],{20:v,34:p,35:P,36:q,37:C}),t(S,[2,34],{20:v,35:P,36:q}),t(y,[2,35],{20:v}),t(y,[2,36],{20:v}),t(S,[2,37],{20:v,35:P,36:q}),t(F,[2,38],{20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U}),t(w,[2,18]),t(x,[2,5]),t(w,[2,41]),t(w,[2,47]),t(F,[2,20],{20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U}),t(F,[2,19],{20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U}),t(D,[2,16]),{15:[1,70],18:[1,69]},t(I,[2,14]),t(I,[2,12],{7:32,8:f,20:v,28:c,29:d,32:o,33:E,34:p,35:P,36:q,37:C,38:U}),t(I,[2,13]),t(_,[2,7],{8:T}),t(w,[2,23]),t(D,[2,17]),{4:65,6:37,9:13,10:66,11:11,12:e,13:71,16:10,17:s,19:12,21:9,23:17,24:i,25:a,26:8,27:6,28:h,29:l,30:r,31:5},t(I,[2,15])],defaultActions:{4:[2,3],21:[2,1],34:[2,2]},parseError:function(B,Q){if(Q.recoverable)this.trace(B);else{var z=new Error(B);throw z.hash=Q,z}},parse:function(B){var Q=this,z=[0],Y=[null],W=[],L=this.table,rt="",G=0,ot=0,ht=2,nt=1,ft=W.slice.call(arguments,1),it=Object.create(this.lexer),at={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(at.yy[dt]=this.yy[dt]);it.setInput(B,at.yy),at.yy.lexer=it,at.yy.parser=this,typeof it.yylloc>"u"&&(it.yylloc={});var j=it.yylloc;W.push(j);var J=it.options&&it.options.ranges;typeof at.yy.parseError=="function"?this.parseError=at.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Z=function(){var gt;return gt=it.lex()||nt,typeof gt!="number"&&(gt=Q.symbols_[gt]||gt),gt},H,$,tt,ut,lt={},et,st,Et,mt;;){if($=z[z.length-1],this.defaultActions[$]?tt=this.defaultActions[$]:((H===null||typeof H>"u")&&(H=Z()),tt=L[$]&&L[$][H]),typeof tt>"u"||!tt.length||!tt[0]){var pt="";mt=[];for(et in L[$])this.terminals_[et]&&et>ht&&mt.push("'"+this.terminals_[et]+"'");it.showPosition?pt="Parse error on line "+(G+1)+`:
`+it.showPosition()+`
Expecting `+mt.join(", ")+", got '"+(this.terminals_[H]||H)+"'":pt="Parse error on line "+(G+1)+": Unexpected "+(H==nt?"end of input":"'"+(this.terminals_[H]||H)+"'"),this.parseError(pt,{text:it.match,token:this.terminals_[H]||H,line:it.yylineno,loc:j,expected:mt})}if(tt[0]instanceof Array&&tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$+", token: "+H);switch(tt[0]){case 1:z.push(H),Y.push(it.yytext),W.push(it.yylloc),z.push(tt[1]),H=null,ot=it.yyleng,rt=it.yytext,G=it.yylineno,j=it.yylloc;break;case 2:if(st=this.productions_[tt[1]][1],lt.$=Y[Y.length-st],lt._$={first_line:W[W.length-(st||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(st||1)].first_column,last_column:W[W.length-1].last_column},J&&(lt._$.range=[W[W.length-(st||1)].range[0],W[W.length-1].range[1]]),ut=this.performAction.apply(lt,[rt,ot,G,at.yy,tt[1],Y,W].concat(ft)),typeof ut<"u")return ut;st&&(z=z.slice(0,-1*st*2),Y=Y.slice(0,-1*st),W=W.slice(0,-1*st)),z.push(this.productions_[tt[1]][0]),Y.push(lt.$),W.push(lt._$),Et=L[z[z.length-2]][z[z.length-1]],z.push(Et);break;case 3:return!0}}return!0}},O=function(){var K={EOF:1,parseError:function(Q,z){if(this.yy.parser)this.yy.parser.parseError(Q,z);else throw new Error(Q)},setInput:function(B,Q){return this.yy=Q||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var Q=B.match(/(?:\r\n?|\n).*/g);return Q?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},unput:function(B){var Q=B.length,z=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Q),this.offset-=Q;var Y=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),z.length-1&&(this.yylineno-=z.length-1);var W=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:z?(z.length===Y.length?this.yylloc.first_column:0)+Y[Y.length-z.length].length-z[0].length:this.yylloc.first_column-Q},this.options.ranges&&(this.yylloc.range=[W[0],W[0]+this.yyleng-Q]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(B){this.unput(this.match.slice(B))},pastInput:function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var B=this.pastInput(),Q=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+Q+"^"},test_match:function(B,Q){var z,Y,W;if(this.options.backtrack_lexer&&(W={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(W.yylloc.range=this.yylloc.range.slice(0))),Y=B[0].match(/(?:\r\n?|\n).*/g),Y&&(this.yylineno+=Y.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Y?Y[Y.length-1].length-Y[Y.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],z=this.performAction.call(this,this.yy,this,Q,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),z)return z;if(this._backtrack){for(var L in W)this[L]=W[L];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,Q,z,Y;this._more||(this.yytext="",this.match="");for(var W=this._currentRules(),L=0;L<W.length;L++)if(z=this._input.match(this.rules[W[L]]),z&&(!Q||z[0].length>Q[0].length)){if(Q=z,Y=L,this.options.backtrack_lexer){if(B=this.test_match(z,W[L]),B!==!1)return B;if(this._backtrack){Q=!1;continue}else return!1}else if(!this.options.flex)break}return Q?(B=this.test_match(Q,W[Y]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Q=this.next();return Q||this.lex()},begin:function(Q){this.conditionStack.push(Q)},popState:function(){var Q=this.conditionStack.length-1;return Q>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Q){return Q=this.conditionStack.length-1-Math.abs(Q||0),Q>=0?this.conditionStack[Q]:"INITIAL"},pushState:function(Q){this.begin(Q)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Q,z,Y,W){switch(Y){case 0:break;case 1:return 24;case 2:return 38;case 3:return 22;case 4:return 20;case 5:return 12;case 6:return 5;case 7:return z.yytext[0]}},rules:[/^(?:\s+)/,/^(?:[0-9]+)/,/^(?:(==|!=|<=|>=|<|>))/,/^(?:[+\-*/%]?=)/,/^(?:(\&\&)|\|\|)/,/^(?:[a-zA-Z_][a-zA-Z0-9._]*)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return K}();X.lexer=O;function k(){this.yy={}}return k.prototype=X,X.Parser=k,new k}();m.parser=A,m.Parser=A.Parser,m.parse=function(){return A.parse.apply(A,arguments)},m.main=()=>{},g.c[g.s]===n&&m.main(u.argv.slice(1))}).call(this,g("./node_modules/webpack/buildin/module.js")(N),g("./node_modules/process/browser.js"))},"./node_modules/eel-wasm/dist/src/astUtils.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});const n={ASSIGNMENT_EXPRESSION:[{type:"NODE",key:"right"}],SCRIPT:[{type:"ARRAY",key:"body"}],EXPRESSION_BLOCK:[{type:"ARRAY",key:"body"}],UNARY_EXPRESSION:[{type:"NODE",key:"value"}],NUMBER_LITERAL:[],IDENTIFIER:[],CALL_EXPRESSION:[{type:"ARRAY",key:"arguments"},{type:"NODE",key:"callee"}],BINARY_EXPRESSION:[{type:"NODE",key:"left"},{type:"NODE",key:"right"}],LOGICAL_EXPRESSION:[{type:"NODE",key:"left"},{type:"NODE",key:"right"}]};function u(A,t){const e=n[A.type];let s=A;if(e==null)throw new Error(`Unknown children definition for ${A.type}`);return e.forEach(i=>{if(i.type==="NODE"){const a=A[i.key],h=u(a,t);h!==a&&(s=Object.assign(Object.assign({},s),{[i.key]:h}))}else if(i.type==="ARRAY"){const a=A[i.key],h=a.map(r=>u(r,t));a.some((r,f)=>r!==h[f])&&(s=Object.assign(Object.assign({},s),{[i.key]:h}))}}),t(s)}m.mapAst=u},"./node_modules/eel-wasm/dist/src/compiler.js":function(N,m,g){var n=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},u=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var f={};if(r!=null)for(var v in r)Object.hasOwnProperty.call(r,v)&&(f[v]=r[v]);return f.default=r,f};Object.defineProperty(m,"__esModule",{value:!0});const A=g("./node_modules/eel-wasm/dist/src/parser.js"),t=g("./node_modules/eel-wasm/dist/src/emitter.js"),e=g("./node_modules/eel-wasm/dist/src/encoding.js"),s=n(g("./node_modules/eel-wasm/dist/src/shims.js")),i=u(g("./node_modules/eel-wasm/dist/src/utils.js")),a=g("./node_modules/eel-wasm/dist/src/wasmFunctions.js"),h=g("./node_modules/eel-wasm/dist/src/constants.js");function l({pools:r,functions:f,eelVersion:v=2,preParsed:c=!1}){if(Object.keys(r).includes("shims"))throw new Error('You may not name a pool "shims". "shims" is reserved for injected JavaScript functions.');const d=[];Object.entries(r).forEach(([y,F])=>{F.forEach(D=>{d.push([y,D])})});const o=new i.ScopedIdMap;d.forEach(([y,F])=>{o.get(y,F)});const E=Object.entries(s.default).map(([y,F])=>({args:new Array(F.length).fill(null).map(D=>e.VAL_TYPE.f64),returns:[e.VAL_TYPE.f64],name:y})),p=[],P=[];Object.entries(f).forEach(([y,{pool:F,code:D}])=>{if(r[F]==null){const B=Object.keys(r);throw B.length===0?new Error(`The function "${y}" was declared as using a variable pool named "${F}" but no pools were defined.`):new Error(`The function "${y}" was declared as using a variable pool named "${F}" which is not among the variable pools defined. The defined variable pools are: ${i.formatList(B)}.`)}const X=c?D:A.parse(D);if(typeof X=="string")throw new Error("Got passed unparsed code without setting the preParsed flag");if(X.type!=="SCRIPT")throw new Error("Invalid AST");if(X.body.length===0)return;const O=[],k={resolveVar:B=>/^reg\d\d$/.test(B)?o.get(null,B):o.get(F,B),resolveLocal:B=>(O.push(B),O.length-1),resolveFunc:B=>{const Q=E.findIndex(Y=>Y.name===B);if(Q!==-1){const Y=e.op.call(Q);return B==="rand"&&v===1?[...Y,e.op.f64_floor]:Y}if(a.localFuncMap[B]==null)return null;let z=p.indexOf(B);return z===-1&&(p.push(B),z=p.length-1),e.op.call(z+E.length)},rawSource:D},K=t.emit(X,k);P.push({binary:K,exportName:y,args:[],returns:[],localVariables:O})});const q=p.map(y=>{const F=a.localFuncMap[y];if(F==null)throw new Error(`Undefined local function "${y}"`);return F}),C=y=>[...y.args,"|",...y.returns].join("-"),U=[],w=new Map;[...E,...q,...P].forEach(y=>{const F=C(y);w.has(F)||(U.push([e.FUNCTION_TYPE,...e.encodeFlatVector(y.args),...e.encodeFlatVector(y.returns)]),w.set(F,U.length-1))});function b(y){const F=C(y),D=w.get(F);if(D==null)throw new Error(`Failed to get a type index for key ${F}`);return D}const _=[...d.map(([y,F])=>[...e.encodeString(y),...e.encodeString(F),e.GLOBAL_TYPE,e.VAL_TYPE.f64,e.MUTABILITY.var]),...E.map((y,F)=>{const D=b(y);return[...e.encodeString("shims"),...e.encodeString(y.name),e.TYPE_IDX,...e.unsignedLEB128(D)]})],T=[...q,...P].map(y=>{const F=b(y);return e.unsignedLEB128(F)}),x=[[1,...e.unsignedLEB128(h.WASM_MEMORY_SIZE),...e.unsignedLEB128(h.WASM_MEMORY_SIZE)]],I=o.size()-d.length,M=i.times(I,()=>[e.VAL_TYPE.f64,e.MUTABILITY.var,...e.op.f64_const(0),e.op.end]),R=[...P].map((y,F)=>{const D=F+E.length+q.length;return[...e.encodeString(y.exportName),e.EXPORT_TYPE.FUNC,...e.unsignedLEB128(D)]}),S=[...q,...P].map(y=>{var F;const D=((F=y.localVariables)!==null&&F!==void 0?F:[]).map(X=>[...e.unsignedLEB128(1),X]);return e.encodeFlatVector([...e.encodeNestedVector(D),...y.binary,e.op.end])});return new Uint8Array([...e.MAGIC,...e.WASM_VERSION,...e.encodeSection(e.SECTION.TYPE,U),...e.encodeSection(e.SECTION.IMPORT,_),...e.encodeSection(e.SECTION.FUNC,T),...e.encodeSection(e.SECTION.MEMORY,x),...e.encodeSection(e.SECTION.GLOBAL,M),...e.encodeSection(e.SECTION.EXPORT,R),...e.encodeSection(e.SECTION.CODE,S)])}m.compileModule=l},"./node_modules/eel-wasm/dist/src/constants.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});const n=65536,u=8,A=2;m.MAX_LOOP_COUNT=1048576,m.BUFFER_SIZE=65536*128,m.WASM_MEMORY_SIZE=Math.ceil(m.BUFFER_SIZE*u*A/n)},"./node_modules/eel-wasm/dist/src/emitter.js":function(N,m,g){var n=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(m,"__esModule",{value:!0});const u=g("./node_modules/eel-wasm/dist/src/encoding.js"),A=n(g("./node_modules/eel-wasm/dist/src/shims.js")),t=g("./node_modules/eel-wasm/dist/src/errorUtils.js"),e=g("./node_modules/eel-wasm/dist/src/wasmFunctions.js"),s=g("./node_modules/eel-wasm/dist/src/utils.js"),i=g("./node_modules/eel-wasm/dist/src/constants.js");function a(d,o){var E,p,P;switch(d.type){case"SCRIPT":{const C=d.body.map((U,w)=>[...a(U,o),u.op.drop]);return s.flatten(C)}case"EXPRESSION_BLOCK":return h(d.body,o);case"BINARY_EXPRESSION":{const C=a(d.left,o),U=a(d.right,o),b={"+":[u.op.f64_add],"-":[u.op.f64_sub],"*":[u.op.f64_mul],"/":o.resolveFunc("div"),"%":o.resolveFunc("mod"),"|":o.resolveFunc("bitwiseOr"),"&":o.resolveFunc("bitwiseAnd"),"^":o.resolveFunc("pow"),"==":[u.op.f64_sub,...u.IS_ZEROISH,u.op.f64_convert_i32_s],"!=":[u.op.f64_sub,...u.IS_NOT_ZEROISH,u.op.f64_convert_i32_s],"<":[u.op.f64_lt,u.op.f64_convert_i32_s],">":[u.op.f64_gt,u.op.f64_convert_i32_s],"<=":[u.op.f64_le,u.op.f64_convert_i32_s],">=":[u.op.f64_ge,u.op.f64_convert_i32_s]}[d.operator];if(b==null)throw t.createCompilerError(`Unknown binary expression operator ${d.operator}`,d.loc,o.rawSource);return[...C,...U,...b]}case"CALL_EXPRESSION":{const C=d.callee.value,U=d.arguments,w=T=>{if(U.length<T)throw t.createUserError(`Too few arguments passed to \`${C}()\`. Expected ${T} but only got ${U.length}.`,d.loc,o.rawSource);if(U.length>T)throw t.createUserError(`Too many arguments passed to \`${C}()\`. Expected ${T} but got ${U.length}.`,U[T].loc,o.rawSource)};switch(C){case"exec2":return w(2),h(d.arguments,o);case"exec3":return w(3),h(d.arguments,o);case"if":w(3);const[T,x,I]=d.arguments;return f(T,x,I,o);case"while":return w(1),l(d.arguments[0],o);case"loop":return w(2),r(d.arguments[0],d.arguments[1],o);case"megabuf":case"gmegabuf":w(1);const M=o.resolveLocal(u.VAL_TYPE.i32);return[...a(d.arguments[0],o),...(E=o.resolveFunc("_getBufferIndex"))!==null&&E!==void 0?E:[],...u.op.local_tee(M),...u.op.i32_const(-1),u.op.i32_ne,...u.op.if(u.BLOCK.f64),...u.op.local_get(M),...u.op.f64_load(3,v(C)),u.op.else,...u.op.f64_const(0),u.op.end];case"assign":w(2);const R=d.arguments[0];if(R.type!="IDENTIFIER")throw t.createUserError("Expected the first argument of `assign()` to be an identifier.",R.loc,o.rawSource);const S=o.resolveVar(R.value);return[...a(d.arguments[1],o),...u.op.global_set(S),...u.op.global_get(S)]}const b=s.flatten(d.arguments.map(T=>a(T,o)));switch(C){case"abs":return w(1),[...b,u.op.f64_abs];case"sqrt":return w(1),[...b,u.op.f64_abs,u.op.f64_sqrt];case"int":return w(1),[...b,u.op.f64_floor];case"min":return w(2),[...b,u.op.f64_min];case"max":return w(2),[...b,u.op.f64_max];case"above":return w(2),[...b,u.op.f64_gt,u.op.f64_convert_i32_s];case"below":return w(2),[...b,u.op.f64_lt,u.op.f64_convert_i32_s];case"equal":return w(2),[...b,u.op.f64_sub,...u.IS_ZEROISH,u.op.f64_convert_i32_s];case"bnot":return w(1),[...b,...u.IS_ZEROISH,u.op.f64_convert_i32_s];case"floor":return w(1),[...b,u.op.f64_floor];case"ceil":return w(1),[...b,u.op.f64_ceil]}const _=o.resolveFunc(C);if(_==null||C.startsWith("_"))throw t.createUserError(`"${C}" is not defined.`,d.callee.loc,o.rawSource);if(A.default[C]!=null)w(A.default[C].length);else if(e.localFuncMap[C]!=null)w(e.localFuncMap[C].args.length);else throw t.createCompilerError(`Missing arity information for the function \`${C}()\``,d.callee.loc,o.rawSource);return[...b,..._]}case"ASSIGNMENT_EXPRESSION":{const{left:C}=d,U=a(d.right,o),w=c(d,o);if(C.type==="IDENTIFIER"){const S=o.resolveVar(C.value),y=u.op.global_get(S),F=u.op.global_set(S);return w===null?[...U,...F,...y]:[...y,...U,...w,...F,...y]}if(C.type!=="CALL_EXPRESSION")throw t.createCompilerError(`Unexpected left hand side type for assignment: ${C.type}`,d.loc,o.rawSource);const b=o.resolveLocal(u.VAL_TYPE.i32);if(C.arguments.length!==1)throw t.createUserError(`Expected 1 argument when assinging to a buffer but got ${C.arguments.length}.`,C.arguments.length===0?C.loc:C.arguments[1].loc,o.rawSource);const _=C.callee.value;if(_!=="gmegabuf"&&_!=="megabuf")throw t.createUserError("The only function calls which may be assigned to are `gmegabuf()` and `megabuf()`.",C.callee.loc,o.rawSource);const T=v(_);if(w===null){const S=o.resolveLocal(u.VAL_TYPE.i32),y=o.resolveLocal(u.VAL_TYPE.f64);return[...U,...u.op.local_set(y),...a(C.arguments[0],o),...(p=o.resolveFunc("_getBufferIndex"))!==null&&p!==void 0?p:[],...u.op.local_tee(S),...u.op.i32_const(0),u.op.i32_lt_s,...u.op.if(u.BLOCK.f64),...u.op.f64_const(0),u.op.else,...u.op.local_get(S),...u.op.local_tee(b),...u.op.local_get(y),...u.op.f64_store(3,T),...u.op.local_get(y),u.op.end]}const x=o.resolveLocal(u.VAL_TYPE.i32),I=o.resolveLocal(u.VAL_TYPE.i32),M=o.resolveLocal(u.VAL_TYPE.f64),R=o.resolveLocal(u.VAL_TYPE.f64);return[...U,...u.op.local_set(M),...a(C.arguments[0],o),...(P=o.resolveFunc("_getBufferIndex"))!==null&&P!==void 0?P:[],...u.op.local_tee(x),...u.op.i32_const(-1),u.op.i32_ne,...u.op.local_tee(I),...u.op.if(u.BLOCK.f64),...u.op.local_get(x),...u.op.f64_load(3,T),u.op.else,...u.op.f64_const(0),u.op.end,...u.op.local_get(M),...w,...u.op.local_tee(R),...u.op.local_get(I),...u.op.if(u.BLOCK.void),...u.op.local_get(x),...u.op.local_get(R),...u.op.f64_store(3,T),u.op.end]}case"LOGICAL_EXPRESSION":{const C=a(d.left,o),U=a(d.right,o),b={"&&":{comparison:u.IS_ZEROISH,shortCircutValue:0},"||":{comparison:u.IS_NOT_ZEROISH,shortCircutValue:1}}[d.operator];if(b==null)throw t.createCompilerError(`Unknown logical expression operator ${d.operator}`,d.loc,o.rawSource);const{comparison:_,shortCircutValue:T}=b;return[...C,..._,...u.op.if(u.BLOCK.f64),...u.op.f64_const(T),u.op.else,...U,...u.IS_NOT_ZEROISH,u.op.f64_convert_i32_s,u.op.end]}case"UNARY_EXPRESSION":{const C=a(d.value,o),w={"-":[u.op.f64_neg],"+":[],"!":[...u.IS_ZEROISH,u.op.f64_convert_i32_s]}[d.operator];if(w==null)throw t.createCompilerError(`Unknown logical unary operator ${d.operator}`,d.loc,o.rawSource);return[...C,...w]}case"IDENTIFIER":const q=d.value;return u.op.global_get(o.resolveVar(q));case"NUMBER_LITERAL":return u.op.f64_const(d.value);default:throw t.createCompilerError(`Unknown AST node type ${d.type}`,d.loc,o.rawSource)}}m.emit=a;function h(d,o){const E=d.map((p,P)=>a(p,o));return s.flatten(s.arrayJoin(E,[u.op.drop]))}function l(d,o){const E=a(d,o),p=o.resolveLocal(u.VAL_TYPE.i32);return[...u.op.i32_const(0),...u.op.local_set(p),...u.op.loop(u.BLOCK.void),...u.op.local_get(p),...u.op.i32_const(1),u.op.i32_add,...u.op.local_tee(p),...u.op.i32_const(i.MAX_LOOP_COUNT),u.op.i32_lt_u,...E,...u.IS_NOT_ZEROISH,u.op.i32_and,...u.op.br_if(0),u.op.end,...u.op.f64_const(0)]}function r(d,o,E){const p=a(o,E),P=E.resolveLocal(u.VAL_TYPE.i32);return[...u.op.block(u.BLOCK.void),...a(d,E),u.op.i32_trunc_f64_s,...u.op.local_tee(P),...u.op.i32_const(0),u.op.i32_le_s,...u.op.br_if(1),...u.op.loop(u.BLOCK.void),...p,u.op.drop,...u.op.local_get(P),...u.op.i32_const(1),u.op.i32_sub,...u.op.local_tee(P),...u.op.i32_const(0),u.op.i32_ne,...u.op.br_if(0),u.op.end,u.op.end,...u.op.f64_const(0)]}function f(d,o,E,p){return[...a(d,p),...u.IS_NOT_ZEROISH,...u.op.if(u.BLOCK.f64),...a(o,p),u.op.else,...a(E,p),u.op.end]}function v(d){switch(d){case"gmegabuf":return i.BUFFER_SIZE*8;case"megabuf":return 0}}function c(d,o){const p={"+=":[u.op.f64_add],"-=":[u.op.f64_sub],"*=":[u.op.f64_mul],"/=":[u.op.f64_div],"%=":o.resolveFunc("mod"),"=":null}[d.operator];if(p===void 0)throw t.createCompilerError(`Unknown assignment operator "${d.operator}"`,d.loc,o.rawSource);return p}},"./node_modules/eel-wasm/dist/src/encoding.js":function(N,m,g){var n=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var h={};if(a!=null)for(var l in a)Object.hasOwnProperty.call(a,l)&&(h[l]=a[l]);return h.default=a,h};Object.defineProperty(m,"__esModule",{value:!0});const u=n(g("./node_modules/eel-wasm/dist/src/ieee754.js")),A=g("./node_modules/eel-wasm/dist/src/utils.js");m.MAGIC=[0,97,115,109],m.WASM_VERSION=[1,0,0,0],m.EPSILON=1e-5,m.SECTION={TYPE:1,IMPORT:2,FUNC:3,MEMORY:5,GLOBAL:6,EXPORT:7,CODE:10},m.EXPORT_TYPE={FUNC:0,TABLE:1,MEMORY:2,GLOBAL:3},m.op={block:a=>[2,a],loop:a=>[3,a],if:a=>[4,a],else:5,end:11,br_if:a=>[13,...e(a)],call:a=>[16,...e(a)],drop:26,select:27,local_get:a=>[32,...e(a)],local_set:a=>[33,...e(a)],local_tee:a=>[34,...e(a)],global_get:a=>[35,...e(a)],global_set:a=>[36,...e(a)],f64_load:(a,h)=>[43,...e(a),...e(h)],f64_store:(a,h)=>[57,...e(a),...e(h)],i32_const:a=>[65,...s(a)],f64_const:a=>[68,...t(a)],i32_eqz:69,i32_ne:71,i32_lt_s:72,i32_lt_u:73,i32_gt_s:74,i32_le_s:76,i32_le_u:77,i32_ge_s:78,f64_eq:97,f64_ne:98,f64_lt:99,f64_gt:100,f64_le:101,f64_ge:102,i32_add:106,i32_sub:107,i32_mul:108,i32_rem_s:111,i32_and:113,i32_or:114,i64_rem_s:129,i64_and:131,i64_or:132,f64_abs:153,f64_neg:154,f64_ceil:155,f64_floor:156,f64_sqrt:159,f64_add:160,f64_sub:161,f64_mul:162,f64_div:163,f64_min:164,f64_max:165,i32_trunc_f64_s:170,i32_trunc_f64_u:171,i64_trunc_s_f64:176,f64_convert_i64_s:185,f64_convert_i32_s:183},m.VAL_TYPE={i32:127,i64:126,f32:125,f64:124},m.MUTABILITY={const:0,var:1},m.BLOCK={void:64,i32:127,i64:126,f32:125,f64:124},m.FUNCTION_TYPE=96,m.MEMORY_IDX=2,m.GLOBAL_TYPE=3,m.TYPE_IDX=0,m.IS_ZEROISH=[m.op.f64_abs,...m.op.f64_const(m.EPSILON),m.op.f64_lt],m.IS_NOT_ZEROISH=[m.op.f64_abs,...m.op.f64_const(m.EPSILON),m.op.f64_gt];function t(a){const h=new Uint8Array(8);return u.write(h,a),h}m.encodef64=t,m.encodeString=a=>[a.length].concat(a.split("").map(h=>h.charCodeAt(0)));function e(a){const h=[];do{let l=a&127;a>>>=7,a!==0&&(l|=128),h.push(l)}while(a!==0);return h}m.unsignedLEB128=e;function s(a){let h=[],l=0,r=Math.ceil(Math.log2(Math.abs(a))),f=a<0,v=!0;for(;v;)l=a&127,a=a>>7,f&&(a=a|-(1<<r-7)),a==0&&!(l&64)||a==-1&&(l&64)==64?v=!1:l=l|128,h.push(l);return h}m.signedLEB128=s,m.encodeFlatVector=a=>e(a.length).concat(a),m.encodeNestedVector=a=>e(a.length).concat(A.flatten(a));function i(a,h){if(h.length===0)return[];const l=m.encodeFlatVector(m.encodeNestedVector(h));return l.unshift(a),l}m.encodeSection=i},"./node_modules/eel-wasm/dist/src/envParser.js":function(N,m,g){let n=g("./node_modules/eel-wasm/dist/build/parser.js");N.exports={parse:n.parse}},"./node_modules/eel-wasm/dist/src/errorUtils.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});const n=g("./node_modules/eel-wasm/dist/src/utils.js");function u(i,a,h=1){const l=Math.max(i.first_line-1-h,0),r=i.last_line+h,v=a.split(`
`).slice(l,r).map((c,d)=>{const o=d+l+1;return`${o>=i.first_line&&o<=i.last_line?">":" "} ${o} | ${c}`});if(i.first_line===i.last_line){const c=n.repeat(i.first_column," "),d=n.repeat(i.last_column-i.first_column,"^"),o=i.first_line-l;v.splice(o,0,`    | ${c}${d}`)}return v.join(`
`)}m.printLoc=u;class A extends Error{constructor(a,h,l){super(a),this.sourceContext=u(h,l),this.loc=h}}class t extends A{}function e(i,a,h){return new t(i,a,h)}m.createUserError=e;function s(i,a,h){return new A(i,a,h)}m.createCompilerError=s},"./node_modules/eel-wasm/dist/src/ieee754.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});function n(u,A){let e=52;const s=8;var i,a,h,l=s*8-e-1,r=(1<<l)-1,f=r>>1,v=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=0,d=1,o=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(a=isNaN(A)?1:0,i=r):(i=Math.floor(Math.log(A)/Math.LN2),A*(h=Math.pow(2,-i))<1&&(i--,h*=2),i+f>=1?A+=v/h:A+=v*Math.pow(2,1-f),A*h>=2&&(i++,h/=2),i+f>=r?(a=0,i=r):i+f>=1?(a=(A*h-1)*Math.pow(2,e),i=i+f):(a=A*Math.pow(2,f-1)*Math.pow(2,e),i=0));e>=8;u[0+c]=a&255,c+=d,a/=256,e-=8);for(i=i<<e|a,l+=e;l>0;u[0+c]=i&255,c+=d,i/=256,l-=8);u[0+c-d]|=o*128}m.write=n},"./node_modules/eel-wasm/dist/src/index.js":function(N,m,g){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(m,"__esModule",{value:!0});const u=g("./node_modules/eel-wasm/dist/src/parser.js");m.parse=u.parse;const A=g("./node_modules/eel-wasm/dist/src/compiler.js");m.compileModule=A.compileModule;const t=n(g("./node_modules/eel-wasm/dist/src/shims.js"));m.shims=t.default;const e=g("./node_modules/eel-wasm/dist/src/loader.js");m.loadModule=e.loadModule},"./node_modules/eel-wasm/dist/src/loader.js":function(N,m,g){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m,"__esModule",{value:!0});const u=n(g("./node_modules/eel-wasm/dist/src/shims.js")),A=g("./node_modules/eel-wasm/dist/src/compiler.js");async function t({pools:e,functions:s,eelVersion:i=2}){let a={};Object.entries(e).forEach(([f,v])=>{a[f]=new Set(Object.keys(v))});const h=A.compileModule({pools:a,functions:s,eelVersion:i}),l=await WebAssembly.compile(h);var r=Object.assign(Object.assign({},e),{shims:u.default});return await WebAssembly.instantiate(l,r)}m.loadModule=t},"./node_modules/eel-wasm/dist/src/parser.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});const n=g("./node_modules/eel-wasm/dist/src/preProcessor.js"),u=g("./node_modules/eel-wasm/dist/src/envParser.js"),A=g("./node_modules/eel-wasm/dist/src/astUtils.js"),t=g("./node_modules/eel-wasm/dist/src/errorUtils.js");function e(i,a){const h=n.getLoc(a,i.first_column),l=n.getLoc(a,i.last_column);return{first_column:h.column,last_column:l.column,first_line:h.line,last_line:l.line}}function s(i){const[a,h]=n.preProcess(i);try{const l=u.parse(a);return A.mapAst(l,r=>{if(r.loc.first_line!==1||r.loc.last_line!=1)throw t.createCompilerError("Unexpected multiline",r.loc,i);return Object.assign(Object.assign({},r),{loc:e(r.loc,h)})})}catch(l){throw l.hash==null?l:t.createUserError(`Parse Error: ${l.message.split(`
`)[3]}`,e(l.hash.loc,h),i)}}m.parse=s},"./node_modules/eel-wasm/dist/src/preProcessor.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});function n(A,t){let e={destCol:1,srcCol:1,srcLine:1};A.forEach(i=>{i.destCol>t||(e=i)});const s=t-e.destCol;return{column:e.srcCol+s,line:e.srcLine}}m.getLoc=n;function u(A){const t=[];let e=1,s="",i=0,a=!1,h=!1,l=!1;for(let r=0;r<A.length;r++){const f=A[r];if(l){const v=s.length+1,c=r-i+1;t.push({destCol:v,srcCol:c,srcLine:e}),l=!1}f===`
`?(a=!1,e++,i=r+1,l=!0):f==="\r"&&A[r+1]===`
`?(r++,a=!1,e++,i=r+1,l=!0):h&&f==="*"&&A[r+1]==="/"?(h=!1,r++,l=!0):f==="\\"&&A[r+1]==="\\"||f==="/"&&A[r+1]==="/"?(a=!0,r++):f==="/"&&A[r+1]==="*"?(h=!0,r++):!a&&!h&&(s+=f)}return[s,t]}m.preProcess=u},"./node_modules/eel-wasm/dist/src/shims.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});const n=1e-5,u={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,atan2:Math.atan2,rand:A=>Math.random()*A,pow:Math.pow,log:Math.log,log10:Math.log10,exp:Math.exp,sigmoid:function(A,t){const e=1+Math.exp(-A*t);return Math.abs(e)>n?1/e:0}};m.default=u},"./node_modules/eel-wasm/dist/src/utils.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});function n(i,a){const h=[];for(let l=0;l<i.length;l++)h.push(i[l]),l===i.length-1||h.push(a);return h}m.arrayJoin=n;function u(i){return[].concat.apply([],i)}m.flatten=u;function A(i,a){return new Array(i).fill(null).map((h,l)=>a(l))}m.times=A;function t(i,a){return new Array(i).fill(a).join("")}m.repeat=t;class e{constructor(){this._map=new Map}get(a,h){const l=a==null?h:`${a}::${h}`;return this._map.has(l)||this._map.set(l,this._map.size),this._map.get(l)}size(){return this._map.size}}m.ScopedIdMap=e;function s(i){if(i.length===0)throw new Error("Cannot format an empty list");if(i.length===1)return i[0];const a=i.map(l=>`"${l}"`),h=a.pop();return a.join(", ")+` and ${h}`}m.formatList=s},"./node_modules/eel-wasm/dist/src/wasmFunctions.js":function(N,m,g){Object.defineProperty(m,"__esModule",{value:!0});const n=g("./node_modules/eel-wasm/dist/src/encoding.js"),u=g("./node_modules/eel-wasm/dist/src/constants.js");m.localFuncMap={sqr:{args:[n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],binary:[...n.op.local_get(0),...n.op.local_get(0),n.op.f64_mul]},bor:{args:[n.VAL_TYPE.f64,n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],binary:[...n.op.local_get(0),...n.IS_NOT_ZEROISH,...n.op.local_get(1),...n.IS_NOT_ZEROISH,n.op.i32_or,...n.op.i32_const(0),n.op.i32_ne,n.op.f64_convert_i32_s]},band:{args:[n.VAL_TYPE.f64,n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],binary:[...n.op.local_get(0),...n.IS_NOT_ZEROISH,...n.op.local_get(1),...n.IS_NOT_ZEROISH,n.op.i32_and,...n.op.i32_const(0),n.op.i32_ne,n.op.f64_convert_i32_s]},sign:{args:[n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],binary:[...n.op.f64_const(0),...n.op.local_get(0),n.op.f64_lt,...n.op.local_get(0),...n.op.f64_const(0),n.op.f64_lt,n.op.i32_sub,n.op.f64_convert_i32_s]},mod:{args:[n.VAL_TYPE.f64,n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],localVariables:[n.VAL_TYPE.i32],binary:[...n.op.local_get(1),n.op.i32_trunc_f64_s,...n.op.local_tee(2),...n.op.i32_const(0),n.op.i32_ne,...n.op.if(n.BLOCK.f64),...n.op.local_get(0),n.op.i32_trunc_f64_s,...n.op.local_get(2),n.op.i32_rem_s,n.op.f64_convert_i32_s,n.op.else,...n.op.f64_const(0),n.op.end]},bitwiseOr:{args:[n.VAL_TYPE.f64,n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],binary:[...n.op.local_get(0),n.op.i64_trunc_s_f64,...n.op.local_get(1),n.op.i64_trunc_s_f64,n.op.i64_or,n.op.f64_convert_i64_s]},bitwiseAnd:{args:[n.VAL_TYPE.f64,n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],binary:[...n.op.local_get(0),n.op.i64_trunc_s_f64,...n.op.local_get(1),n.op.i64_trunc_s_f64,n.op.i64_and,n.op.f64_convert_i64_s]},div:{args:[n.VAL_TYPE.f64,n.VAL_TYPE.f64],returns:[n.VAL_TYPE.f64],localVariables:[n.VAL_TYPE.i32],binary:[...n.op.local_get(1),...n.op.f64_const(0),n.op.f64_ne,...n.op.if(n.BLOCK.f64),...n.op.local_get(0),...n.op.local_get(1),n.op.f64_div,n.op.else,...n.op.f64_const(0),n.op.end]},_getBufferIndex:{args:[n.VAL_TYPE.f64],returns:[n.VAL_TYPE.i32],localVariables:[n.VAL_TYPE.f64,n.VAL_TYPE.i32],binary:[...n.op.f64_const(n.EPSILON),...n.op.local_get(0),n.op.f64_add,...n.op.local_tee(1),n.op.i32_trunc_f64_s,...n.op.local_set(2),...n.op.i32_const(-1),...n.op.local_get(2),...n.op.i32_const(8),n.op.i32_mul,...n.op.local_get(2),...n.op.i32_const(0),n.op.i32_lt_s,...n.op.local_get(2),...n.op.i32_const(u.BUFFER_SIZE-1),n.op.i32_gt_s,n.op.i32_or,n.op.select]}}},"./node_modules/process/browser.js":function(N,m){var g=N.exports={},n,u;function A(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=A}catch{n=A}try{typeof clearTimeout=="function"?u=clearTimeout:u=t}catch{u=t}})();function e(d){if(n===setTimeout)return setTimeout(d,0);if((n===A||!n)&&setTimeout)return n=setTimeout,setTimeout(d,0);try{return n(d,0)}catch{try{return n.call(null,d,0)}catch{return n.call(this,d,0)}}}function s(d){if(u===clearTimeout)return clearTimeout(d);if((u===t||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(d);try{return u(d)}catch{try{return u.call(null,d)}catch{return u.call(this,d)}}}var i=[],a=!1,h,l=-1;function r(){!a||!h||(a=!1,h.length?i=h.concat(i):l=-1,i.length&&f())}function f(){if(!a){var d=e(r);a=!0;for(var o=i.length;o;){for(h=i,i=[];++l<o;)h&&h[l].run();l=-1,o=i.length}h=null,a=!1,s(d)}}g.nextTick=function(d){var o=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)o[E-1]=arguments[E];i.push(new v(d,o)),i.length===1&&!a&&e(f)};function v(d,o){this.fun=d,this.array=o}v.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={};function c(){}g.on=c,g.addListener=c,g.once=c,g.off=c,g.removeListener=c,g.removeAllListeners=c,g.emit=c,g.prependListener=c,g.prependOnceListener=c,g.listeners=function(d){return[]},g.binding=function(d){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(d){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},"./node_modules/webpack/buildin/module.js":function(N,m){N.exports=function(g){return g.webpackPolyfill||(g.deprecate=function(){},g.paths=[],g.children||(g.children=[]),Object.defineProperty(g,"loaded",{enumerable:!0,get:function(){return g.l}}),Object.defineProperty(g,"id",{enumerable:!0,get:function(){return g.i}}),g.webpackPolyfill=1),g}},"./src/assemblyscript/presetFunctions.ts":function(N,m){var g="AGFzbQEAAAABPQpgAABgAXwBfGACfHwBfGACf38AYAR/f39/AGAJf39/f3x8fHx8AGADf399AGABfwF/YAJ/fwF/YAF+AX8CuBWMAQNlbnYFYWJvcnQABAhwaXhlbEVxcwtwZXJQaXhlbEVxcwAADHBpeGVsVmFyUG9vbAR3YXJwA3wBDHBpeGVsVmFyUG9vbAR6b29tA3wBDHBpeGVsVmFyUG9vbAd6b29tZXhwA3wBDHBpeGVsVmFyUG9vbAJjeAN8AQxwaXhlbFZhclBvb2wCY3kDfAEMcGl4ZWxWYXJQb29sAnN4A3wBDHBpeGVsVmFyUG9vbAJzeQN8AQxwaXhlbFZhclBvb2wCZHgDfAEMcGl4ZWxWYXJQb29sAmR5A3wBDHBpeGVsVmFyUG9vbANyb3QDfAEMcGl4ZWxWYXJQb29sA3JhZAN8AQxwaXhlbFZhclBvb2wDYW5nA3wBDHBpeGVsVmFyUG9vbAF4A3wBDHBpeGVsVmFyUG9vbAF5A3wBCHFWYXJQb29sAnExA3wBCHFWYXJQb29sAnEyA3wBCHFWYXJQb29sAnEzA3wBCHFWYXJQb29sAnE0A3wBCHFWYXJQb29sAnE1A3wBCHFWYXJQb29sAnE2A3wBCHFWYXJQb29sAnE3A3wBCHFWYXJQb29sAnE4A3wBCHFWYXJQb29sAnE5A3wBCHFWYXJQb29sA3ExMAN8AQhxVmFyUG9vbANxMTEDfAEIcVZhclBvb2wDcTEyA3wBCHFWYXJQb29sA3ExMwN8AQhxVmFyUG9vbANxMTQDfAEIcVZhclBvb2wDcTE1A3wBCHFWYXJQb29sA3ExNgN8AQhxVmFyUG9vbANxMTcDfAEIcVZhclBvb2wDcTE4A3wBCHFWYXJQb29sA3ExOQN8AQhxVmFyUG9vbANxMjADfAEIcVZhclBvb2wDcTIxA3wBCHFWYXJQb29sA3EyMgN8AQhxVmFyUG9vbANxMjMDfAEIcVZhclBvb2wDcTI0A3wBCHFWYXJQb29sA3EyNQN8AQhxVmFyUG9vbANxMjYDfAEIcVZhclBvb2wDcTI3A3wBCHFWYXJQb29sA3EyOAN8AQhxVmFyUG9vbANxMjkDfAEIcVZhclBvb2wDcTMwA3wBCHFWYXJQb29sA3EzMQN8AQhxVmFyUG9vbANxMzIDfAEIdFZhclBvb2wCdDEDfAEIdFZhclBvb2wCdDIDfAEIdFZhclBvb2wCdDMDfAEIdFZhclBvb2wCdDQDfAEIdFZhclBvb2wCdDUDfAEIdFZhclBvb2wCdDYDfAEIdFZhclBvb2wCdDcDfAEIdFZhclBvb2wCdDgDfAEKc2hhcGVQb29sMAN4XzADfAEKc2hhcGVQb29sMAN5XzADfAEKc2hhcGVQb29sMAVyYWRfMAN8AQpzaGFwZVBvb2wwBWFuZ18wA3wBCnNoYXBlUG9vbDADcl8wA3wBCnNoYXBlUG9vbDADZ18wA3wBCnNoYXBlUG9vbDADYl8wA3wBCnNoYXBlUG9vbDADYV8wA3wBCnNoYXBlUG9vbDAEcjJfMAN8AQpzaGFwZVBvb2wwBGcyXzADfAEKc2hhcGVQb29sMARiMl8wA3wBCnNoYXBlUG9vbDAEYTJfMAN8AQpzaGFwZVBvb2wwCmJvcmRlcl9yXzADfAEKc2hhcGVQb29sMApib3JkZXJfZ18wA3wBCnNoYXBlUG9vbDAKYm9yZGVyX2JfMAN8AQpzaGFwZVBvb2wwCmJvcmRlcl9hXzADfAEKc2hhcGVQb29sMA50aGlja291dGxpbmVfMAN8AQpzaGFwZVBvb2wwCnRleHR1cmVkXzADfAEKc2hhcGVQb29sMAp0ZXhfem9vbV8wA3wBCnNoYXBlUG9vbDAJdGV4X2FuZ18wA3wBCnNoYXBlUG9vbDAKYWRkaXRpdmVfMAN8AQpzaGFwZVBvb2wxA3hfMQN8AQpzaGFwZVBvb2wxA3lfMQN8AQpzaGFwZVBvb2wxBXJhZF8xA3wBCnNoYXBlUG9vbDEFYW5nXzEDfAEKc2hhcGVQb29sMQNyXzEDfAEKc2hhcGVQb29sMQNnXzEDfAEKc2hhcGVQb29sMQNiXzEDfAEKc2hhcGVQb29sMQNhXzEDfAEKc2hhcGVQb29sMQRyMl8xA3wBCnNoYXBlUG9vbDEEZzJfMQN8AQpzaGFwZVBvb2wxBGIyXzEDfAEKc2hhcGVQb29sMQRhMl8xA3wBCnNoYXBlUG9vbDEKYm9yZGVyX3JfMQN8AQpzaGFwZVBvb2wxCmJvcmRlcl9nXzEDfAEKc2hhcGVQb29sMQpib3JkZXJfYl8xA3wBCnNoYXBlUG9vbDEKYm9yZGVyX2FfMQN8AQpzaGFwZVBvb2wxDnRoaWNrb3V0bGluZV8xA3wBCnNoYXBlUG9vbDEKdGV4dHVyZWRfMQN8AQpzaGFwZVBvb2wxCnRleF96b29tXzEDfAEKc2hhcGVQb29sMQl0ZXhfYW5nXzEDfAEKc2hhcGVQb29sMQphZGRpdGl2ZV8xA3wBCnNoYXBlUG9vbDIDeF8yA3wBCnNoYXBlUG9vbDIDeV8yA3wBCnNoYXBlUG9vbDIFcmFkXzIDfAEKc2hhcGVQb29sMgVhbmdfMgN8AQpzaGFwZVBvb2wyA3JfMgN8AQpzaGFwZVBvb2wyA2dfMgN8AQpzaGFwZVBvb2wyA2JfMgN8AQpzaGFwZVBvb2wyA2FfMgN8AQpzaGFwZVBvb2wyBHIyXzIDfAEKc2hhcGVQb29sMgRnMl8yA3wBCnNoYXBlUG9vbDIEYjJfMgN8AQpzaGFwZVBvb2wyBGEyXzIDfAEKc2hhcGVQb29sMgpib3JkZXJfcl8yA3wBCnNoYXBlUG9vbDIKYm9yZGVyX2dfMgN8AQpzaGFwZVBvb2wyCmJvcmRlcl9iXzIDfAEKc2hhcGVQb29sMgpib3JkZXJfYV8yA3wBCnNoYXBlUG9vbDIOdGhpY2tvdXRsaW5lXzIDfAEKc2hhcGVQb29sMgp0ZXh0dXJlZF8yA3wBCnNoYXBlUG9vbDIKdGV4X3pvb21fMgN8AQpzaGFwZVBvb2wyCXRleF9hbmdfMgN8AQpzaGFwZVBvb2wyCmFkZGl0aXZlXzIDfAEKc2hhcGVQb29sMwN4XzMDfAEKc2hhcGVQb29sMwN5XzMDfAEKc2hhcGVQb29sMwVyYWRfMwN8AQpzaGFwZVBvb2wzBWFuZ18zA3wBCnNoYXBlUG9vbDMDcl8zA3wBCnNoYXBlUG9vbDMDZ18zA3wBCnNoYXBlUG9vbDMDYl8zA3wBCnNoYXBlUG9vbDMDYV8zA3wBCnNoYXBlUG9vbDMEcjJfMwN8AQpzaGFwZVBvb2wzBGcyXzMDfAEKc2hhcGVQb29sMwRiMl8zA3wBCnNoYXBlUG9vbDMEYTJfMwN8AQpzaGFwZVBvb2wzCmJvcmRlcl9yXzMDfAEKc2hhcGVQb29sMwpib3JkZXJfZ18zA3wBCnNoYXBlUG9vbDMKYm9yZGVyX2JfMwN8AQpzaGFwZVBvb2wzCmJvcmRlcl9hXzMDfAEKc2hhcGVQb29sMw50aGlja291dGxpbmVfMwN8AQpzaGFwZVBvb2wzCnRleHR1cmVkXzMDfAEKc2hhcGVQb29sMwp0ZXhfem9vbV8zA3wBCnNoYXBlUG9vbDMJdGV4X2FuZ18zA3wBCnNoYXBlUG9vbDMKYWRkaXRpdmVfMwN8AQMZGAgDBwkBAQICAQYFAAAAAAAAAAAAAAAAAAUDAQABBuwMigF8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt/AUEAC3wBRAAAAAAAAAAAC3wBRAAAAAAAAAAAC34BQgALB9kB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";N.exports=()=>g},"./src/audio/audioLevels.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{constructor(A){this.audio=A;let t;this.audio.audioContext?t=this.audio.audioContext.sampleRate:t=44100;const e=t/this.audio.fftSize,s=Math.clamp(Math.round(20/e)-1,0,this.audio.numSamps-1),i=Math.clamp(Math.round(320/e)-1,0,this.audio.numSamps-1),a=Math.clamp(Math.round(2800/e)-1,0,this.audio.numSamps-1),h=Math.clamp(Math.round(11025/e)-1,0,this.audio.numSamps-1);this.starts=[s,i,a],this.stops=[i,a,h],this.val=new Float32Array(3),this.imm=new Float32Array(3),this.att=new Float32Array(3),this.avg=new Float32Array(3),this.longAvg=new Float32Array(3),this.att.fill(1),this.avg.fill(1),this.longAvg.fill(1)}get bass(){return this.val[0]}get bass_att(){return this.att[0]}get mid(){return this.val[1]}get mid_att(){return this.att[1]}get treb(){return this.val[2]}get treb_att(){return this.att[2]}static isFiniteNumber(A){return Number.isFinite(A)&&!Number.isNaN(A)}static adjustRateToFPS(A,t,e){return A**(t/e)}updateAudioLevels(A,t){if(this.audio.freqArray.length>0){let e=A;!n.isFiniteNumber(e)||e<15?e=15:e>144&&(e=144),this.imm.fill(0);for(let s=0;s<3;s++)for(let i=this.starts[s];i<this.stops[s];i++)this.imm[s]+=this.audio.freqArray[i];for(let s=0;s<3;s++){let i;this.imm[s]>this.avg[s]?i=.2:i=.5,i=n.adjustRateToFPS(i,30,e),this.avg[s]=this.avg[s]*i+this.imm[s]*(1-i),t<50?i=.9:i=.992,i=n.adjustRateToFPS(i,30,e),this.longAvg[s]=this.longAvg[s]*i+this.imm[s]*(1-i),this.longAvg[s]<.001?(this.val[s]=1,this.att[s]=1):(this.val[s]=this.imm[s]/this.longAvg[s],this.att[s]=this.avg[s]/this.longAvg[s])}}}}},"./src/audio/audioProcessor.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/audio/fft.js");class u{constructor(t){this.numSamps=512,this.fftSize=this.numSamps*2,this.fft=new n.default(this.fftSize,512,!0),t&&(this.audioContext=t,this.audible=t.createDelay(),this.analyser=t.createAnalyser(),this.analyser.smoothingTimeConstant=0,this.analyser.fftSize=this.fftSize,this.audible.connect(this.analyser),this.analyserL=t.createAnalyser(),this.analyserL.smoothingTimeConstant=0,this.analyserL.fftSize=this.fftSize,this.analyserR=t.createAnalyser(),this.analyserR.smoothingTimeConstant=0,this.analyserR.fftSize=this.fftSize,this.splitter=t.createChannelSplitter(2),this.audible.connect(this.splitter),this.splitter.connect(this.analyserL,0),this.splitter.connect(this.analyserR,1)),this.timeByteArray=new Uint8Array(this.fftSize),this.timeByteArrayL=new Uint8Array(this.fftSize),this.timeByteArrayR=new Uint8Array(this.fftSize),this.timeArray=new Int8Array(this.fftSize),this.timeByteArraySignedL=new Int8Array(this.fftSize),this.timeByteArraySignedR=new Int8Array(this.fftSize),this.tempTimeArrayL=new Int8Array(this.fftSize),this.tempTimeArrayR=new Int8Array(this.fftSize),this.timeArrayL=new Int8Array(this.numSamps),this.timeArrayR=new Int8Array(this.numSamps)}sampleAudio(){this.analyser.getByteTimeDomainData(this.timeByteArray),this.analyserL.getByteTimeDomainData(this.timeByteArrayL),this.analyserR.getByteTimeDomainData(this.timeByteArrayR),this.processAudio()}updateAudio(t,e,s){this.timeByteArray.set(t),this.timeByteArrayL.set(e),this.timeByteArrayR.set(s),this.processAudio()}processAudio(){for(let t=0,e=0,s=0;t<this.fftSize;t++)this.timeArray[t]=this.timeByteArray[t]-128,this.timeByteArraySignedL[t]=this.timeByteArrayL[t]-128,this.timeByteArraySignedR[t]=this.timeByteArrayR[t]-128,this.tempTimeArrayL[t]=.5*(this.timeByteArraySignedL[t]+this.timeByteArraySignedL[s]),this.tempTimeArrayR[t]=.5*(this.timeByteArraySignedR[t]+this.timeByteArraySignedR[s]),t%2===0&&(this.timeArrayL[e]=this.tempTimeArrayL[t],this.timeArrayR[e]=this.tempTimeArrayR[t],e+=1),s=t;this.freqArray=this.fft.timeToFrequencyDomain(this.timeArray),this.freqArrayL=this.fft.timeToFrequencyDomain(this.timeByteArraySignedL),this.freqArrayR=this.fft.timeToFrequencyDomain(this.timeByteArraySignedR)}connectAudio(t){t.connect(this.audible)}disconnectAudio(t){t.disconnect(this.audible)}}},"./src/audio/fft.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{constructor(A,t,e=!1){this.samplesIn=A,this.samplesOut=t,this.equalize=e,this.NFREQ=t*2,this.equalize&&this.initEqualizeTable(),this.initBitRevTable(),this.initCosSinTable()}initEqualizeTable(){this.equalizeArr=new Float32Array(this.samplesOut);const A=1/this.samplesOut;for(let t=0;t<this.samplesOut;t++)this.equalizeArr[t]=-.02*Math.log((this.samplesOut-t)*A)}initBitRevTable(){this.bitrevtable=new Uint16Array(this.NFREQ);for(let t=0;t<this.NFREQ;t++)this.bitrevtable[t]=t;let A=0;for(let t=0;t<this.NFREQ;t++){if(A>t){const s=this.bitrevtable[t];this.bitrevtable[t]=this.bitrevtable[A],this.bitrevtable[A]=s}let e=this.NFREQ>>1;for(;e>=1&&A>=e;)A-=e,e>>=1;A+=e}}initCosSinTable(){let A=2,t=0;for(;A<=this.NFREQ;)t+=1,A<<=1;this.cossintable=[new Float32Array(t),new Float32Array(t)],A=2;let e=0;for(;A<=this.NFREQ;){const s=-2*Math.PI/A;this.cossintable[0][e]=Math.cos(s),this.cossintable[1][e]=Math.sin(s),e+=1,A<<=1}}timeToFrequencyDomain(A){const t=new Float32Array(this.NFREQ),e=new Float32Array(this.NFREQ);for(let h=0;h<this.NFREQ;h++){const l=this.bitrevtable[h];l<this.samplesIn?t[h]=A[l]:t[h]=0,e[h]=0}let s=2,i=0;for(;s<=this.NFREQ;){const h=this.cossintable[0][i],l=this.cossintable[1][i];let r=1,f=0;const v=s>>1;for(let c=0;c<v;c++){for(let o=c;o<this.NFREQ;o+=s){const E=o+v,p=r*t[E]-f*e[E],P=r*e[E]+f*t[E];t[E]=t[o]-p,e[E]=e[o]-P,t[o]+=p,e[o]+=P}const d=r;r=d*h-f*l,f=f*h+d*l}s<<=1,i+=1}const a=new Float32Array(this.samplesOut);if(this.equalize)for(let h=0;h<this.samplesOut;h++)a[h]=this.equalizeArr[h]*Math.sqrt(t[h]*t[h]+e[h]*e[h]);else for(let h=0;h<this.samplesOut;h++)a[h]=Math.sqrt(t[h]*t[h]+e[h]*e[h]);return a}}},"./src/blankPreset.js":function(N,m,g){var n,u;n=[],u=function(){"use strict;";var A={baseVals:{gammaadj:1.25,wave_g:.5,mv_x:12,warpscale:1,brighten:0,mv_y:9,wave_scale:1,echo_alpha:0,additivewave:0,sx:1,sy:1,warp:.01,red_blue:0,wave_mode:0,wave_brighten:0,wrap:0,zoomexp:1,fshader:0,wave_r:.5,echo_zoom:1,wave_smoothing:.75,warpanimspeed:1,wave_dots:0,wave_x:.5,wave_y:.5,zoom:1,solarize:0,modwavealphabyvolume:0,dx:0,cx:.5,dy:0,darken_center:0,cy:.5,invert:0,bmotionvectorson:0,rot:0,modwavealphaend:.95,wave_mystery:-.2,decay:.9,wave_a:1,wave_b:.5,rating:5,modwavealphastart:.75,darken:0,echo_orient:0,ib_r:.5,ib_g:.5,ib_b:.5,ib_a:0,ib_size:0,ob_r:.5,ob_g:.5,ob_b:.5,ob_a:0,ob_size:0,mv_dx:0,mv_dy:0,mv_a:0,mv_r:.5,mv_g:.5,mv_b:.5,mv_l:0},init_eqs:function(){var t={};return t},frame_eqs:function(t){return t.rkeys=["warp"],t.zoom=1.01+.02*t.treb_att,t.warp=.15+.25*t.bass_att,t},pixel_eqs:function(t){return t.warp=t.warp+t.rad*.15,t},waves:[{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""}],shapes:[{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}}],warp:`shader_body {
ret = texture2D(sampler_main, uv).rgb;
ret -= 0.004;
}
`,comp:`shader_body {
ret = texture2D(sampler_main, uv).rgb;
ret *= hue_shader;
}
`};return A}.apply(m,n),u!==void 0&&(N.exports=u)},"./src/equations/presetEquationRunner.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/utils.js");class u{constructor(t,e,s){this.preset=t,this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=n.default.range(1,33).map(i=>`q${i}`),this.ts=n.default.range(1,9).map(i=>`t${i}`),this.regs=n.default.range(100).map(i=>i<10?`reg0${i}`:`reg${i}`),this.initializeEquations(e)}initializeEquations(t){this.runVertEQs=this.preset.pixel_eqs!=="",this.mdVSQInit=null,this.mdVSRegs=null,this.mdVSFrame=null,this.mdVSUserKeys=null,this.mdVSFrameMap=null,this.mdVSShapes=null,this.mdVSUserKeysShapes=null,this.mdVSFrameMapShapes=null,this.mdVSWaves=null,this.mdVSUserKeysWaves=null,this.mdVSFrameMapWaves=null,this.mdVSQAfterFrame=null,this.gmegabuf=new Array(1048576).fill(0);const e={frame:t.frame,time:t.time,fps:t.fps,bass:t.bass,bass_att:t.bass_att,mid:t.mid,mid_att:t.mid_att,treb:t.treb,treb_att:t.treb_att,meshx:this.mesh_width,meshy:this.mesh_height,aspectx:this.invAspectx,aspecty:this.invAspecty,pixelsx:this.texsizeX,pixelsy:this.texsizeY,gmegabuf:this.gmegabuf};this.mdVS=Object.assign({},this.preset.baseVals,e),this.mdVS.megabuf=new Array(1048576).fill(0),this.mdVS.rand_start=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.mdVS.rand_preset=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]);const s=this.qs.concat(this.regs,Object.keys(this.mdVS)),i=this.preset.init_eqs(n.default.cloneVars(this.mdVS));this.mdVSQInit=n.default.pick(i,this.qs),this.mdVSRegs=n.default.pick(i,this.regs);const a=n.default.pick(i,Object.keys(n.default.omit(i,s)));if(a.megabuf=i.megabuf,a.gmegabuf=i.gmegabuf,this.mdVSFrame=this.preset.frame_eqs(Object.assign({},this.mdVS,this.mdVSQInit,this.mdVSRegs,a)),this.mdVSUserKeys=Object.keys(n.default.omit(this.mdVSFrame,s)),this.mdVSFrameMap=n.default.pick(this.mdVSFrame,this.mdVSUserKeys),this.mdVSQAfterFrame=n.default.pick(this.mdVSFrame,this.qs),this.mdVSRegs=n.default.pick(this.mdVSFrame,this.regs),this.mdVSWaves=[],this.mdVSTWaveInits=[],this.mdVSUserKeysWaves=[],this.mdVSFrameMapWaves=[],this.preset.waves&&this.preset.waves.length>0)for(let h=0;h<this.preset.waves.length;h++){const l=this.preset.waves[h],r=l.baseVals;if(r.enabled!==0){let f=Object.assign({},r,e);const v=this.qs.concat(this.ts,this.regs,Object.keys(f));Object.assign(f,this.mdVSQAfterFrame,this.mdVSRegs),f.megabuf=new Array(1048576).fill(0),l.init_eqs&&(f=l.init_eqs(f),this.mdVSRegs=n.default.pick(f,this.regs),Object.assign(f,r)),this.mdVSWaves.push(f),this.mdVSTWaveInits.push(n.default.pick(f,this.ts)),this.mdVSUserKeysWaves.push(Object.keys(n.default.omit(f,v))),this.mdVSFrameMapWaves.push(n.default.pick(f,this.mdVSUserKeysWaves[h]))}else this.mdVSWaves.push({}),this.mdVSTWaveInits.push({}),this.mdVSUserKeysWaves.push([]),this.mdVSFrameMapWaves.push({})}if(this.mdVSShapes=[],this.mdVSTShapeInits=[],this.mdVSUserKeysShapes=[],this.mdVSFrameMapShapes=[],this.preset.shapes&&this.preset.shapes.length>0)for(let h=0;h<this.preset.shapes.length;h++){const l=this.preset.shapes[h],r=l.baseVals;if(r.enabled!==0){let f=Object.assign({},r,e);const v=this.qs.concat(this.ts,this.regs,Object.keys(f));Object.assign(f,this.mdVSQAfterFrame,this.mdVSRegs),f.megabuf=new Array(1048576).fill(0),l.init_eqs&&(f=l.init_eqs(f),this.mdVSRegs=n.default.pick(f,this.regs),Object.assign(f,r)),this.mdVSShapes.push(f),this.mdVSTShapeInits.push(n.default.pick(f,this.ts)),this.mdVSUserKeysShapes.push(Object.keys(n.default.omit(f,v))),this.mdVSFrameMapShapes.push(n.default.pick(f,this.mdVSUserKeysShapes[h]))}else this.mdVSShapes.push({}),this.mdVSTShapeInits.push({}),this.mdVSUserKeysShapes.push([]),this.mdVSFrameMapShapes.push({})}}updatePreset(t,e){this.preset=t,this.initializeEquations(e)}updateGlobals(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}runFrameEquations(t){return this.mdVSFrame=Object.assign({},this.mdVS,this.mdVSQInit,this.mdVSFrameMap,t),this.mdVSFrame=this.preset.frame_eqs(this.mdVSFrame),this.mdVSFrameMap=n.default.pick(this.mdVSFrame,this.mdVSUserKeys),this.mdVSQAfterFrame=n.default.pick(this.mdVSFrame,this.qs),this.mdVSFrame}runPixelEquations(t){return this.preset.pixel_eqs(t)}runShapeFrameEquations(t,e){return this.preset.shapes[t].frame_eqs(e)}runWaveFrameEquations(t,e){return this.preset.waves[t].frame_eqs(e)}runWavePointEquations(t,e){return this.preset.waves[t].point_eqs(e)}}},"./src/equations/presetEquationRunnerWASM.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/utils.js");class u{constructor(t,e,s){this.preset=t,this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=n.default.range(1,33).map(i=>`q${i}`),this.ts=n.default.range(1,9).map(i=>`t${i}`),this.regs=n.default.range(100).map(i=>i<10?`reg0${i}`:`reg${i}`),this.globalKeys=["frame","time","fps","bass","bass_att","mid","mid_att","treb","treb_att","meshx","meshy","aspectx","aspecty","pixelsx","pixelsy"],this.frameKeys=["decay","wave_a","wave_r","wave_g","wave_b","wave_x","wave_y","wave_scale","wave_smoothing","wave_mode","old_wave_mode","wave_mystery","ob_size","ob_r","ob_g","ob_b","ob_a","ib_size","ib_r","ib_g","ib_b","ib_a","mv_x","mv_y","mv_dx","mv_dy","mv_l","mv_r","mv_g","mv_b","mv_a","echo_zoom","echo_alpha","echo_orient","wave_dots","wave_thick","additivewave","wave_brighten","modwavealphabyvolume","modwavealphastart","modwavealphaend","darken_center","gammaadj","warp","warpanimspeed","warpscale","zoom","zoomexp","rot","cx","cy","dx","dy","sx","sy","fshader","wrap","invert","brighten","darken","solarize","bmotionvectorson","b1n","b2n","b3n","b1x","b2x","b3x","b1ed"],this.waveFrameKeys=["samples","sep","scaling","spectrum","smoothing","r","g","b","a"],this.waveFrameInputKeys=["samples","r","g","b","a"],this.initializeEquations(e)}getQVars(t){return n.default.pickWasm(this.preset.globalPools[t],this.qs)}getTVars(t){return n.default.pickWasm(this.preset.globalPools[t],this.ts)}initializeEquations(t){this.runVertEQs=!!this.preset.pixel_eqs,this.mdVSQInit=null,this.mdVSQAfterFrame=null;const e={frame:t.frame,time:t.time,fps:t.fps,bass:t.bass,bass_att:t.bass_att,mid:t.mid,mid_att:t.mid_att,treb:t.treb,treb_att:t.treb_att,meshx:this.mesh_width,meshy:this.mesh_height,aspectx:this.invAspectx,aspecty:this.invAspecty,pixelsx:this.texsizeX,pixelsy:this.texsizeY};if(this.mdVS=Object.assign({},this.preset.baseVals,e),n.default.setWasm(this.preset.globalPools.perFrame,this.mdVS,Object.keys(this.mdVS)),this.rand_start=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.rand_preset=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.preset.init_eqs(),this.mdVSQInit=this.getQVars("perFrame"),this.preset.frame_eqs(),this.mdVSQAfterFrame=this.getQVars("perFrame"),this.mdVSTWaveInits=[],this.preset.waves&&this.preset.waves.length>0)for(let s=0;s<this.preset.waves.length;s++){const i=this.preset.waves[s],a=i.baseVals;a.enabled!==0?(n.default.setWasm(this.preset.globalPools[`wavePerFrame${s}`],a,Object.keys(a)),i.init_eqs&&(i.init_eqs(),n.default.setWasm(this.preset.globalPools[`wavePerFrame${s}`],a,Object.keys(a))),this.mdVSTWaveInits.push(this.getTVars(`wavePerFrame${s}`))):this.mdVSTWaveInits.push({})}if(this.mdVSTShapeInits=[],this.preset.shapes&&this.preset.shapes.length>0)for(let s=0;s<this.preset.shapes.length;s++){const i=this.preset.shapes[s],a=i.baseVals;a.enabled!==0?(n.default.setWasm(this.preset.globalPools[`shapePerFrame${s}`],a,Object.keys(a)),i.init_eqs&&(i.init_eqs(),n.default.setWasm(this.preset.globalPools[`shapePerFrame${s}`],a,Object.keys(a))),this.mdVSTShapeInits.push(this.getTVars(`shapePerFrame${s}`))):this.mdVSTShapeInits.push({})}}updatePreset(t,e){this.preset=t,this.initializeEquations(e)}updateGlobals(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}runFrameEquations(t){n.default.setWasm(this.preset.globalPools.perFrame,this.mdVS,this.frameKeys),n.default.setWasm(this.preset.globalPools.perFrame,this.mdVSQInit,this.qs),n.default.setWasm(this.preset.globalPools.perFrame,t,this.globalKeys),this.preset.frame_eqs(),this.preset.save_qs(),this.mdVSQAfterFrame=this.getQVars("perFrame");const e=n.default.pickWasm(this.preset.globalPools.perFrame,[...this.frameKeys,...this.globalKeys]);return e.rand_preset=this.rand_preset,e.rand_start=this.rand_start,e}runWaveFrameEquations(t,e){const s=this.preset.waves[t].baseVals;return n.default.setWasm(this.preset.globalPools[`wavePerFrame${t}`],s,this.waveFrameInputKeys),n.default.setWasm(this.preset.globalPools[`wavePerFrame${t}`],this.mdVSQAfterFrame,this.qs),n.default.setWasm(this.preset.globalPools[`wavePerFrame${t}`],this.mdVSTWaveInits[t],this.ts),n.default.setWasm(this.preset.globalPools[`wavePerFrame${t}`],e,this.globalKeys),this.preset.waves[t].frame_eqs(),n.default.pickWasm(this.preset.globalPools[`wavePerFrame${t}`],this.waveFrameKeys)}}},"./src/image/imageTextures.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{constructor(A){this.gl=A,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.samplers={},this.clouds2Image=new Image,this.clouds2Image.onload=()=>{this.samplers.clouds2=this.gl.createTexture(),this.bindTexture(this.samplers.clouds2,this.clouds2Image,128,128)},this.clouds2Image.src="data:image/jpeg;base64,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",this.emptyImage=new Image,this.emptyImage.onload=()=>{this.samplers.empty=this.gl.createTexture(),this.bindTexture(this.samplers.empty,this.emptyImage,1,1)},this.emptyImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="}bindTexture(A,t,e,s){if(this.gl.bindTexture(this.gl.TEXTURE_2D,A),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,s,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){const i=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,i)}}loadExtraImages(A){Object.keys(A).forEach(t=>{const{data:e,width:s,height:i}=A[t];if(!this.samplers[t]){const a=new Image;a.onload=()=>{this.samplers[t]=this.gl.createTexture(),this.bindTexture(this.samplers[t],a,s,i)},a.src=e}})}getTexture(A){const t=this.samplers[A];return t||this.samplers.clouds2}}},"./src/index.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u}),g("./node_modules/ecma-proposal-math-extensions/reference-implementation/index.js"),g("./src/presetBase.js");var n=g("./src/visualizer.js");class u{static createVisualizer(t,e,s){return new n.default(t,e,s)}}},"./src/noise/noise.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{constructor(A){this.gl=A,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.noiseTexLQ=this.gl.createTexture(),this.noiseTexLQLite=this.gl.createTexture(),this.noiseTexMQ=this.gl.createTexture(),this.noiseTexHQ=this.gl.createTexture(),this.noiseTexVolLQ=this.gl.createTexture(),this.noiseTexVolHQ=this.gl.createTexture(),this.nTexArrLQ=n.createNoiseTex(256,1),this.nTexArrLQLite=n.createNoiseTex(32,1),this.nTexArrMQ=n.createNoiseTex(256,4),this.nTexArrHQ=n.createNoiseTex(256,8),this.nTexArrVolLQ=n.createNoiseVolTex(32,1),this.nTexArrVolHQ=n.createNoiseVolTex(32,4),this.bindTexture(this.noiseTexLQ,this.nTexArrLQ,256,256),this.bindTexture(this.noiseTexLQLite,this.nTexArrLQLite,32,32),this.bindTexture(this.noiseTexMQ,this.nTexArrMQ,256,256),this.bindTexture(this.noiseTexHQ,this.nTexArrHQ,256,256),this.bindTexture3D(this.noiseTexVolLQ,this.nTexArrVolLQ,32,32,32),this.bindTexture3D(this.noiseTexVolHQ,this.nTexArrVolHQ,32,32,32),this.noiseTexPointLQ=this.gl.createSampler(),A.samplerParameteri(this.noiseTexPointLQ,A.TEXTURE_MIN_FILTER,A.NEAREST_MIPMAP_NEAREST),A.samplerParameteri(this.noiseTexPointLQ,A.TEXTURE_MAG_FILTER,A.NEAREST),A.samplerParameteri(this.noiseTexPointLQ,A.TEXTURE_WRAP_S,A.REPEAT),A.samplerParameteri(this.noiseTexPointLQ,A.TEXTURE_WRAP_T,A.REPEAT)}bindTexture(A,t,e,s){if(this.gl.bindTexture(this.gl.TEXTURE_2D,A),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,s,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){const i=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,i)}}bindTexture3D(A,t,e,s,i){if(this.gl.bindTexture(this.gl.TEXTURE_3D,A),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage3D(this.gl.TEXTURE_3D,0,this.gl.RGBA,e,s,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.generateMipmap(this.gl.TEXTURE_3D),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){const a=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_3D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,a)}}static fCubicInterpolate(A,t,e,s,i){const a=i*i,h=i*a,l=s-e-A+t,r=A-t-l,f=e-A,v=t;return l*h+r*a+f*i+v}static dwCubicInterpolate(A,t,e,s,i){const a=[];for(let h=0;h<4;h++){let l=n.fCubicInterpolate(A[h]/255,t[h]/255,e[h]/255,s[h]/255,i);l=Math.clamp(l,0,1),a[h]=l*255}return a}static createNoiseVolTex(A,t){const e=A*A*A,s=new Uint8Array(e*4),i=t>1?216:256,a=i*.5;for(let r=0;r<e;r++)s[r*4+0]=Math.floor(Math.random()*i+a),s[r*4+1]=Math.floor(Math.random()*i+a),s[r*4+2]=Math.floor(Math.random()*i+a),s[r*4+3]=Math.floor(Math.random()*i+a);const h=A*A,l=A;if(t>1){for(let r=0;r<A;r+=t)for(let f=0;f<A;f+=t)for(let v=0;v<A;v++)if(v%t!==0){const c=Math.floor(v/t)*t+A,d=r*h+f*l,o=[],E=[],p=[],P=[];for(let U=0;U<4;U++)o[U]=s[d*4+(c-t)%A*4+U],E[U]=s[d*4+c%A*4+U],p[U]=s[d*4+(c+t)%A*4+U],P[U]=s[d*4+(c+t*2)%A*4+U];const q=v%t/t,C=n.dwCubicInterpolate(o,E,p,P,q);for(let U=0;U<4;U++){const w=v*4+U;s[r*h*4+f*l*4+w]=C[U]}}for(let r=0;r<A;r+=t)for(let f=0;f<A;f++)for(let v=0;v<A;v++)if(v%t!==0){const c=Math.floor(v/t)*t+A,d=r*h,o=[],E=[],p=[],P=[];for(let U=0;U<4;U++){const w=f*4+d*4+U;o[U]=s[(c-t)%A*l*4+w],E[U]=s[c%A*l*4+w],p[U]=s[(c+t)%A*l*4+w],P[U]=s[(c+t*2)%A*l*4+w]}const q=v%t/t,C=n.dwCubicInterpolate(o,E,p,P,q);for(let U=0;U<4;U++){const w=f*4+d*4+U;s[v*l*4+w]=C[U]}}for(let r=0;r<A;r++)for(let f=0;f<A;f++)for(let v=0;v<A;v++)if(v%t!==0){const c=f*l,d=Math.floor(v/t)*t+A,o=[],E=[],p=[],P=[];for(let U=0;U<4;U++){const w=r*4+c*4+U;o[U]=s[(d-t)%A*h*4+w],E[U]=s[d%A*h*4+w],p[U]=s[(d+t)%A*h*4+w],P[U]=s[(d+t*2)%A*h*4+w]}const q=f%t/t,C=n.dwCubicInterpolate(o,E,p,P,q);for(let U=0;U<4;U++){const w=r*4+c*4+U;s[v*h*4+w]=C[U]}}}return s}static createNoiseTex(A,t){const e=A*A,s=new Uint8Array(e*4),i=t>1?216:256,a=i*.5;for(let h=0;h<e;h++)s[h*4+0]=Math.floor(Math.random()*i+a),s[h*4+1]=Math.floor(Math.random()*i+a),s[h*4+2]=Math.floor(Math.random()*i+a),s[h*4+3]=Math.floor(Math.random()*i+a);if(t>1){for(let h=0;h<A;h+=t)for(let l=0;l<A;l++)if(l%t!==0){const r=Math.floor(l/t)*t+A,f=h*A,v=[],c=[],d=[],o=[];for(let P=0;P<4;P++)v[P]=s[f*4+(r-t)%A*4+P],c[P]=s[f*4+r%A*4+P],d[P]=s[f*4+(r+t)%A*4+P],o[P]=s[f*4+(r+t*2)%A*4+P];const E=l%t/t,p=n.dwCubicInterpolate(v,c,d,o,E);for(let P=0;P<4;P++)s[h*A*4+l*4+P]=p[P]}for(let h=0;h<A;h++)for(let l=0;l<A;l++)if(l%t!==0){const r=Math.floor(l/t)*t+A,f=[],v=[],c=[],d=[];for(let p=0;p<4;p++)f[p]=s[(r-t)%A*A*4+h*4+p],v[p]=s[r%A*A*4+h*4+p],c[p]=s[(r+t)%A*A*4+h*4+p],d[p]=s[(r+t*2)%A*A*4+h*4+p];const o=l%t/t,E=n.dwCubicInterpolate(f,v,c,d,o);for(let p=0;p<4;p++)s[l*A*4+h*4+p]=E[p]}}return s}}},"./src/presetBase.js":function(N,m){var g=1e-5;window.sqr=function(A){return A*A},window.sqrt=function(A){return Math.sqrt(Math.abs(A))},window.log10=function(A){return Math.log(A)*Math.LOG10E},window.sign=function(A){return A>0?1:A<0?-1:0},window.rand=function(A){var t=Math.floor(A);return t<1?Math.random():Math.random()*t},window.randint=function(A){return Math.floor(rand(A))},window.bnot=function(A){return Math.abs(A)<g?1:0};function n(u){return isFinite(u)&&!isNaN(u)}window.pow=function(A,t){var e=Math.pow(A,t);return n(e)?e:0},window.div=function(A,t){return t===0?0:A/t},window.mod=function(A,t){if(t===0)return 0;var e=Math.floor(A)%Math.floor(t);return e},window.bitor=function(A,t){var e=Math.floor(A)|Math.floor(t);return e},window.bitand=function(A,t){var e=Math.floor(A)&Math.floor(t);return e},window.sigmoid=function(A,t){var e=1+Math.exp(-A*t);return Math.abs(e)>g?1/e:0},window.bor=function(A,t){return Math.abs(A)>g||Math.abs(t)>g?1:0},window.band=function(A,t){return Math.abs(A)>g&&Math.abs(t)>g?1:0},window.equal=function(A,t){return Math.abs(A-t)<g?1:0},window.above=function(A,t){return A>t?1:0},window.below=function(A,t){return A<t?1:0},window.ifcond=function(A,t,e){return Math.abs(A)>g?t:e},window.memcpy=function(A,t,e,s){let i=t,a=e,h=s;return a<0&&(h+=a,i-=a,a=0),i<0&&(h+=i,a-=i,i=0),h>0&&A.copyWithin(i,a,h),t}},"./src/rendering/blendPattern.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{constructor(A){this.mesh_width=A.mesh_width,this.mesh_height=A.mesh_height,this.aspectx=A.aspectx,this.aspecty=A.aspecty,this.vertInfoA=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)),this.vertInfoC=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)),this.createBlendPattern()}static resizeMatrixValues(A,t,e,s,i){const a=new Float32Array((s+1)*(i+1));let h=0;for(let l=0;l<i+1;l++)for(let r=0;r<s+1;r++){let f=r/i,v=l/s;f*=t+1,v*=e+1,f=Math.clamp(f,0,t-1),v=Math.clamp(v,0,e-1);const c=Math.floor(f),d=Math.floor(v),o=f-c,E=v-d,p=A[d*(t+1)+c],P=A[d*(t+1)+(c+1)],q=A[(d+1)*(t+1)+c],C=A[(d+1)*(t+1)+(c+1)];a[h]=p*(1-o)*(1-E)+P*o*(1-E)+q*(1-o)*E+C*o*E,h+=1}return a}updateGlobals(A){const t=this.mesh_width,e=this.mesh_height;this.mesh_width=A.mesh_width,this.mesh_height=A.mesh_height,this.aspectx=A.aspectx,this.aspecty=A.aspecty,(this.mesh_width!==t||this.mesh_height!==e)&&(this.vertInfoA=n.resizeMatrixValues(this.vertInfoA,t,e,this.mesh_width,this.mesh_height),this.vertInfoC=n.resizeMatrixValues(this.vertInfoC,t,e,this.mesh_width,this.mesh_height))}genPlasma(A,t,e,s,i){const a=Math.floor((A+t)/2),h=Math.floor((e+s)/2);let l=this.vertInfoC[e*(this.mesh_width+1)+A],r=this.vertInfoC[e*(this.mesh_width+1)+t],f=this.vertInfoC[s*(this.mesh_width+1)+A],v=this.vertInfoC[s*(this.mesh_width+1)+t];s-e>=2&&(A===0&&(this.vertInfoC[h*(this.mesh_width+1)+A]=.5*(l+f)+(Math.random()*2-1)*i*this.aspecty),this.vertInfoC[h*(this.mesh_width+1)+t]=.5*(r+v)+(Math.random()*2-1)*i*this.aspecty),t-A>=2&&(e===0&&(this.vertInfoC[e*(this.mesh_width+1)+a]=.5*(l+r)+(Math.random()*2-1)*i*this.aspectx),this.vertInfoC[s*(this.mesh_width+1)+a]=.5*(f+v)+(Math.random()*2-1)*i*this.aspectx),s-e>=2&&t-A>=2&&(l=this.vertInfoC[h*(this.mesh_width+1)+A],r=this.vertInfoC[h*(this.mesh_width+1)+t],f=this.vertInfoC[e*(this.mesh_width+1)+a],v=this.vertInfoC[s*(this.mesh_width+1)+a],this.vertInfoC[h*(this.mesh_width+1)+a]=.25*(f+v+l+r)+(Math.random()*2-1)*i,this.genPlasma(A,a,e,h,i*.5),this.genPlasma(a,t,e,h,i*.5),this.genPlasma(A,a,h,s,i*.5),this.genPlasma(a,t,h,s,i*.5))}createBlendPattern(){const A=1+Math.floor(Math.random()*3);if(A===0){let t=0;for(let e=0;e<=this.mesh_height;e++)for(let s=0;s<=this.mesh_width;s++)this.vertInfoA[t]=1,this.vertInfoC[t]=0,t+=1}else if(A===1){const t=Math.random()*6.28,e=Math.cos(t),s=Math.sin(t),i=.1+.2*Math.random(),a=1/i;let h=0;for(let l=0;l<=this.mesh_height;l++){const r=l/this.mesh_height*this.aspecty;for(let f=0;f<=this.mesh_width;f++){let c=(f/this.mesh_width*this.aspectx-.5)*e+(r-.5)*s+.5;c=(c-.5)/Math.sqrt(2)+.5,this.vertInfoA[h]=a*(1+i),this.vertInfoC[h]=-a+a*c,h+=1}}}else if(A===2){const t=.12+.13*Math.random(),e=1/t;this.vertInfoC[0]=Math.random(),this.vertInfoC[this.mesh_width]=Math.random(),this.vertInfoC[this.mesh_height*(this.mesh_width+1)]=Math.random(),this.vertInfoC[this.mesh_height*(this.mesh_width+1)+this.mesh_width]=Math.random(),this.genPlasma(0,this.mesh_width,0,this.mesh_height,.25);let s=this.vertInfoC[0],i=this.vertInfoC[0],a=0;for(let l=0;l<=this.mesh_height;l++)for(let r=0;r<=this.mesh_width;r++)s>this.vertInfoC[a]&&(s=this.vertInfoC[a]),i<this.vertInfoC[a]&&(i=this.vertInfoC[a]),a+=1;const h=1/(i-s);a=0;for(let l=0;l<=this.mesh_height;l++)for(let r=0;r<=this.mesh_width;r++){const f=(this.vertInfoC[a]-s)*h;this.vertInfoA[a]=e*(1+t),this.vertInfoC[a]=-e+e*f,a+=1}}else if(A===3){const t=.02+.14*Math.random()+.34*Math.random(),e=1/t,s=Math.floor(Math.random()*2)*2-1;let i=0;for(let a=0;a<=this.mesh_height;a++){const h=(a/this.mesh_height-.5)*this.aspecty;for(let l=0;l<=this.mesh_width;l++){const r=(l/this.mesh_width-.5)*this.aspectx;let f=Math.sqrt(r*r+h*h)*1.41421;s===-1&&(f=1-f),this.vertInfoA[i]=e*(1+t),this.vertInfoC[i]=-e+e*f,i+=1}}}}}},"./src/rendering/motionVectors/motionVectors.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e){this.gl=t,this.maxX=64,this.maxY=48,this.positions=new Float32Array(this.maxX*this.maxY*2*3),this.texsizeX=e.texsizeX,this.texsizeY=e.texsizeY,this.mesh_width=e.mesh_width,this.mesh_height=e.mesh_height,this.positionVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}updateGlobals(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`
      #version 300 es
      in vec3 aPos;
      void main(void) {
        gl_Position = vec4(aPos, 1.0);
      }
      `.trim()),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      out vec4 fragColor;
      uniform vec4 u_color;
      void main(void) {
        fragColor = u_color;
      }
      `.trim()),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color")}getMotionDir(t,e,s){const i=Math.floor(s*this.mesh_height),a=s*this.mesh_height-i,h=Math.floor(e*this.mesh_width),l=e*this.mesh_width-h,r=h+1,f=i+1,v=this.mesh_width+1;let c,d;return c=t[(i*v+h)*2+0]*(1-l)*(1-a),d=t[(i*v+h)*2+1]*(1-l)*(1-a),c+=t[(i*v+r)*2+0]*l*(1-a),d+=t[(i*v+r)*2+1]*l*(1-a),c+=t[(f*v+h)*2+0]*(1-l)*a,d+=t[(f*v+h)*2+1]*(1-l)*a,c+=t[(f*v+r)*2+0]*l*a,d+=t[(f*v+r)*2+1]*l*a,[c,1-d]}generateMotionVectors(t,e){const i=t.bmotionvectorson===0?0:t.mv_a;let a=Math.floor(t.mv_x),h=Math.floor(t.mv_y);if(i>.001&&a>0&&h>0){let l=t.mv_x-a,r=t.mv_y-h;a>this.maxX&&(a=this.maxX,l=0),h>this.maxY&&(h=this.maxY,r=0);const f=t.mv_dx,v=t.mv_dy,c=t.mv_l,d=1/this.texsizeX;this.numVecVerts=0;for(let o=0;o<h;o++){let E=(o+.25)/(h+r+.25-1);if(E-=v,E>1e-4&&E<.9999)for(let p=0;p<a;p++){let P=(p+.25)/(a+l+.25-1);if(P+=f,P>1e-4&&P<.9999){const q=this.getMotionDir(e,P,E);let C=q[0],U=q[1],w=C-P,b=U-E;w*=c,b*=c;let _=Math.sqrt(w*w+b*b);_<d&&_>1e-8?(_=d/_,w*=_,b*=_):(w=d,w=d),C=P+w,U=E+b;const T=2*P-1,x=2*E-1,I=2*C-1,M=2*U-1;this.positions[this.numVecVerts*3+0]=T,this.positions[this.numVecVerts*3+1]=x,this.positions[this.numVecVerts*3+2]=0,this.positions[(this.numVecVerts+1)*3+0]=I,this.positions[(this.numVecVerts+1)*3+1]=M,this.positions[(this.numVecVerts+1)*3+2]=0,this.numVecVerts+=2}}}if(this.numVecVerts>0)return this.color=[t.mv_r,t.mv_g,t.mv_b,i],!0}return!1}drawMotionVectors(t,e){this.generateMotionVectors(t,e)&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,this.color),this.gl.lineWidth(1),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.LINES,0,this.numVecVerts))}}},"./src/rendering/renderer.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return U});var n=g("./src/audio/audioLevels.js"),u=g("./src/blankPreset.js"),A=g.n(u),t=g("./src/equations/presetEquationRunner.js"),e=g("./src/equations/presetEquationRunnerWASM.js"),s=g("./src/rendering/waves/basicWaveform.js"),i=g("./src/rendering/waves/customWaveform.js"),a=g("./src/rendering/shapes/customShape.js"),h=g("./src/rendering/sprites/border.js"),l=g("./src/rendering/sprites/darkenCenter.js"),r=g("./src/rendering/motionVectors/motionVectors.js"),f=g("./src/rendering/shaders/warp.js"),v=g("./src/rendering/shaders/comp.js"),c=g("./src/rendering/shaders/output.js"),d=g("./src/rendering/shaders/resample.js"),o=g("./src/rendering/shaders/blur/blur.js"),E=g("./src/noise/noise.js"),p=g("./src/image/imageTextures.js"),P=g("./src/rendering/text/titleText.js"),q=g("./src/rendering/blendPattern.js"),C=g("./src/utils.js");class U{constructor(b,_,T){this.gl=b,this.audio=_,this.frameNum=0,this.fps=30,this.time=0,this.presetTime=0,this.lastTime=performance.now(),this.timeHist=[0],this.timeHistMax=120,this.blending=!1,this.blendStartTime=0,this.blendProgress=0,this.blendDuration=0,this.width=T.width||1200,this.height=T.height||900,this.mesh_width=T.meshWidth||48,this.mesh_height=T.meshHeight||36,this.pixelRatio=T.pixelRatio||window.devicePixelRatio||1,this.textureRatio=T.textureRatio||1,this.outputFXAA=T.outputFXAA||!1,this.texsizeX=this.width*this.pixelRatio*this.textureRatio,this.texsizeY=this.height*this.pixelRatio*this.textureRatio,this.aspectx=this.texsizeY>this.texsizeX?this.texsizeX/this.texsizeY:1,this.aspecty=this.texsizeX>this.texsizeY?this.texsizeY/this.texsizeX:1,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=C.default.range(1,33).map(M=>`q${M}`),this.ts=C.default.range(1,9).map(M=>`t${M}`),this.regs=C.default.range(0,100).map(M=>M<10?`reg0${M}`:`reg${M}`),this.blurRatios=[[.5,.25],[.125,.125],[.0625,.0625]],this.audioLevels=new n.default(this.audio),this.prevFrameBuffer=this.gl.createFramebuffer(),this.targetFrameBuffer=this.gl.createFramebuffer(),this.prevTexture=this.gl.createTexture(),this.targetTexture=this.gl.createTexture(),this.compFrameBuffer=this.gl.createFramebuffer(),this.compTexture=this.gl.createTexture(),this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.bindFrameBufferTexture(this.prevFrameBuffer,this.prevTexture),this.bindFrameBufferTexture(this.targetFrameBuffer,this.targetTexture),this.bindFrameBufferTexture(this.compFrameBuffer,this.compTexture);const x={pixelRatio:this.pixelRatio,textureRatio:this.textureRatio,texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};this.noise=new E.default(b),this.image=new p.default(b),this.warpShader=new f.default(b,this.noise,this.image,x),this.compShader=new v.default(b,this.noise,this.image,x),this.outputShader=new c.default(b,x),this.prevWarpShader=new f.default(b,this.noise,this.image,x),this.prevCompShader=new v.default(b,this.noise,this.image,x),this.numBlurPasses=0,this.blurShader1=new o.default(0,this.blurRatios,b,x),this.blurShader2=new o.default(1,this.blurRatios,b,x),this.blurShader3=new o.default(2,this.blurRatios,b,x),this.blurTexture1=this.blurShader1.blurVerticalTexture,this.blurTexture2=this.blurShader2.blurVerticalTexture,this.blurTexture3=this.blurShader3.blurVerticalTexture,this.basicWaveform=new s.default(b,x),this.customWaveforms=C.default.range(4).map(M=>new i.default(M,b,x)),this.customShapes=C.default.range(4).map(M=>new a.default(M,b,x)),this.prevCustomWaveforms=C.default.range(4).map(M=>new i.default(M,b,x)),this.prevCustomShapes=C.default.range(4).map(M=>new a.default(M,b,x)),this.darkenCenter=new l.default(b,x),this.innerBorder=new h.default(b,x),this.outerBorder=new h.default(b,x),this.motionVectors=new r.default(b,x),this.titleText=new P.default(b,x),this.blendPattern=new q.default(x),this.resampleShader=new d.default(b),this.supertext={startTime:-1},this.warpUVs=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*2),this.warpColor=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*4),this.gl.clearColor(0,0,0,1),this.blankPreset=A.a;const I={frame:0,time:0,fps:45,bass:1,bass_att:1,mid:1,mid_att:1,treb:1,treb_att:1};this.preset=A.a,this.prevPreset=this.preset,this.presetEquationRunner=new t.default(this.preset,I,x),this.prevPresetEquationRunner=new t.default(this.prevPreset,I,x),this.preset.useWASM||(this.regVars=this.presetEquationRunner.mdVSRegs)}static getHighestBlur(b){return/sampler_blur3/.test(b)?3:/sampler_blur2/.test(b)?2:/sampler_blur1/.test(b)?1:0}loadPreset(b,_){this.blendPattern.createBlendPattern(),this.blending=!0,this.blendStartTime=this.time,this.blendDuration=_,this.blendProgress=0,this.prevPresetEquationRunner=this.presetEquationRunner,this.prevPreset=this.preset,this.preset=b,this.presetTime=this.time;const T={frame:this.frameNum,time:this.time,fps:this.fps,bass:this.audioLevels.bass,bass_att:this.audioLevels.bass_att,mid:this.audioLevels.mid,mid_att:this.audioLevels.mid_att,treb:this.audioLevels.treb,treb_att:this.audioLevels.treb_att},x={pixelRatio:this.pixelRatio,textureRatio:this.textureRatio,texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};b.useWASM?(this.preset.globalPools.perFrame.old_wave_mode.value=this.prevPreset.baseVals.wave_mode,this.preset.baseVals.old_wave_mode=this.prevPreset.baseVals.wave_mode,this.presetEquationRunner=new e.default(this.preset,T,x),this.preset.pixel_eqs_initialize_array&&this.preset.pixel_eqs_initialize_array(this.mesh_width,this.mesh_height)):(this.preset.baseVals.old_wave_mode=this.prevPreset.baseVals.wave_mode,this.presetEquationRunner=new t.default(this.preset,T,x),this.regVars=this.presetEquationRunner.mdVSRegs);const I=this.prevWarpShader;this.prevWarpShader=this.warpShader,this.warpShader=I;const M=this.prevCompShader;this.prevCompShader=this.compShader,this.compShader=M;const R=this.preset.warp.trim(),S=this.preset.comp.trim();this.warpShader.updateShader(R),this.compShader.updateShader(S),R.length===0?this.numBlurPasses=0:this.numBlurPasses=U.getHighestBlur(R),S.length!==0&&(this.numBlurPasses=Math.max(this.numBlurPasses,U.getHighestBlur(S)))}loadExtraImages(b){this.image.loadExtraImages(b)}setRendererSize(b,_,T){const x=this.texsizeX,I=this.texsizeY;if(this.width=b,this.height=_,this.mesh_width=T.meshWidth||this.mesh_width,this.mesh_height=T.meshHeight||this.mesh_height,this.pixelRatio=T.pixelRatio||this.pixelRatio,this.textureRatio=T.textureRatio||this.textureRatio,this.texsizeX=b*this.pixelRatio*this.textureRatio,this.texsizeY=_*this.pixelRatio*this.textureRatio,this.aspectx=this.texsizeY>this.texsizeX?this.texsizeX/this.texsizeY:1,this.aspecty=this.texsizeX>this.texsizeY?this.texsizeY/this.texsizeX:1,this.texsizeX!==x||this.texsizeY!==I){const M=this.gl.createTexture();this.bindFrameBufferTexture(this.targetFrameBuffer,M),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY),this.resampleShader.renderQuadTexture(this.targetTexture),this.targetTexture=M,this.bindFrameBufferTexture(this.prevFrameBuffer,this.prevTexture),this.bindFrameBufferTexture(this.compFrameBuffer,this.compTexture)}this.updateGlobals(),this.frameNum>0&&this.renderToScreen()}setInternalMeshSize(b,_){this.mesh_width=b,this.mesh_height=_,this.updateGlobals()}setOutputAA(b){this.outputFXAA=b}updateGlobals(){const b={pixelRatio:this.pixelRatio,textureRatio:this.textureRatio,texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};this.presetEquationRunner.updateGlobals(b),this.prevPresetEquationRunner.updateGlobals(b),this.warpShader.updateGlobals(b),this.prevWarpShader.updateGlobals(b),this.compShader.updateGlobals(b),this.prevCompShader.updateGlobals(b),this.outputShader.updateGlobals(b),this.blurShader1.updateGlobals(b),this.blurShader2.updateGlobals(b),this.blurShader3.updateGlobals(b),this.basicWaveform.updateGlobals(b),this.customWaveforms.forEach(_=>_.updateGlobals(b)),this.customShapes.forEach(_=>_.updateGlobals(b)),this.prevCustomWaveforms.forEach(_=>_.updateGlobals(b)),this.prevCustomShapes.forEach(_=>_.updateGlobals(b)),this.darkenCenter.updateGlobals(b),this.innerBorder.updateGlobals(b),this.outerBorder.updateGlobals(b),this.motionVectors.updateGlobals(b),this.titleText.updateGlobals(b),this.blendPattern.updateGlobals(b),this.warpUVs=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*2),this.warpColor=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*4),this.preset.pixel_eqs_initialize_array&&this.preset.pixel_eqs_initialize_array(this.mesh_width,this.mesh_height)}calcTimeAndFPS(b){let _;if(b)_=b;else{const I=performance.now();_=(I-this.lastTime)/1e3,(_>1||_<0||this.frame<2)&&(_=1/30),this.lastTime=I}this.time+=1/this.fps,this.blending&&(this.blendProgress=(this.time-this.blendStartTime)/this.blendDuration,this.blendProgress>1&&(this.blending=!1));const T=this.timeHist[this.timeHist.length-1]+_;this.timeHist.push(T),this.timeHist.length>this.timeHistMax&&this.timeHist.shift();const x=this.timeHist.length/(T-this.timeHist[0]);Math.abs(x-this.fps)>3&&this.frame>this.timeHistMax?this.fps=x:this.fps=.93*this.fps+(1-.93)*x}runPixelEquations(b,_,T,x){const I=this.mesh_width,M=this.mesh_height,R=I+1,S=M+1,y=this.time*_.warpanimspeed,F=1/_.warpscale,D=11.68+4*Math.cos(y*1.413+10),X=8.77+3*Math.cos(y*1.113+7),O=10.54+3*Math.cos(y*1.233+3),k=11.49+4*Math.cos(y*.933+5),K=0/this.texsizeX,B=0/this.texsizeY,Q=this.aspectx,z=this.aspecty;let Y=0,W=0;if(b.preset.useWASM){const L=b.preset.globalPools.perVertex;if(C.default.setWasm(L,T,b.globalKeys),C.default.setWasm(L,b.mdVSQAfterFrame,b.qs),L.zoom.value=_.zoom,L.zoomexp.value=_.zoomexp,L.rot.value=_.rot,L.warp.value=_.warp,L.cx.value=_.cx,L.cy.value=_.cy,L.dx.value=_.dx,L.dy.value=_.dy,L.sx.value=_.sx,L.sy.value=_.sy,b.preset.pixel_eqs_wasm(b.runVertEQs,this.mesh_width,this.mesh_height,this.time,_.warpanimspeed,_.warpscale,this.aspectx,this.aspecty),!x)this.warpUVs=b.preset.pixel_eqs_get_array(),this.warpColor.fill(1);else{const rt=b.preset.pixel_eqs_get_array();let G=0,ot=0;for(let ht=0;ht<S;ht++)for(let nt=0;nt<R;nt++){const ft=rt[G],it=rt[G+1];let at=this.blendPattern.vertInfoA[G/2]*this.blendProgress+this.blendPattern.vertInfoC[G/2];at=Math.clamp(at,0,1),this.warpUVs[G]=this.warpUVs[G]*at+ft*(1-at),this.warpUVs[G+1]=this.warpUVs[G+1]*at+it*(1-at),this.warpColor[ot+0]=1,this.warpColor[ot+1]=1,this.warpColor[ot+2]=1,this.warpColor[ot+3]=at,G+=2,ot+=4}}}else{let L=C.default.cloneVars(_),rt=L.warp,G=L.zoom,ot=L.zoomexp,ht=L.cx,nt=L.cy,ft=L.sx,it=L.sy,at=L.dx,dt=L.dy,j=L.rot;for(let J=0;J<S;J++)for(let Z=0;Z<R;Z++){const H=Z/I*2-1,$=J/M*2-1,tt=Math.sqrt(H*H*Q*Q+$*$*z*z);if(b.runVertEQs){let ct;J===M/2&&Z===I/2?ct=0:ct=C.default.atan2($*z,H*Q),L.x=H*.5*Q+.5,L.y=$*-.5*z+.5,L.rad=tt,L.ang=ct,L.zoom=_.zoom,L.zoomexp=_.zoomexp,L.rot=_.rot,L.warp=_.warp,L.cx=_.cx,L.cy=_.cy,L.dx=_.dx,L.dy=_.dy,L.sx=_.sx,L.sy=_.sy,L=b.runPixelEquations(L),rt=L.warp,G=L.zoom,ot=L.zoomexp,ht=L.cx,nt=L.cy,ft=L.sx,it=L.sy,at=L.dx,dt=L.dy,j=L.rot}const lt=1/G**ot**(tt*2-1);let et=H*.5*Q*lt+.5,st=-$*.5*z*lt+.5;et=(et-ht)/ft+ht,st=(st-nt)/it+nt,rt!==0&&(et+=rt*.0035*Math.sin(y*.333+F*(H*D-$*k)),st+=rt*.0035*Math.cos(y*.375-F*(H*O+$*X)),et+=rt*.0035*Math.cos(y*.753-F*(H*X-$*O)),st+=rt*.0035*Math.sin(y*.825+F*(H*D+$*k)));const Et=et-ht,mt=st-nt,pt=Math.cos(j),gt=Math.sin(j);if(et=Et*pt-mt*gt+ht,st=Et*gt+mt*pt+nt,et-=at,st-=dt,et=(et-.5)/Q+.5,st=(st-.5)/z+.5,et+=K,st+=B,!x)this.warpUVs[Y]=et,this.warpUVs[Y+1]=st,this.warpColor[W+0]=1,this.warpColor[W+1]=1,this.warpColor[W+2]=1,this.warpColor[W+3]=1;else{let ct=this.blendPattern.vertInfoA[Y/2]*this.blendProgress+this.blendPattern.vertInfoC[Y/2];ct=Math.clamp(ct,0,1),this.warpUVs[Y]=this.warpUVs[Y]*ct+et*(1-ct),this.warpUVs[Y+1]=this.warpUVs[Y+1]*ct+st*(1-ct),this.warpColor[W+0]=1,this.warpColor[W+1]=1,this.warpColor[W+2]=1,this.warpColor[W+3]=ct}Y+=2,W+=4}this.mdVSVertex=L}}static mixFrameEquations(b,_,T){const x=.5-.5*Math.cos(b*Math.PI),I=1-x,M=.5,R=C.default.cloneVars(_);return R.decay=x*_.decay+I*T.decay,R.wave_a=x*_.wave_a+I*T.wave_a,R.wave_r=x*_.wave_r+I*T.wave_r,R.wave_g=x*_.wave_g+I*T.wave_g,R.wave_b=x*_.wave_b+I*T.wave_b,R.wave_x=x*_.wave_x+I*T.wave_x,R.wave_y=x*_.wave_y+I*T.wave_y,R.wave_mystery=x*_.wave_mystery+I*T.wave_mystery,R.ob_size=x*_.ob_size+I*T.ob_size,R.ob_r=x*_.ob_r+I*T.ob_r,R.ob_g=x*_.ob_g+I*T.ob_g,R.ob_b=x*_.ob_b+I*T.ob_b,R.ob_a=x*_.ob_a+I*T.ob_a,R.ib_size=x*_.ib_size+I*T.ib_size,R.ib_r=x*_.ib_r+I*T.ib_r,R.ib_g=x*_.ib_g+I*T.ib_g,R.ib_b=x*_.ib_b+I*T.ib_b,R.ib_a=x*_.ib_a+I*T.ib_a,R.mv_x=x*_.mv_x+I*T.mv_x,R.mv_y=x*_.mv_y+I*T.mv_y,R.mv_dx=x*_.mv_dx+I*T.mv_dx,R.mv_dy=x*_.mv_dy+I*T.mv_dy,R.mv_l=x*_.mv_l+I*T.mv_l,R.mv_r=x*_.mv_r+I*T.mv_r,R.mv_g=x*_.mv_g+I*T.mv_g,R.mv_b=x*_.mv_b+I*T.mv_b,R.mv_a=x*_.mv_a+I*T.mv_a,R.echo_zoom=x*_.echo_zoom+I*T.echo_zoom,R.echo_alpha=x*_.echo_alpha+I*T.echo_alpha,R.echo_orient=x*_.echo_orient+I*T.echo_orient,R.wave_dots=x<M?T.wave_dots:_.wave_dots,R.wave_thick=x<M?T.wave_thick:_.wave_thick,R.additivewave=x<M?T.additivewave:_.additivewave,R.wave_brighten=x<M?T.wave_brighten:_.wave_brighten,R.darken_center=x<M?T.darken_center:_.darken_center,R.gammaadj=x<M?T.gammaadj:_.gammaadj,R.wrap=x<M?T.wrap:_.wrap,R.invert=x<M?T.invert:_.invert,R.brighten=x<M?T.brighten:_.brighten,R.darken=x<M?T.darken:_.darken,R.solarize=x<M?T.brighten:_.solarize,R.b1n=x*_.b1n+I*T.b1n,R.b2n=x*_.b2n+I*T.b2n,R.b3n=x*_.b3n+I*T.b3n,R.b1x=x*_.b1x+I*T.b1x,R.b2x=x*_.b2x+I*T.b2x,R.b3x=x*_.b3x+I*T.b3x,R.b1ed=x*_.b1ed+I*T.b1ed,R}static getBlurValues(b){let _=b.b1n,T=b.b2n,x=b.b3n,I=b.b1x,M=b.b2x,R=b.b3x;const S=.1;if(I-_<S){const y=(_+I)*.5;_=y-S*.5,I=y-S*.5}if(M=Math.min(I,M),T=Math.max(_,T),M-T<S){const y=(T+M)*.5;T=y-S*.5,M=y-S*.5}if(R=Math.min(M,R),x=Math.max(T,x),R-x<S){const y=(x+R)*.5;x=y-S*.5,R=y-S*.5}return{blurMins:[_,T,x],blurMaxs:[I,M,R]}}bindFrambufferAndSetViewport(b,_,T){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,b),this.gl.viewport(0,0,_,T)}bindFrameBufferTexture(b,_){if(this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.texsizeX,this.texsizeY,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(this.texsizeX*this.texsizeY*4)),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){const T=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,T)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,b),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,_,0)}render({audioLevels:b,elapsedTime:_}={}){this.calcTimeAndFPS(_),this.frameNum+=1,b?this.audio.updateAudio(b.timeByteArray,b.timeByteArrayL,b.timeByteArrayR):this.audio.sampleAudio(),this.audioLevels.updateAudioLevels(this.fps,this.frameNum);const T={frame:this.frameNum,time:this.time,fps:this.fps,bass:this.audioLevels.bass,bass_att:this.audioLevels.bass_att,mid:this.audioLevels.mid,mid_att:this.audioLevels.mid_att,treb:this.audioLevels.treb,treb_att:this.audioLevels.treb_att,meshx:this.mesh_width,meshy:this.mesh_height,aspectx:this.invAspectx,aspecty:this.invAspecty,pixelsx:this.texsizeX,pixelsy:this.texsizeY},x=Object.assign({},T);this.prevPreset.useWASM||(x.gmegabuf=this.prevPresetEquationRunner.gmegabuf),this.preset.useWASM||(T.gmegabuf=this.presetEquationRunner.gmegabuf,Object.assign(T,this.regVars));const I=this.presetEquationRunner.runFrameEquations(T);this.runPixelEquations(this.presetEquationRunner,I,T,!1),this.preset.useWASM||(Object.assign(this.regVars,C.default.pick(this.mdVSVertex,this.regs)),Object.assign(T,this.regVars));let M;this.blending?(this.prevMDVSFrame=this.prevPresetEquationRunner.runFrameEquations(x),this.runPixelEquations(this.prevPresetEquationRunner,this.prevMDVSFrame,x,!0),M=U.mixFrameEquations(this.blendProgress,I,this.prevMDVSFrame)):M=I;const R=this.targetTexture;this.targetTexture=this.prevTexture,this.prevTexture=R;const S=this.targetFrameBuffer;this.targetFrameBuffer=this.prevFrameBuffer,this.prevFrameBuffer=S,this.gl.bindTexture(this.gl.TEXTURE_2D,this.prevTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);const{blurMins:y,blurMaxs:F}=U.getBlurValues(M);this.blending?(this.prevWarpShader.renderQuadTexture(!1,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,y,F,this.prevMDVSFrame,this.prevPresetEquationRunner.mdVSQAfterFrame,this.warpUVs,this.warpColor),this.warpShader.renderQuadTexture(!0,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,y,F,M,this.presetEquationRunner.mdVSQAfterFrame,this.warpUVs,this.warpColor)):this.warpShader.renderQuadTexture(!1,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,y,F,I,this.presetEquationRunner.mdVSQAfterFrame,this.warpUVs,this.warpColor),this.numBlurPasses>0&&(this.blurShader1.renderBlurTexture(this.targetTexture,I,y,F),this.numBlurPasses>1&&(this.blurShader2.renderBlurTexture(this.blurTexture1,I,y,F),this.numBlurPasses>2&&this.blurShader3.renderBlurTexture(this.blurTexture2,I,y,F)),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY)),this.motionVectors.drawMotionVectors(M,this.warpUVs),this.preset.shapes&&this.preset.shapes.length>0&&this.customShapes.forEach((O,k)=>{O.drawCustomShape(this.blending?this.blendProgress:1,T,this.presetEquationRunner,this.preset.shapes[k],this.prevTexture)}),this.preset.waves&&this.preset.waves.length>0&&this.customWaveforms.forEach((O,k)=>{O.drawCustomWaveform(this.blending?this.blendProgress:1,this.audio.timeArrayL,this.audio.timeArrayR,this.audio.freqArrayL,this.audio.freqArrayR,T,this.presetEquationRunner,this.preset.waves[k])}),this.blending&&(this.prevPreset.shapes&&this.prevPreset.shapes.length>0&&this.prevCustomShapes.forEach((O,k)=>{O.drawCustomShape(1-this.blendProgress,x,this.prevPresetEquationRunner,this.prevPreset.shapes[k],this.prevTexture)}),this.prevPreset.waves&&this.prevPreset.waves.length>0&&this.prevCustomWaveforms.forEach((O,k)=>{O.drawCustomWaveform(1-this.blendProgress,this.audio.timeArrayL,this.audio.timeArrayR,this.audio.freqArrayL,this.audio.freqArrayR,x,this.prevPresetEquationRunner,this.prevPreset.waves[k])})),this.basicWaveform.drawBasicWaveform(this.blending,this.blendProgress,this.audio.timeArrayL,this.audio.timeArrayR,M),this.darkenCenter.drawDarkenCenter(M);const D=[M.ob_r,M.ob_g,M.ob_b,M.ob_a];this.outerBorder.drawBorder(D,M.ob_size,0);const X=[M.ib_r,M.ib_g,M.ib_b,M.ib_a];if(this.innerBorder.drawBorder(X,M.ib_size,M.ob_size),this.supertext.startTime>=0){const O=(this.time-this.supertext.startTime)/this.supertext.duration;O>=1&&this.titleText.renderTitle(O,!0,T)}this.globalVars=T,this.mdVSFrame=I,this.mdVSFrameMixed=M,this.renderToScreen()}renderToScreen(){this.outputFXAA?this.bindFrambufferAndSetViewport(this.compFrameBuffer,this.texsizeX,this.texsizeY):this.bindFrambufferAndSetViewport(null,this.width,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);const{blurMins:b,blurMaxs:_}=U.getBlurValues(this.mdVSFrameMixed);if(this.blending?(this.prevCompShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,b,_,this.prevMDVSFrame,this.prevPresetEquationRunner.mdVSQAfterFrame,this.warpColor),this.compShader.renderQuadTexture(!0,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,b,_,this.mdVSFrameMixed,this.presetEquationRunner.mdVSQAfterFrame,this.warpColor)):this.compShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,b,_,this.mdVSFrame,this.presetEquationRunner.mdVSQAfterFrame,this.warpColor),this.supertext.startTime>=0){const T=(this.time-this.supertext.startTime)/this.supertext.duration;this.titleText.renderTitle(T,!1,this.globalVars),T>=1&&(this.supertext.startTime=-1)}this.outputFXAA&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.compTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(null,this.width,this.height),this.outputShader.renderQuadTexture(this.compTexture))}launchSongTitleAnim(b){this.supertext={startTime:this.time,duration:1.7},this.titleText.generateTitleTexture(b)}toDataURL(){const b=new Uint8Array(this.texsizeX*this.texsizeY*4),_=this.gl.createFramebuffer(),T=this.gl.createTexture();this.bindFrameBufferTexture(_,T);const{blurMins:x,blurMaxs:I}=U.getBlurValues(this.mdVSFrameMixed);this.compShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,x,I,this.mdVSFrame,this.presetEquationRunner.mdVSQAfterFrame,this.warpColor),this.gl.readPixels(0,0,this.texsizeX,this.texsizeY,this.gl.RGBA,this.gl.UNSIGNED_BYTE,b),Array.from({length:this.texsizeY},(y,F)=>b.slice(F*this.texsizeX*4,(F+1)*this.texsizeX*4)).forEach((y,F)=>b.set(y,(this.texsizeY-F-1)*this.texsizeX*4));const M=document.createElement("canvas");M.width=this.texsizeX,M.height=this.texsizeY;const R=M.getContext("2d"),S=R.createImageData(this.texsizeX,this.texsizeY);return S.data.set(b),R.putImageData(S,0,0),this.gl.deleteTexture(T),this.gl.deleteFramebuffer(_),M.toDataURL()}warpBufferToDataURL(){const b=new Uint8Array(this.texsizeX*this.texsizeY*4);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.targetFrameBuffer),this.gl.readPixels(0,0,this.texsizeX,this.texsizeY,this.gl.RGBA,this.gl.UNSIGNED_BYTE,b);const _=document.createElement("canvas");_.width=this.texsizeX,_.height=this.texsizeY;const T=_.getContext("2d"),x=T.createImageData(this.texsizeX,this.texsizeY);return x.data.set(b),T.putImageData(x,0,0),_.toDataURL()}}},"./src/rendering/shaders/blur/blur.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return A});var n=g("./src/rendering/shaders/blur/blurVertical.js"),u=g("./src/rendering/shaders/blur/blurHorizontal.js");class A{constructor(e,s,i,a={}){this.blurLevel=e,this.blurRatios=s,this.gl=i,this.texsizeX=a.texsizeX,this.texsizeY=a.texsizeY,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.blurHorizontalFrameBuffer=this.gl.createFramebuffer(),this.blurVerticalFrameBuffer=this.gl.createFramebuffer(),this.blurHorizontalTexture=this.gl.createTexture(),this.blurVerticalTexture=this.gl.createTexture(),this.setupFrameBufferTextures(),this.blurHorizontal=new u.default(i,this.blurLevel,a),this.blurVertical=new n.default(i,this.blurLevel,a)}updateGlobals(e){this.texsizeX=e.texsizeX,this.texsizeY=e.texsizeY,this.setupFrameBufferTextures()}getTextureSize(e){let s=Math.max(this.texsizeX*e,16);s=Math.floor((s+3)/16)*16;let i=Math.max(this.texsizeY*e,16);return i=Math.floor((i+3)/4)*4,[s,i]}setupFrameBufferTextures(){const e=this.blurLevel>0?this.blurRatios[this.blurLevel-1]:[1,1],s=this.blurRatios[this.blurLevel],i=this.getTextureSize(e[1]),a=this.getTextureSize(s[0]);this.bindFrameBufferTexture(this.blurHorizontalFrameBuffer,this.blurHorizontalTexture,a);const h=a,l=this.getTextureSize(s[1]);this.bindFrameBufferTexture(this.blurVerticalFrameBuffer,this.blurVerticalTexture,l),this.horizontalTexsizes=[i,a],this.verticalTexsizes=[h,l]}bindFrambufferAndSetViewport(e,s){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.viewport(0,0,s[0],s[1])}bindFrameBufferTexture(e,s,i){if(this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i[0],i[1],0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(i[0]*i[1]*4)),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){const a=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,a)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0)}renderBlurTexture(e,s,i,a){this.bindFrambufferAndSetViewport(this.blurHorizontalFrameBuffer,this.horizontalTexsizes[1]),this.blurHorizontal.renderQuadTexture(e,s,i,a,this.horizontalTexsizes[0]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.blurHorizontalTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(this.blurVerticalFrameBuffer,this.verticalTexsizes[1]),this.blurVertical.renderQuadTexture(this.blurHorizontalTexture,s,this.verticalTexsizes[0]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.blurVerticalTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D)}}},"./src/rendering/shaders/blur/blurHorizontal.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e){this.gl=t,this.blurLevel=e;const s=[4,3.8,3.5,2.9,1.9,1.2,.7,.3],i=s[0]+s[1],a=s[2]+s[3],h=s[4]+s[5],l=s[6]+s[7],r=0+2*s[1]/i,f=2+2*s[3]/a,v=4+2*s[5]/h,c=6+2*s[7]/l;this.ws=new Float32Array([i,a,h,l]),this.ds=new Float32Array([r,f,v,c]),this.wDiv=.5/(i+a+h+l),this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`
      #version 300 es
      const vec2 halfmad = vec2(0.5);
      in vec2 aPos;
      out vec2 uv;
      void main(void) {
        gl_Position = vec4(aPos, 0.0, 1.0);
        uv = aPos * halfmad + halfmad;
      }
      `.trim()),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`#version 300 es
       precision ${this.floatPrecision} float;
       precision highp int;
       precision mediump sampler2D;

       in vec2 uv;
       out vec4 fragColor;
       uniform sampler2D uTexture;
       uniform vec4 texsize;
       uniform float scale;
       uniform float bias;
       uniform vec4 ws;
       uniform vec4 ds;
       uniform float wdiv;

       void main(void) {
         float w1 = ws[0];
         float w2 = ws[1];
         float w3 = ws[2];
         float w4 = ws[3];
         float d1 = ds[0];
         float d2 = ds[1];
         float d3 = ds[2];
         float d4 = ds[3];

         vec2 uv2 = uv.xy;

         vec3 blur =
           ( texture(uTexture, uv2 + vec2( d1 * texsize.z,0.0) ).xyz
           + texture(uTexture, uv2 + vec2(-d1 * texsize.z,0.0) ).xyz) * w1 +
           ( texture(uTexture, uv2 + vec2( d2 * texsize.z,0.0) ).xyz
           + texture(uTexture, uv2 + vec2(-d2 * texsize.z,0.0) ).xyz) * w2 +
           ( texture(uTexture, uv2 + vec2( d3 * texsize.z,0.0) ).xyz
           + texture(uTexture, uv2 + vec2(-d3 * texsize.z,0.0) ).xyz) * w3 +
           ( texture(uTexture, uv2 + vec2( d4 * texsize.z,0.0) ).xyz
           + texture(uTexture, uv2 + vec2(-d4 * texsize.z,0.0) ).xyz) * w4;

         blur.xyz *= wdiv;
         blur.xyz = blur.xyz * scale + bias;

         fragColor = vec4(blur, 1.0);
       }`),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLocation=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.scaleLoc=this.gl.getUniformLocation(this.shaderProgram,"scale"),this.biasLoc=this.gl.getUniformLocation(this.shaderProgram,"bias"),this.wsLoc=this.gl.getUniformLocation(this.shaderProgram,"ws"),this.dsLocation=this.gl.getUniformLocation(this.shaderProgram,"ds"),this.wdivLoc=this.gl.getUniformLocation(this.shaderProgram,"wdiv")}getScaleAndBias(t,e){const s=[1,1,1],i=[0,0,0];let a,h;return s[0]=1/(e[0]-t[0]),i[0]=-t[0]*s[0],a=(t[1]-t[0])/(e[0]-t[0]),h=(e[1]-t[0])/(e[0]-t[0]),s[1]=1/(h-a),i[1]=-a*s[1],a=(t[2]-t[1])/(e[1]-t[1]),h=(e[2]-t[1])/(e[1]-t[1]),s[2]=1/(h-a),i[2]=-a*s[2],{scale:s[this.blurLevel],bias:i[this.blurLevel]}}renderQuadTexture(t,e,s,i,a){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0);const{scale:h,bias:l}=this.getScaleAndBias(s,i);this.gl.uniform4fv(this.texsizeLocation,[a[0],a[1],1/a[0],1/a[1]]),this.gl.uniform1f(this.scaleLoc,h),this.gl.uniform1f(this.biasLoc,l),this.gl.uniform4fv(this.wsLoc,this.ws),this.gl.uniform4fv(this.dsLocation,this.ds),this.gl.uniform1f(this.wdivLoc,this.wDiv),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}},"./src/rendering/shaders/blur/blurVertical.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e){this.gl=t,this.blurLevel=e;const s=[4,3.8,3.5,2.9,1.9,1.2,.7,.3],i=s[0]+s[1]+s[2]+s[3],a=s[4]+s[5]+s[6]+s[7],h=0+2*((s[2]+s[3])/i),l=2+2*((s[6]+s[7])/a);this.wds=new Float32Array([i,a,h,l]),this.wDiv=1/((i+a)*2),this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`
      #version 300 es
      const vec2 halfmad = vec2(0.5);
      in vec2 aPos;
      out vec2 uv;
      void main(void) {
        gl_Position = vec4(aPos, 0.0, 1.0);
        uv = aPos * halfmad + halfmad;
      }
      `.trim()),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`#version 300 es
       precision ${this.floatPrecision} float;
       precision highp int;
       precision mediump sampler2D;

       in vec2 uv;
       out vec4 fragColor;
       uniform sampler2D uTexture;
       uniform vec4 texsize;
       uniform float ed1;
       uniform float ed2;
       uniform float ed3;
       uniform vec4 wds;
       uniform float wdiv;

       void main(void) {
         float w1 = wds[0];
         float w2 = wds[1];
         float d1 = wds[2];
         float d2 = wds[3];

         vec2 uv2 = uv.xy;

         vec3 blur =
           ( texture(uTexture, uv2 + vec2(0.0, d1 * texsize.w) ).xyz
           + texture(uTexture, uv2 + vec2(0.0,-d1 * texsize.w) ).xyz) * w1 +
           ( texture(uTexture, uv2 + vec2(0.0, d2 * texsize.w) ).xyz
           + texture(uTexture, uv2 + vec2(0.0,-d2 * texsize.w) ).xyz) * w2;

         blur.xyz *= wdiv;

         float t = min(min(uv.x, uv.y), 1.0 - max(uv.x, uv.y));
         t = sqrt(t);
         t = ed1 + ed2 * clamp(t * ed3, 0.0, 1.0);
         blur.xyz *= t;

         fragColor = vec4(blur, 1.0);
       }`),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLocation=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.ed1Loc=this.gl.getUniformLocation(this.shaderProgram,"ed1"),this.ed2Loc=this.gl.getUniformLocation(this.shaderProgram,"ed2"),this.ed3Loc=this.gl.getUniformLocation(this.shaderProgram,"ed3"),this.wdsLocation=this.gl.getUniformLocation(this.shaderProgram,"wds"),this.wdivLoc=this.gl.getUniformLocation(this.shaderProgram,"wdiv")}renderQuadTexture(t,e,s){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0);const i=this.blurLevel===0?e.b1ed:0;this.gl.uniform4fv(this.texsizeLocation,[s[0],s[1],1/s[0],1/s[1]]),this.gl.uniform1f(this.ed1Loc,1-i),this.gl.uniform1f(this.ed2Loc,i),this.gl.uniform1f(this.ed3Loc,5),this.gl.uniform4fv(this.wdsLocation,this.wds),this.gl.uniform1f(this.wdivLoc,this.wDiv),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}},"./src/rendering/shaders/comp.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e,s,i={}){this.gl=t,this.noise=e,this.image=s,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.compWidth=32,this.compHeight=24,this.buildPositions(),this.indexBuf=t.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.compColorVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.mainSampler=this.gl.createSampler(),this.mainSamplerFW=this.gl.createSampler(),this.mainSamplerFC=this.gl.createSampler(),this.mainSamplerPW=this.gl.createSampler(),this.mainSamplerPC=this.gl.createSampler(),t.samplerParameteri(this.mainSampler,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.samplerParameteri(this.mainSampler,t.TEXTURE_MAG_FILTER,t.LINEAR),t.samplerParameteri(this.mainSampler,t.TEXTURE_WRAP_S,t.REPEAT),t.samplerParameteri(this.mainSampler,t.TEXTURE_WRAP_T,t.REPEAT),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_MAG_FILTER,t.LINEAR),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_WRAP_S,t.REPEAT),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_WRAP_T,t.REPEAT),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_MAG_FILTER,t.LINEAR),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_NEAREST),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_MAG_FILTER,t.NEAREST),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_WRAP_S,t.REPEAT),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_WRAP_T,t.REPEAT),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_NEAREST),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_MAG_FILTER,t.NEAREST),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}buildPositions(){const a=this.compWidth,h=this.compHeight,l=a+1,r=h+1,f=2/a,v=2/h,c=[];for(let o=0;o<r;o++){const E=o*v-1;for(let p=0;p<l;p++){const P=p*f-1;c.push(P,-E,0)}}const d=[];for(let o=0;o<h;o++)for(let E=0;E<a;E++){const p=E+l*o,P=E+l*(o+1),q=E+1+l*(o+1),C=E+1+l*o;d.push(p,P,C),d.push(P,q,C)}this.vertices=new Float32Array(c),this.indices=new Uint16Array(d)}updateGlobals(t){this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions()}createShader(t=""){let e,s;if(t.length===0)e=`float orient_horiz = mod(echo_orientation, 2.0);
                        float orient_x = (orient_horiz != 0.0) ? -1.0 : 1.0;
                        float orient_y = (echo_orientation >= 2.0) ? -1.0 : 1.0;
                        vec2 uv_echo = ((uv - 0.5) *
                                        (1.0 / echo_zoom) *
                                        vec2(orient_x, orient_y)) + 0.5;

                        ret = mix(texture(sampler_main, uv).rgb,
                                  texture(sampler_main, uv_echo).rgb,
                                  echo_alpha);

                        ret *= gammaAdj;

                        if(fShader >= 1.0) {
                          ret *= hue_shader;
                        } else if(fShader > 0.001) {
                          ret *= (1.0 - fShader) + (fShader * hue_shader);
                        }

                        if(brighten != 0) ret = sqrt(ret);
                        if(darken != 0) ret = ret*ret;
                        if(solarize != 0) ret = ret * (1.0 - ret) * 4.0;
                        if(invert != 0) ret = 1.0 - ret;`,s="";else{const h=n.default.getShaderParts(t);s=h[0],e=h[1]}e=e.replace(/texture2D/g,"texture"),e=e.replace(/texture3D/g,"texture"),this.userTextures=n.default.getUserSamplers(s),this.shaderProgram=this.gl.createProgram();const i=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(i,`
      #version 300 es
      const vec2 halfmad = vec2(0.5);
      in vec2 aPos;
      in vec4 aCompColor;
      out vec2 vUv;
      out vec4 vColor;
      void main(void) {
        gl_Position = vec4(aPos, 0.0, 1.0);
        vUv = aPos * halfmad + halfmad;
        vColor = aCompColor;
      }
      `.trim()),this.gl.compileShader(i);const a=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(a,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      precision mediump sampler3D;

      vec3 lum(vec3 v){
          return vec3(dot(v, vec3(0.32,0.49,0.29)));
      }

      in vec2 vUv;
      in vec4 vColor;
      out vec4 fragColor;
      uniform sampler2D sampler_main;
      uniform sampler2D sampler_fw_main;
      uniform sampler2D sampler_fc_main;
      uniform sampler2D sampler_pw_main;
      uniform sampler2D sampler_pc_main;
      uniform sampler2D sampler_blur1;
      uniform sampler2D sampler_blur2;
      uniform sampler2D sampler_blur3;
      uniform sampler2D sampler_noise_lq;
      uniform sampler2D sampler_noise_lq_lite;
      uniform sampler2D sampler_noise_mq;
      uniform sampler2D sampler_noise_hq;
      uniform sampler2D sampler_pw_noise_lq;
      uniform sampler3D sampler_noisevol_lq;
      uniform sampler3D sampler_noisevol_hq;

      uniform float time;
      uniform float gammaAdj;
      uniform float echo_zoom;
      uniform float echo_alpha;
      uniform float echo_orientation;
      uniform int invert;
      uniform int brighten;
      uniform int darken;
      uniform int solarize;
      uniform vec2 resolution;
      uniform vec4 aspect;
      uniform vec4 texsize;
      uniform vec4 texsize_noise_lq;
      uniform vec4 texsize_noise_mq;
      uniform vec4 texsize_noise_hq;
      uniform vec4 texsize_noise_lq_lite;
      uniform vec4 texsize_noisevol_lq;
      uniform vec4 texsize_noisevol_hq;

      uniform float bass;
      uniform float mid;
      uniform float treb;
      uniform float vol;
      uniform float bass_att;
      uniform float mid_att;
      uniform float treb_att;
      uniform float vol_att;

      uniform float frame;
      uniform float fps;

      uniform vec4 _qa;
      uniform vec4 _qb;
      uniform vec4 _qc;
      uniform vec4 _qd;
      uniform vec4 _qe;
      uniform vec4 _qf;
      uniform vec4 _qg;
      uniform vec4 _qh;

      #define q1 _qa.x
      #define q2 _qa.y
      #define q3 _qa.z
      #define q4 _qa.w
      #define q5 _qb.x
      #define q6 _qb.y
      #define q7 _qb.z
      #define q8 _qb.w
      #define q9 _qc.x
      #define q10 _qc.y
      #define q11 _qc.z
      #define q12 _qc.w
      #define q13 _qd.x
      #define q14 _qd.y
      #define q15 _qd.z
      #define q16 _qd.w
      #define q17 _qe.x
      #define q18 _qe.y
      #define q19 _qe.z
      #define q20 _qe.w
      #define q21 _qf.x
      #define q22 _qf.y
      #define q23 _qf.z
      #define q24 _qf.w
      #define q25 _qg.x
      #define q26 _qg.y
      #define q27 _qg.z
      #define q28 _qg.w
      #define q29 _qh.x
      #define q30 _qh.y
      #define q31 _qh.z
      #define q32 _qh.w

      uniform vec4 slow_roam_cos;
      uniform vec4 roam_cos;
      uniform vec4 slow_roam_sin;
      uniform vec4 roam_sin;

      uniform float blur1_min;
      uniform float blur1_max;
      uniform float blur2_min;
      uniform float blur2_max;
      uniform float blur3_min;
      uniform float blur3_max;

      uniform float scale1;
      uniform float scale2;
      uniform float scale3;
      uniform float bias1;
      uniform float bias2;
      uniform float bias3;

      uniform vec4 rand_frame;
      uniform vec4 rand_preset;

      uniform float fShader;

      float PI = ${Math.PI};

      ${s}

      void main(void) {
        vec3 ret;
        vec2 uv = vUv;
        vec2 uv_orig = vUv;
        uv.y = 1.0 - uv.y;
        uv_orig.y = 1.0 - uv_orig.y;
        float rad = length(uv - 0.5);
        float ang = atan(uv.x - 0.5, uv.y - 0.5);
        vec3 hue_shader = vColor.rgb;

        ${e}

        fragColor = vec4(ret, vColor.a);
      }
      `.trim()),this.gl.compileShader(a),this.gl.attachShader(this.shaderProgram,i),this.gl.attachShader(this.shaderProgram,a),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.compColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aCompColor"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_main"),this.textureFWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fw_main"),this.textureFCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fc_main"),this.texturePWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_main"),this.texturePCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pc_main"),this.blurTexture1Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur1"),this.blurTexture2Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur2"),this.blurTexture3Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur3"),this.noiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq"),this.noiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_mq"),this.noiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_hq"),this.noiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq_lite"),this.noisePointLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_noise_lq"),this.noiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_lq"),this.noiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_hq"),this.timeLoc=this.gl.getUniformLocation(this.shaderProgram,"time"),this.gammaAdjLoc=this.gl.getUniformLocation(this.shaderProgram,"gammaAdj"),this.echoZoomLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_zoom"),this.echoAlphaLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_alpha"),this.echoOrientationLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_orientation"),this.invertLoc=this.gl.getUniformLocation(this.shaderProgram,"invert"),this.brightenLoc=this.gl.getUniformLocation(this.shaderProgram,"brighten"),this.darkenLoc=this.gl.getUniformLocation(this.shaderProgram,"darken"),this.solarizeLoc=this.gl.getUniformLocation(this.shaderProgram,"solarize"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.texsizeNoiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq"),this.texsizeNoiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_mq"),this.texsizeNoiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_hq"),this.texsizeNoiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq_lite"),this.texsizeNoiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_lq"),this.texsizeNoiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_hq"),this.resolutionLoc=this.gl.getUniformLocation(this.shaderProgram,"resolution"),this.aspectLoc=this.gl.getUniformLocation(this.shaderProgram,"aspect"),this.bassLoc=this.gl.getUniformLocation(this.shaderProgram,"bass"),this.midLoc=this.gl.getUniformLocation(this.shaderProgram,"mid"),this.trebLoc=this.gl.getUniformLocation(this.shaderProgram,"treb"),this.volLoc=this.gl.getUniformLocation(this.shaderProgram,"vol"),this.bassAttLoc=this.gl.getUniformLocation(this.shaderProgram,"bass_att"),this.midAttLoc=this.gl.getUniformLocation(this.shaderProgram,"mid_att"),this.trebAttLoc=this.gl.getUniformLocation(this.shaderProgram,"treb_att"),this.volAttLoc=this.gl.getUniformLocation(this.shaderProgram,"vol_att"),this.frameLoc=this.gl.getUniformLocation(this.shaderProgram,"frame"),this.fpsLoc=this.gl.getUniformLocation(this.shaderProgram,"fps"),this.blur1MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_min"),this.blur1MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_max"),this.blur2MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_min"),this.blur2MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_max"),this.blur3MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_min"),this.blur3MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_max"),this.scale1Loc=this.gl.getUniformLocation(this.shaderProgram,"scale1"),this.scale2Loc=this.gl.getUniformLocation(this.shaderProgram,"scale2"),this.scale3Loc=this.gl.getUniformLocation(this.shaderProgram,"scale3"),this.bias1Loc=this.gl.getUniformLocation(this.shaderProgram,"bias1"),this.bias2Loc=this.gl.getUniformLocation(this.shaderProgram,"bias2"),this.bias3Loc=this.gl.getUniformLocation(this.shaderProgram,"bias3"),this.randPresetLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_preset"),this.randFrameLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_frame"),this.fShaderLoc=this.gl.getUniformLocation(this.shaderProgram,"fShader"),this.qaLoc=this.gl.getUniformLocation(this.shaderProgram,"_qa"),this.qbLoc=this.gl.getUniformLocation(this.shaderProgram,"_qb"),this.qcLoc=this.gl.getUniformLocation(this.shaderProgram,"_qc"),this.qdLoc=this.gl.getUniformLocation(this.shaderProgram,"_qd"),this.qeLoc=this.gl.getUniformLocation(this.shaderProgram,"_qe"),this.qfLoc=this.gl.getUniformLocation(this.shaderProgram,"_qf"),this.qgLoc=this.gl.getUniformLocation(this.shaderProgram,"_qg"),this.qhLoc=this.gl.getUniformLocation(this.shaderProgram,"_qh"),this.slowRoamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_cos"),this.roamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_cos"),this.slowRoamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_sin"),this.roamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_sin");for(let h=0;h<this.userTextures.length;h++){const l=this.userTextures[h];l.textureLoc=this.gl.getUniformLocation(this.shaderProgram,`sampler_${l.sampler}`)}}updateShader(t){this.createShader(t)}bindBlurVals(t,e){const s=t[0],i=t[1],a=t[2],h=e[0],l=e[1],r=e[2],f=h-s,v=s,c=l-i,d=i,o=r-a,E=a;this.gl.uniform1f(this.blur1MinLoc,s),this.gl.uniform1f(this.blur1MaxLoc,h),this.gl.uniform1f(this.blur2MinLoc,i),this.gl.uniform1f(this.blur2MaxLoc,l),this.gl.uniform1f(this.blur3MinLoc,a),this.gl.uniform1f(this.blur3MaxLoc,r),this.gl.uniform1f(this.scale1Loc,f),this.gl.uniform1f(this.scale2Loc,c),this.gl.uniform1f(this.scale3Loc,o),this.gl.uniform1f(this.bias1Loc,v),this.gl.uniform1f(this.bias2Loc,d),this.gl.uniform1f(this.bias3Loc,E)}static generateHueBase(t){const e=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1]);for(let s=0;s<4;s++){e[s*3+0]=.6+.3*Math.sin(t.time*30*.0143+3+s*21+t.rand_start[3]),e[s*3+1]=.6+.3*Math.sin(t.time*30*.0107+1+s*13+t.rand_start[1]),e[s*3+2]=.6+.3*Math.sin(t.time*30*.0129+6+s*9+t.rand_start[2]);const i=Math.max(e[s*3],e[s*3+1],e[s*3+2]);for(let a=0;a<3;a++)e[s*3+a]=e[s*3+a]/i,e[s*3+a]=.5+.5*e[s*3+a]}return e}generateCompColors(t,e,s){const i=u.generateHueBase(e),a=this.compWidth+1,h=this.compHeight+1,l=new Float32Array(a*h*4);let r=0;for(let f=0;f<h;f++)for(let v=0;v<a;v++){let c=v/this.compWidth,d=f/this.compHeight;const o=[1,1,1];for(let p=0;p<3;p++)o[p]=i[0+p]*c*d+i[3+p]*(1-c)*d+i[6+p]*c*(1-d)+i[9+p]*(1-c)*(1-d);let E=1;if(t){c*=this.mesh_width+1,d*=this.mesh_height+1,c=Math.clamp(c,0,this.mesh_width-1),d=Math.clamp(d,0,this.mesh_height-1);const p=Math.floor(c),P=Math.floor(d),q=c-p,C=d-P,U=s[(P*(this.mesh_width+1)+p)*4+3],w=s[(P*(this.mesh_width+1)+(p+1))*4+3],b=s[((P+1)*(this.mesh_width+1)+p)*4+3],_=s[((P+1)*(this.mesh_width+1)+(p+1))*4+3];E=U*(1-q)*(1-C)+w*q*(1-C)+b*(1-q)*C+_*q*C}l[r+0]=o[0],l[r+1]=o[1],l[r+2]=o[2],l[r+3]=E,r+=4}return l}renderQuadTexture(t,e,s,i,a,h,l,r,f,v){const c=this.generateCompColors(t,r,v);this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.compColorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,c,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.compColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.compColorLocation);const d=r.wrap!==0?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,d),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,d),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(1,this.mainSamplerFW),this.gl.uniform1i(this.textureFWLoc,1),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(2,this.mainSamplerFC),this.gl.uniform1i(this.textureFCLoc,2),this.gl.activeTexture(this.gl.TEXTURE3),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(3,this.mainSamplerPW),this.gl.uniform1i(this.texturePWLoc,3),this.gl.activeTexture(this.gl.TEXTURE4),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(4,this.mainSamplerPC),this.gl.uniform1i(this.texturePCLoc,4),this.gl.activeTexture(this.gl.TEXTURE5),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(this.blurTexture1Loc,5),this.gl.activeTexture(this.gl.TEXTURE6),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(this.blurTexture2Loc,6),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.uniform1i(this.blurTexture3Loc,7),this.gl.activeTexture(this.gl.TEXTURE8),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.uniform1i(this.noiseLQLoc,8),this.gl.activeTexture(this.gl.TEXTURE9),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexMQ),this.gl.uniform1i(this.noiseMQLoc,9),this.gl.activeTexture(this.gl.TEXTURE10),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexHQ),this.gl.uniform1i(this.noiseHQLoc,10),this.gl.activeTexture(this.gl.TEXTURE11),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQLite),this.gl.uniform1i(this.noiseLQLiteLoc,11),this.gl.activeTexture(this.gl.TEXTURE12),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.bindSampler(12,this.noise.noiseTexPointLQ),this.gl.uniform1i(this.noisePointLQLoc,12),this.gl.activeTexture(this.gl.TEXTURE13),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolLQ),this.gl.uniform1i(this.noiseVolLQLoc,13),this.gl.activeTexture(this.gl.TEXTURE14),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolHQ),this.gl.uniform1i(this.noiseVolHQLoc,14);for(let o=0;o<this.userTextures.length;o++){const E=this.userTextures[o];this.gl.activeTexture(this.gl.TEXTURE15+o),this.gl.bindTexture(this.gl.TEXTURE_2D,this.image.getTexture(E.sampler)),this.gl.uniform1i(E.textureLoc,15+o)}this.gl.uniform1f(this.timeLoc,r.time),this.gl.uniform1f(this.gammaAdjLoc,r.gammaadj),this.gl.uniform1f(this.echoZoomLoc,r.echo_zoom),this.gl.uniform1f(this.echoAlphaLoc,r.echo_alpha),this.gl.uniform1f(this.echoOrientationLoc,r.echo_orient),this.gl.uniform1i(this.invertLoc,r.invert),this.gl.uniform1i(this.brightenLoc,r.brighten),this.gl.uniform1i(this.darkenLoc,r.darken),this.gl.uniform1i(this.solarizeLoc,r.solarize),this.gl.uniform2fv(this.resolutionLoc,[this.texsizeX,this.texsizeY]),this.gl.uniform4fv(this.aspectLoc,[this.aspectx,this.aspecty,this.invAspectx,this.invAspecty]),this.gl.uniform4fv(this.texsizeLoc,new Float32Array([this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY])),this.gl.uniform4fv(this.texsizeNoiseLQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseMQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseHQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolLQLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolHQLoc,[32,32,1/32,1/32]),this.gl.uniform1f(this.bassLoc,r.bass),this.gl.uniform1f(this.midLoc,r.mid),this.gl.uniform1f(this.trebLoc,r.treb),this.gl.uniform1f(this.volLoc,(r.bass+r.mid+r.treb)/3),this.gl.uniform1f(this.bassAttLoc,r.bass_att),this.gl.uniform1f(this.midAttLoc,r.mid_att),this.gl.uniform1f(this.trebAttLoc,r.treb_att),this.gl.uniform1f(this.volAttLoc,(r.bass_att+r.mid_att+r.treb_att)/3),this.gl.uniform1f(this.frameLoc,r.frame),this.gl.uniform1f(this.fpsLoc,r.fps),this.gl.uniform4fv(this.randPresetLoc,r.rand_preset),this.gl.uniform4fv(this.randFrameLoc,new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()])),this.gl.uniform1f(this.fShaderLoc,r.fshader),this.gl.uniform4fv(this.qaLoc,new Float32Array([f.q1||0,f.q2||0,f.q3||0,f.q4||0])),this.gl.uniform4fv(this.qbLoc,new Float32Array([f.q5||0,f.q6||0,f.q7||0,f.q8||0])),this.gl.uniform4fv(this.qcLoc,new Float32Array([f.q9||0,f.q10||0,f.q11||0,f.q12||0])),this.gl.uniform4fv(this.qdLoc,new Float32Array([f.q13||0,f.q14||0,f.q15||0,f.q16||0])),this.gl.uniform4fv(this.qeLoc,new Float32Array([f.q17||0,f.q18||0,f.q19||0,f.q20||0])),this.gl.uniform4fv(this.qfLoc,new Float32Array([f.q21||0,f.q22||0,f.q23||0,f.q24||0])),this.gl.uniform4fv(this.qgLoc,new Float32Array([f.q25||0,f.q26||0,f.q27||0,f.q28||0])),this.gl.uniform4fv(this.qhLoc,new Float32Array([f.q29||0,f.q30||0,f.q31||0,f.q32||0])),this.gl.uniform4fv(this.slowRoamCosLoc,[.5+.5*Math.cos(r.time*.005),.5+.5*Math.cos(r.time*.008),.5+.5*Math.cos(r.time*.013),.5+.5*Math.cos(r.time*.022)]),this.gl.uniform4fv(this.roamCosLoc,[.5+.5*Math.cos(r.time*.3),.5+.5*Math.cos(r.time*1.3),.5+.5*Math.cos(r.time*5),.5+.5*Math.cos(r.time*20)]),this.gl.uniform4fv(this.slowRoamSinLoc,[.5+.5*Math.sin(r.time*.005),.5+.5*Math.sin(r.time*.008),.5+.5*Math.sin(r.time*.013),.5+.5*Math.sin(r.time*.022)]),this.gl.uniform4fv(this.roamSinLoc,[.5+.5*Math.sin(r.time*.3),.5+.5*Math.sin(r.time*1.3),.5+.5*Math.sin(r.time*5),.5+.5*Math.sin(r.time*20)]),this.bindBlurVals(h,l),t?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.disable(this.gl.BLEND),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0),t||this.gl.enable(this.gl.BLEND)}}},"./src/rendering/shaders/output.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e){this.gl=t,this.textureRatio=e.textureRatio,this.texsizeX=e.texsizeX,this.texsizeY=e.texsizeY,this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.useFXAA()?this.createFXAAShader():this.createShader()}useFXAA(){return this.textureRatio<=1}updateGlobals(t){this.textureRatio=t.textureRatio,this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.gl.deleteProgram(this.shaderProgram),this.useFXAA()?this.createFXAAShader():this.createShader()}createFXAAShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`#version 300 es
       const vec2 halfmad = vec2(0.5);
       in vec2 aPos;
       out vec2 v_rgbM;
       out vec2 v_rgbNW;
       out vec2 v_rgbNE;
       out vec2 v_rgbSW;
       out vec2 v_rgbSE;
       uniform vec4 texsize;
       void main(void) {
         gl_Position = vec4(aPos, 0.0, 1.0);

         v_rgbM = aPos * halfmad + halfmad;
         v_rgbNW = v_rgbM + (vec2(-1.0, -1.0) * texsize.zx);
         v_rgbNE = v_rgbM + (vec2(1.0, -1.0) * texsize.zx);
         v_rgbSW = v_rgbM + (vec2(-1.0, 1.0) * texsize.zx);
         v_rgbSE = v_rgbM + (vec2(1.0, 1.0) * texsize.zx);
       }`),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`#version 300 es
       precision ${this.floatPrecision} float;
       precision highp int;
       precision mediump sampler2D;

       in vec2 v_rgbM;
       in vec2 v_rgbNW;
       in vec2 v_rgbNE;
       in vec2 v_rgbSW;
       in vec2 v_rgbSE;
       out vec4 fragColor;
       uniform vec4 texsize;
       uniform sampler2D uTexture;

       #ifndef FXAA_REDUCE_MIN
         #define FXAA_REDUCE_MIN   (1.0/ 128.0)
       #endif
       #ifndef FXAA_REDUCE_MUL
         #define FXAA_REDUCE_MUL   (1.0 / 8.0)
       #endif
       #ifndef FXAA_SPAN_MAX
         #define FXAA_SPAN_MAX     8.0
       #endif

       void main(void) {
         vec4 color;
         vec3 rgbNW = textureLod(uTexture, v_rgbNW, 0.0).xyz;
         vec3 rgbNE = textureLod(uTexture, v_rgbNE, 0.0).xyz;
         vec3 rgbSW = textureLod(uTexture, v_rgbSW, 0.0).xyz;
         vec3 rgbSE = textureLod(uTexture, v_rgbSE, 0.0).xyz;
         vec3 rgbM  = textureLod(uTexture, v_rgbM, 0.0).xyz;
         vec3 luma = vec3(0.299, 0.587, 0.114);
         float lumaNW = dot(rgbNW, luma);
         float lumaNE = dot(rgbNE, luma);
         float lumaSW = dot(rgbSW, luma);
         float lumaSE = dot(rgbSE, luma);
         float lumaM  = dot(rgbM,  luma);
         float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
         float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

         mediump vec2 dir;
         dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
         dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

         float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                               (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

         float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
         dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
                   max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                   dir * rcpDirMin)) * texsize.zw;

         vec3 rgbA = 0.5 * (
             textureLod(uTexture, v_rgbM + dir * (1.0 / 3.0 - 0.5), 0.0).xyz +
             textureLod(uTexture, v_rgbM + dir * (2.0 / 3.0 - 0.5), 0.0).xyz);
         vec3 rgbB = rgbA * 0.5 + 0.25 * (
             textureLod(uTexture, v_rgbM + dir * -0.5, 0.0).xyz +
             textureLod(uTexture, v_rgbM + dir * 0.5, 0.0).xyz);

         float lumaB = dot(rgbB, luma);
         if ((lumaB < lumaMin) || (lumaB > lumaMax))
           color = vec4(rgbA, 1.0);
         else
           color = vec4(rgbB, 1.0);

         fragColor = color;
       }`),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize")}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`#version 300 es
       const vec2 halfmad = vec2(0.5);
       in vec2 aPos;
       out vec2 uv;
       void main(void) {
         gl_Position = vec4(aPos, 0.0, 1.0);
         uv = aPos * halfmad + halfmad;
       }`),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`#version 300 es
       precision ${this.floatPrecision} float;
       precision highp int;
       precision mediump sampler2D;

       in vec2 uv;
       out vec4 fragColor;
       uniform sampler2D uTexture;

       void main(void) {
         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);
       }`),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}renderQuadTexture(t){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0),this.useFXAA()&&this.gl.uniform4fv(this.texsizeLoc,new Float32Array([this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY])),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}},"./src/rendering/shaders/resample.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t){this.gl=t,this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`#version 300 es
       const vec2 halfmad = vec2(0.5);
       in vec2 aPos;
       out vec2 uv;
       void main(void) {
         gl_Position = vec4(aPos, 0.0, 1.0);
         uv = aPos * halfmad + halfmad;
       }`),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`#version 300 es
       precision ${this.floatPrecision} float;
       precision highp int;
       precision mediump sampler2D;

       in vec2 uv;
       out vec4 fragColor;
       uniform sampler2D uTexture;

       void main(void) {
         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);
       }`),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}renderQuadTexture(t){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.uniform1i(this.textureLoc,0),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}},"./src/rendering/shaders/shaderUtils.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return A});const n=/uniform sampler2D sampler_(?:.+?);/g,u=/uniform sampler2D sampler_(.+?);/;class A{static getShaderParts(e){const s=e.indexOf("shader_body");if(e&&s>-1){const i=e.substring(0,s),a=e.substring(s),h=a.indexOf("{"),l=a.lastIndexOf("}"),r=a.substring(h+1,l);return[i,r]}return["",e]}static getFragmentFloatPrecision(e){return e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0?"highp":e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}static getUserSamplers(e){const s=[],i=e.match(n);if(i&&i.length>0)for(let a=0;a<i.length;a++){const h=i[a].match(u);if(h&&h.length>0){const l=h[1];s.push({sampler:l})}}return s}}},"./src/rendering/shaders/warp.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e,s,i={}){this.gl=t,this.noise=e,this.image=s,this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions(),this.indexBuf=t.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.warpUvVertexBuf=this.gl.createBuffer(),this.warpColorVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.mainSampler=this.gl.createSampler(),this.mainSamplerFW=this.gl.createSampler(),this.mainSamplerFC=this.gl.createSampler(),this.mainSamplerPW=this.gl.createSampler(),this.mainSamplerPC=this.gl.createSampler(),t.samplerParameteri(this.mainSampler,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.samplerParameteri(this.mainSampler,t.TEXTURE_MAG_FILTER,t.LINEAR),t.samplerParameteri(this.mainSampler,t.TEXTURE_WRAP_S,t.REPEAT),t.samplerParameteri(this.mainSampler,t.TEXTURE_WRAP_T,t.REPEAT),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_MAG_FILTER,t.LINEAR),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_WRAP_S,t.REPEAT),t.samplerParameteri(this.mainSamplerFW,t.TEXTURE_WRAP_T,t.REPEAT),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_MAG_FILTER,t.LINEAR),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.samplerParameteri(this.mainSamplerFC,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_NEAREST),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_MAG_FILTER,t.NEAREST),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_WRAP_S,t.REPEAT),t.samplerParameteri(this.mainSamplerPW,t.TEXTURE_WRAP_T,t.REPEAT),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_NEAREST),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_MAG_FILTER,t.NEAREST),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.samplerParameteri(this.mainSamplerPC,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}buildPositions(){const a=this.mesh_width,h=this.mesh_height,l=a+1,r=h+1,f=2/a,v=2/h,c=[];for(let o=0;o<r;o++){const E=o*v-1;for(let p=0;p<l;p++){const P=p*f-1;c.push(P,-E,0)}}const d=[];for(let o=0;o<h;o++)for(let E=0;E<a;E++){const p=E+l*o,P=E+l*(o+1),q=E+1+l*(o+1),C=E+1+l*o;d.push(p,P,C),d.push(P,q,C)}this.vertices=new Float32Array(c),this.indices=new Uint16Array(d)}updateGlobals(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions()}createShader(t=""){let e,s;if(t.length===0)e="ret = texture(sampler_main, uv).rgb * decay;",s="";else{const h=n.default.getShaderParts(t);s=h[0],e=h[1]}e=e.replace(/texture2D/g,"texture"),e=e.replace(/texture3D/g,"texture"),this.userTextures=n.default.getUserSamplers(s),this.shaderProgram=this.gl.createProgram();const i=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(i,`
      #version 300 es
      precision ${this.floatPrecision} float;
      const vec2 halfmad = vec2(0.5);
      in vec2 aPos;
      in vec2 aWarpUv;
      in vec4 aWarpColor;
      out vec2 uv;
      out vec2 uv_orig;
      out vec4 vColor;
      void main(void) {
        gl_Position = vec4(aPos, 0.0, 1.0);
        uv_orig = aPos * halfmad + halfmad;
        uv = aWarpUv;
        vColor = aWarpColor;
      }
      `.trim()),this.gl.compileShader(i);const a=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(a,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      precision mediump sampler3D;

      in vec2 uv;
      in vec2 uv_orig;
      in vec4 vColor;
      out vec4 fragColor;
      uniform sampler2D sampler_main;
      uniform sampler2D sampler_fw_main;
      uniform sampler2D sampler_fc_main;
      uniform sampler2D sampler_pw_main;
      uniform sampler2D sampler_pc_main;
      uniform sampler2D sampler_blur1;
      uniform sampler2D sampler_blur2;
      uniform sampler2D sampler_blur3;
      uniform sampler2D sampler_noise_lq;
      uniform sampler2D sampler_noise_lq_lite;
      uniform sampler2D sampler_noise_mq;
      uniform sampler2D sampler_noise_hq;
      uniform sampler2D sampler_pw_noise_lq;
      uniform sampler3D sampler_noisevol_lq;
      uniform sampler3D sampler_noisevol_hq;
      uniform float time;
      uniform float decay;
      uniform vec2 resolution;
      uniform vec4 aspect;
      uniform vec4 texsize;
      uniform vec4 texsize_noise_lq;
      uniform vec4 texsize_noise_mq;
      uniform vec4 texsize_noise_hq;
      uniform vec4 texsize_noise_lq_lite;
      uniform vec4 texsize_noisevol_lq;
      uniform vec4 texsize_noisevol_hq;

      uniform float bass;
      uniform float mid;
      uniform float treb;
      uniform float vol;
      uniform float bass_att;
      uniform float mid_att;
      uniform float treb_att;
      uniform float vol_att;

      uniform float frame;
      uniform float fps;

      uniform vec4 _qa;
      uniform vec4 _qb;
      uniform vec4 _qc;
      uniform vec4 _qd;
      uniform vec4 _qe;
      uniform vec4 _qf;
      uniform vec4 _qg;
      uniform vec4 _qh;

      #define q1 _qa.x
      #define q2 _qa.y
      #define q3 _qa.z
      #define q4 _qa.w
      #define q5 _qb.x
      #define q6 _qb.y
      #define q7 _qb.z
      #define q8 _qb.w
      #define q9 _qc.x
      #define q10 _qc.y
      #define q11 _qc.z
      #define q12 _qc.w
      #define q13 _qd.x
      #define q14 _qd.y
      #define q15 _qd.z
      #define q16 _qd.w
      #define q17 _qe.x
      #define q18 _qe.y
      #define q19 _qe.z
      #define q20 _qe.w
      #define q21 _qf.x
      #define q22 _qf.y
      #define q23 _qf.z
      #define q24 _qf.w
      #define q25 _qg.x
      #define q26 _qg.y
      #define q27 _qg.z
      #define q28 _qg.w
      #define q29 _qh.x
      #define q30 _qh.y
      #define q31 _qh.z
      #define q32 _qh.w

      uniform vec4 slow_roam_cos;
      uniform vec4 roam_cos;
      uniform vec4 slow_roam_sin;
      uniform vec4 roam_sin;

      uniform float blur1_min;
      uniform float blur1_max;
      uniform float blur2_min;
      uniform float blur2_max;
      uniform float blur3_min;
      uniform float blur3_max;

      uniform float scale1;
      uniform float scale2;
      uniform float scale3;
      uniform float bias1;
      uniform float bias2;
      uniform float bias3;

      uniform vec4 rand_frame;
      uniform vec4 rand_preset;

      float PI = ${Math.PI};

      ${s}

      void main(void) {
        vec3 ret;
        float rad = length(uv_orig - 0.5);
        float ang = atan(uv_orig.x - 0.5, uv_orig.y - 0.5);

        ${e}

        fragColor = vec4(ret, 1.0) * vColor;
      }
      `.trim()),this.gl.compileShader(a),this.gl.attachShader(this.shaderProgram,i),this.gl.attachShader(this.shaderProgram,a),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.warpUvLocation=this.gl.getAttribLocation(this.shaderProgram,"aWarpUv"),this.warpColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aWarpColor"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_main"),this.textureFWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fw_main"),this.textureFCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fc_main"),this.texturePWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_main"),this.texturePCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pc_main"),this.blurTexture1Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur1"),this.blurTexture2Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur2"),this.blurTexture3Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur3"),this.noiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq"),this.noiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_mq"),this.noiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_hq"),this.noiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq_lite"),this.noisePointLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_noise_lq"),this.noiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_lq"),this.noiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_hq"),this.decayLoc=this.gl.getUniformLocation(this.shaderProgram,"decay"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.texsizeNoiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq"),this.texsizeNoiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_mq"),this.texsizeNoiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_hq"),this.texsizeNoiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq_lite"),this.texsizeNoiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_lq"),this.texsizeNoiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_hq"),this.resolutionLoc=this.gl.getUniformLocation(this.shaderProgram,"resolution"),this.aspectLoc=this.gl.getUniformLocation(this.shaderProgram,"aspect"),this.bassLoc=this.gl.getUniformLocation(this.shaderProgram,"bass"),this.midLoc=this.gl.getUniformLocation(this.shaderProgram,"mid"),this.trebLoc=this.gl.getUniformLocation(this.shaderProgram,"treb"),this.volLoc=this.gl.getUniformLocation(this.shaderProgram,"vol"),this.bassAttLoc=this.gl.getUniformLocation(this.shaderProgram,"bass_att"),this.midAttLoc=this.gl.getUniformLocation(this.shaderProgram,"mid_att"),this.trebAttLoc=this.gl.getUniformLocation(this.shaderProgram,"treb_att"),this.volAttLoc=this.gl.getUniformLocation(this.shaderProgram,"vol_att"),this.timeLoc=this.gl.getUniformLocation(this.shaderProgram,"time"),this.frameLoc=this.gl.getUniformLocation(this.shaderProgram,"frame"),this.fpsLoc=this.gl.getUniformLocation(this.shaderProgram,"fps"),this.blur1MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_min"),this.blur1MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_max"),this.blur2MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_min"),this.blur2MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_max"),this.blur3MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_min"),this.blur3MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_max"),this.scale1Loc=this.gl.getUniformLocation(this.shaderProgram,"scale1"),this.scale2Loc=this.gl.getUniformLocation(this.shaderProgram,"scale2"),this.scale3Loc=this.gl.getUniformLocation(this.shaderProgram,"scale3"),this.bias1Loc=this.gl.getUniformLocation(this.shaderProgram,"bias1"),this.bias2Loc=this.gl.getUniformLocation(this.shaderProgram,"bias2"),this.bias3Loc=this.gl.getUniformLocation(this.shaderProgram,"bias3"),this.randPresetLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_preset"),this.randFrameLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_frame"),this.qaLoc=this.gl.getUniformLocation(this.shaderProgram,"_qa"),this.qbLoc=this.gl.getUniformLocation(this.shaderProgram,"_qb"),this.qcLoc=this.gl.getUniformLocation(this.shaderProgram,"_qc"),this.qdLoc=this.gl.getUniformLocation(this.shaderProgram,"_qd"),this.qeLoc=this.gl.getUniformLocation(this.shaderProgram,"_qe"),this.qfLoc=this.gl.getUniformLocation(this.shaderProgram,"_qf"),this.qgLoc=this.gl.getUniformLocation(this.shaderProgram,"_qg"),this.qhLoc=this.gl.getUniformLocation(this.shaderProgram,"_qh"),this.slowRoamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_cos"),this.roamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_cos"),this.slowRoamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_sin"),this.roamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_sin");for(let h=0;h<this.userTextures.length;h++){const l=this.userTextures[h];l.textureLoc=this.gl.getUniformLocation(this.shaderProgram,`sampler_${l.sampler}`)}}updateShader(t){this.createShader(t)}bindBlurVals(t,e){const s=t[0],i=t[1],a=t[2],h=e[0],l=e[1],r=e[2],f=h-s,v=s,c=l-i,d=i,o=r-a,E=a;this.gl.uniform1f(this.blur1MinLoc,s),this.gl.uniform1f(this.blur1MaxLoc,h),this.gl.uniform1f(this.blur2MinLoc,i),this.gl.uniform1f(this.blur2MaxLoc,l),this.gl.uniform1f(this.blur3MinLoc,a),this.gl.uniform1f(this.blur3MaxLoc,r),this.gl.uniform1f(this.scale1Loc,f),this.gl.uniform1f(this.scale2Loc,c),this.gl.uniform1f(this.scale3Loc,o),this.gl.uniform1f(this.bias1Loc,v),this.gl.uniform1f(this.bias2Loc,d),this.gl.uniform1f(this.bias3Loc,E)}renderQuadTexture(t,e,s,i,a,h,l,r,f,v,c){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.warpUvVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,v,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.warpUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.warpUvLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.warpColorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,c,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.warpColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.warpColorLocation);const d=r.wrap!==0?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,d),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,d),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(1,this.mainSamplerFW),this.gl.uniform1i(this.textureFWLoc,1),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(2,this.mainSamplerFC),this.gl.uniform1i(this.textureFCLoc,2),this.gl.activeTexture(this.gl.TEXTURE3),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(3,this.mainSamplerPW),this.gl.uniform1i(this.texturePWLoc,3),this.gl.activeTexture(this.gl.TEXTURE4),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(4,this.mainSamplerPC),this.gl.uniform1i(this.texturePCLoc,4),this.gl.activeTexture(this.gl.TEXTURE5),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(this.blurTexture1Loc,5),this.gl.activeTexture(this.gl.TEXTURE6),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(this.blurTexture2Loc,6),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.uniform1i(this.blurTexture3Loc,7),this.gl.activeTexture(this.gl.TEXTURE8),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.uniform1i(this.noiseLQLoc,8),this.gl.activeTexture(this.gl.TEXTURE9),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexMQ),this.gl.uniform1i(this.noiseMQLoc,9),this.gl.activeTexture(this.gl.TEXTURE10),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexHQ),this.gl.uniform1i(this.noiseHQLoc,10),this.gl.activeTexture(this.gl.TEXTURE11),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQLite),this.gl.uniform1i(this.noiseLQLiteLoc,11),this.gl.activeTexture(this.gl.TEXTURE12),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.bindSampler(12,this.noise.noiseTexPointLQ),this.gl.uniform1i(this.noisePointLQLoc,12),this.gl.activeTexture(this.gl.TEXTURE13),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolLQ),this.gl.uniform1i(this.noiseVolLQLoc,13),this.gl.activeTexture(this.gl.TEXTURE14),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolHQ),this.gl.uniform1i(this.noiseVolHQLoc,14);for(let o=0;o<this.userTextures.length;o++){const E=this.userTextures[o];this.gl.activeTexture(this.gl.TEXTURE15+o),this.gl.bindTexture(this.gl.TEXTURE_2D,this.image.getTexture(E.sampler)),this.gl.uniform1i(E.textureLoc,15+o)}this.gl.uniform1f(this.decayLoc,r.decay),this.gl.uniform2fv(this.resolutionLoc,[this.texsizeX,this.texsizeY]),this.gl.uniform4fv(this.aspectLoc,[this.aspectx,this.aspecty,this.invAspectx,this.invAspecty]),this.gl.uniform4fv(this.texsizeLoc,[this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY]),this.gl.uniform4fv(this.texsizeNoiseLQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseMQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseHQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolLQLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolHQLoc,[32,32,1/32,1/32]),this.gl.uniform1f(this.bassLoc,r.bass),this.gl.uniform1f(this.midLoc,r.mid),this.gl.uniform1f(this.trebLoc,r.treb),this.gl.uniform1f(this.volLoc,(r.bass+r.mid+r.treb)/3),this.gl.uniform1f(this.bassAttLoc,r.bass_att),this.gl.uniform1f(this.midAttLoc,r.mid_att),this.gl.uniform1f(this.trebAttLoc,r.treb_att),this.gl.uniform1f(this.volAttLoc,(r.bass_att+r.mid_att+r.treb_att)/3),this.gl.uniform1f(this.timeLoc,r.time),this.gl.uniform1f(this.frameLoc,r.frame),this.gl.uniform1f(this.fpsLoc,r.fps),this.gl.uniform4fv(this.randPresetLoc,r.rand_preset),this.gl.uniform4fv(this.randFrameLoc,new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()])),this.gl.uniform4fv(this.qaLoc,new Float32Array([f.q1||0,f.q2||0,f.q3||0,f.q4||0])),this.gl.uniform4fv(this.qbLoc,new Float32Array([f.q5||0,f.q6||0,f.q7||0,f.q8||0])),this.gl.uniform4fv(this.qcLoc,new Float32Array([f.q9||0,f.q10||0,f.q11||0,f.q12||0])),this.gl.uniform4fv(this.qdLoc,new Float32Array([f.q13||0,f.q14||0,f.q15||0,f.q16||0])),this.gl.uniform4fv(this.qeLoc,new Float32Array([f.q17||0,f.q18||0,f.q19||0,f.q20||0])),this.gl.uniform4fv(this.qfLoc,new Float32Array([f.q21||0,f.q22||0,f.q23||0,f.q24||0])),this.gl.uniform4fv(this.qgLoc,new Float32Array([f.q25||0,f.q26||0,f.q27||0,f.q28||0])),this.gl.uniform4fv(this.qhLoc,new Float32Array([f.q29||0,f.q30||0,f.q31||0,f.q32||0])),this.gl.uniform4fv(this.slowRoamCosLoc,[.5+.5*Math.cos(r.time*.005),.5+.5*Math.cos(r.time*.008),.5+.5*Math.cos(r.time*.013),.5+.5*Math.cos(r.time*.022)]),this.gl.uniform4fv(this.roamCosLoc,[.5+.5*Math.cos(r.time*.3),.5+.5*Math.cos(r.time*1.3),.5+.5*Math.cos(r.time*5),.5+.5*Math.cos(r.time*20)]),this.gl.uniform4fv(this.slowRoamSinLoc,[.5+.5*Math.sin(r.time*.005),.5+.5*Math.sin(r.time*.008),.5+.5*Math.sin(r.time*.013),.5+.5*Math.sin(r.time*.022)]),this.gl.uniform4fv(this.roamSinLoc,[.5+.5*Math.sin(r.time*.3),.5+.5*Math.sin(r.time*1.3),.5+.5*Math.sin(r.time*5),.5+.5*Math.sin(r.time*20)]),this.bindBlurVals(h,l),t?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.disable(this.gl.BLEND),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0),t||this.gl.enable(this.gl.BLEND)}}},"./src/rendering/shapes/customShape.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return A});var n=g("./src/utils.js"),u=g("./src/rendering/shaders/shaderUtils.js");class A{constructor(e,s,i){this.index=e,this.gl=s;const a=101;this.positions=new Float32Array((a+2)*3),this.colors=new Float32Array((a+2)*4),this.uvs=new Float32Array((a+2)*2),this.borderPositions=new Float32Array((a+1)*3),this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.uvVertexBuf=this.gl.createBuffer(),this.borderPositionVertexBuf=this.gl.createBuffer(),this.floatPrecision=u.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.createBorderShader(),this.mainSampler=this.gl.createSampler(),s.samplerParameteri(this.mainSampler,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),s.samplerParameteri(this.mainSampler,s.TEXTURE_MAG_FILTER,s.LINEAR),s.samplerParameteri(this.mainSampler,s.TEXTURE_WRAP_S,s.REPEAT),s.samplerParameteri(this.mainSampler,s.TEXTURE_WRAP_T,s.REPEAT)}updateGlobals(e){this.texsizeX=e.texsizeX,this.texsizeY=e.texsizeY,this.mesh_width=e.mesh_width,this.mesh_height=e.mesh_height,this.aspectx=e.aspectx,this.aspecty=e.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}createShader(){this.shaderProgram=this.gl.createProgram();const e=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(e,`
      #version 300 es
      in vec3 aPos;
      in vec4 aColor;
      in vec2 aUv;
      out vec4 vColor;
      out vec2 vUv;
      void main(void) {
        vColor = aColor;
        vUv = aUv;
        gl_Position = vec4(aPos, 1.0);
      }
      `.trim()),this.gl.compileShader(e);const s=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(s,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      uniform sampler2D uTexture;
      uniform float uTextured;
      in vec4 vColor;
      in vec2 vUv;
      out vec4 fragColor;
      void main(void) {
        if (uTextured != 0.0) {
          fragColor = texture(uTexture, vUv) * vColor;
        } else {
          fragColor = vColor;
        }
      }
      `.trim()),this.gl.compileShader(s),this.gl.attachShader(this.shaderProgram,e),this.gl.attachShader(this.shaderProgram,s),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor"),this.aUvLocation=this.gl.getAttribLocation(this.shaderProgram,"aUv"),this.texturedLoc=this.gl.getUniformLocation(this.shaderProgram,"uTextured"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}createBorderShader(){this.borderShaderProgram=this.gl.createProgram();const e=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(e,`
      #version 300 es
      in vec3 aBorderPos;
      uniform vec2 thickOffset;
      void main(void) {
        gl_Position = vec4(aBorderPos +
                            vec3(thickOffset, 0.0), 1.0);
      }
      `.trim()),this.gl.compileShader(e);const s=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(s,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      out vec4 fragColor;
      uniform vec4 uBorderColor;
      void main(void) {
        fragColor = uBorderColor;
      }
      `.trim()),this.gl.compileShader(s),this.gl.attachShader(this.borderShaderProgram,e),this.gl.attachShader(this.borderShaderProgram,s),this.gl.linkProgram(this.borderShaderProgram),this.aBorderPosLoc=this.gl.getAttribLocation(this.borderShaderProgram,"aBorderPos"),this.uBorderColorLoc=this.gl.getUniformLocation(this.borderShaderProgram,"uBorderColor"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}drawCustomShape(e,s,i,a,h){if(a.baseVals.enabled!==0)if(i.preset.useWASM){this.setupShapeBuffers(i.preset.globalPools.perFrame.wrap.value);const l=i.preset.shapes[this.index].baseVals,r=i.preset.globalPools[`shapePerFrame${this.index}`];n.default.setWasm(r,s,i.globalKeys),i.preset.shapes[this.index].frame_eqs||i.preset.restore_qs(),n.default.setWasm(r,i.mdVSTShapeInits[this.index],i.ts),i.preset.save_ts(),r.x.value=l.x,r.y.value=l.y,r.rad.value=l.rad,r.ang.value=l.ang,r.r.value=l.r,r.g.value=l.g,r.b.value=l.b,r.a.value=l.a,r.r2.value=l.r2,r.g2.value=l.g2,r.b2.value=l.b2,r.a2.value=l.a2,r.border_r.value=l.border_r,r.border_g.value=l.border_g,r.border_b.value=l.border_b,r.border_a.value=l.border_a,r.thickoutline.value=l.thickoutline,r.textured.value=l.textured,r.tex_zoom.value=l.tex_zoom,r.tex_ang.value=l.tex_ang,r.additive.value=l.additive,i.preset.shapes[this.index].frame_eqs_save();const f=Math.clamp(l.num_inst,1,1024);for(let v=0;v<f;v++){r.instance.value=v,i.preset.shapes[this.index].frame_eqs&&(i.preset.shapes[this.index].frame_eqs_restore(),i.preset.restore_qs(),i.preset.restore_ts(),i.preset.shapes[this.index].frame_eqs());let c=r.sides.value;c=Math.clamp(c,3,100),c=Math.floor(c);const d=r.rad.value,o=r.ang.value,E=r.x.value*2-1,p=r.y.value*-2+1,P=r.r.value,q=r.g.value,C=r.b.value,U=r.a.value,w=r.r2.value,b=r.g2.value,_=r.b2.value,T=r.a2.value,x=r.border_r.value,I=r.border_g.value,M=r.border_b.value,R=r.border_a.value;this.borderColor=[x,I,M,R*e];const S=r.thickoutline.value,y=r.textured.value,F=r.tex_zoom.value,D=r.tex_ang.value,X=r.additive.value,O=this.borderColor[3]>0,k=Math.abs(y)>=1,K=Math.abs(S)>=1,B=Math.abs(X)>=1;this.positions[0]=E,this.positions[1]=p,this.positions[2]=0,this.colors[0]=P,this.colors[1]=q,this.colors[2]=C,this.colors[3]=U*e,k&&(this.uvs[0]=.5,this.uvs[1]=.5);const Q=Math.PI*.25;for(let z=1;z<=c+1;z++){const W=(z-1)/c*2*Math.PI,L=W+o+Q;if(this.positions[z*3+0]=E+d*Math.cos(L)*this.aspecty,this.positions[z*3+1]=p+d*Math.sin(L),this.positions[z*3+2]=0,this.colors[z*4+0]=w,this.colors[z*4+1]=b,this.colors[z*4+2]=_,this.colors[z*4+3]=T*e,k){const rt=W+D+Q;this.uvs[z*2+0]=.5+.5*Math.cos(rt)/F*this.aspecty,this.uvs[z*2+1]=.5+.5*Math.sin(rt)/F}O&&(this.borderPositions[(z-1)*3+0]=this.positions[z*3+0],this.borderPositions[(z-1)*3+1]=this.positions[z*3+1],this.borderPositions[(z-1)*3+2]=this.positions[z*3+2])}this.drawCustomShapeInstance(h,c,k,O,K,B)}}else{this.setupShapeBuffers(i.mdVSFrame.wrap);let l=Object.assign({},i.mdVSShapes[this.index],i.mdVSFrameMapShapes[this.index],s);i.preset.shapes[this.index].frame_eqs_str===""&&(l=Object.assign(l,i.mdVSQAfterFrame,i.mdVSTShapeInits[this.index]));const r=i.preset.shapes[this.index].baseVals,f=Math.clamp(r.num_inst,1,1024);for(let d=0;d<f;d++){l.instance=d,l.x=r.x,l.y=r.y,l.rad=r.rad,l.ang=r.ang,l.r=r.r,l.g=r.g,l.b=r.b,l.a=r.a,l.r2=r.r2,l.g2=r.g2,l.b2=r.b2,l.a2=r.a2,l.border_r=r.border_r,l.border_g=r.border_g,l.border_b=r.border_b,l.border_a=r.border_a,l.thickoutline=r.thickoutline,l.textured=r.textured,l.tex_zoom=r.tex_zoom,l.tex_ang=r.tex_ang,l.additive=r.additive;let o;i.preset.shapes[this.index].frame_eqs_str!==""?(l=Object.assign(l,i.mdVSQAfterFrame,i.mdVSTShapeInits[this.index]),o=i.runShapeFrameEquations(this.index,l)):o=l;let E=o.sides;E=Math.clamp(E,3,100),E=Math.floor(E);const p=o.rad,P=o.ang,q=o.x*2-1,C=o.y*-2+1,U=o.r,w=o.g,b=o.b,_=o.a,T=o.r2,x=o.g2,I=o.b2,M=o.a2,R=o.border_r,S=o.border_g,y=o.border_b,F=o.border_a;this.borderColor=[R,S,y,F*e];const D=o.thickoutline,X=o.textured,O=o.tex_zoom,k=o.tex_ang,K=o.additive,B=this.borderColor[3]>0,Q=Math.abs(X)>=1,z=Math.abs(D)>=1,Y=Math.abs(K)>=1;this.positions[0]=q,this.positions[1]=C,this.positions[2]=0,this.colors[0]=U,this.colors[1]=w,this.colors[2]=b,this.colors[3]=_*e,Q&&(this.uvs[0]=.5,this.uvs[1]=.5);const W=Math.PI*.25;for(let L=1;L<=E+1;L++){const G=(L-1)/E*2*Math.PI,ot=G+P+W;if(this.positions[L*3+0]=q+p*Math.cos(ot)*this.aspecty,this.positions[L*3+1]=C+p*Math.sin(ot),this.positions[L*3+2]=0,this.colors[L*4+0]=T,this.colors[L*4+1]=x,this.colors[L*4+2]=I,this.colors[L*4+3]=M*e,Q){const ht=G+k+W;this.uvs[L*2+0]=.5+.5*Math.cos(ht)/O*this.aspecty,this.uvs[L*2+1]=.5+.5*Math.sin(ht)/O}B&&(this.borderPositions[(L-1)*3+0]=this.positions[L*3+0],this.borderPositions[(L-1)*3+1]=this.positions[L*3+1],this.borderPositions[(L-1)*3+2]=this.positions[L*3+2])}this.mdVSShapeFrame=o,this.drawCustomShapeInstance(h,E,Q,B,z,Y)}const v=i.mdVSUserKeysShapes[this.index],c=n.default.pick(this.mdVSShapeFrame,v);i.mdVSFrameMapShapes[this.index]=c}}setupShapeBuffers(e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.colors,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.uvs,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aUvLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.borderPositionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.borderPositions,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aBorderPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aBorderPosLoc);const s=e!==0?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,s),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,s)}drawCustomShapeInstance(e,s,i,a,h,l){if(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,this.positions,0,(s+2)*3),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,this.colors,0,(s+2)*4),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),i&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,this.uvs,0,(s+2)*2),this.gl.vertexAttribPointer(this.aUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aUvLocation)),this.gl.uniform1f(this.texturedLoc,i?1:0),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),l?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,s+2),a){this.gl.useProgram(this.borderShaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.borderPositionVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,this.borderPositions,0,(s+1)*3),this.gl.vertexAttribPointer(this.aBorderPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aBorderPosLoc),this.gl.uniform4fv(this.uBorderColorLoc,this.borderColor);const r=h?4:1;for(let f=0;f<r;f++)f===0?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):f===1?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):f===2?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):f===3&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(this.gl.LINE_STRIP,0,s+1)}}}},"./src/rendering/sprites/border.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e={}){this.gl=t,this.positions=new Float32Array(72),this.aspectx=e.aspectx,this.aspecty=e.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.vertexBuf=this.gl.createBuffer()}updateGlobals(t){this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`
      #version 300 es
      in vec3 aPos;
      void main(void) {
        gl_Position = vec4(aPos, 1.0);
      }
      `.trim()),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      out vec4 fragColor;
      uniform vec4 u_color;
      void main(void) {
        fragColor = u_color;
      }
      `.trim()),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color")}addTriangle(t,e,s,i){this.positions[t+0]=e[0],this.positions[t+1]=e[1],this.positions[t+2]=e[2],this.positions[t+3]=s[0],this.positions[t+4]=s[1],this.positions[t+5]=s[2],this.positions[t+6]=i[0],this.positions[t+7]=i[1],this.positions[t+8]=i[2]}generateBorder(t,e,s){if(e>0&&t[3]>0){const r=s/2,f=e/2+r,v=r*2,c=r*2,d=f*2,o=f*2;let E=[-1+v,-1+o,0],p=[-1+v,1-o,0],P=[-1+d,1-o,0],q=[-1+d,-1+o,0];return this.addTriangle(0,q,p,E),this.addTriangle(9,q,P,p),E=[1-v,-1+o,0],p=[1-v,1-o,0],P=[1-d,1-o,0],q=[1-d,-1+o,0],this.addTriangle(18,E,p,q),this.addTriangle(27,p,P,q),E=[-1+v,-1+c,0],p=[-1+v,o-1,0],P=[1-v,o-1,0],q=[1-v,-1+c,0],this.addTriangle(36,q,p,E),this.addTriangle(45,q,P,p),E=[-1+v,1-c,0],p=[-1+v,1-o,0],P=[1-v,1-o,0],q=[1-v,1-c,0],this.addTriangle(54,E,p,q),this.addTriangle(63,p,P,q),!0}return!1}drawBorder(t,e,s){this.generateBorder(t,e,s)&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,t),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLES,0,this.positions.length/3))}}},"./src/rendering/sprites/darkenCenter.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e){this.gl=t,this.aspectx=e.aspectx,this.aspecty=e.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.generatePositions(),this.colors=new Float32Array([0,0,0,3/32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}updateGlobals(t){this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.generatePositions()}generatePositions(){this.positions=new Float32Array([0,0,0,-.05*this.aspecty,0,0,0,-.05,0,.05*this.aspecty,0,0,0,.05,0,-.05*this.aspecty,0,0])}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`
      #version 300 es
      in vec3 aPos;
      in vec4 aColor;
      out vec4 vColor;
      void main(void) {
        vColor = aColor;
        gl_Position = vec4(aPos, 1.0);
      }
      `.trim()),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      in vec4 vColor;
      out vec4 fragColor;
      void main(void) {
        fragColor = vColor;
      }
      `.trim()),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor")}drawDarkenCenter(t){t.darken_center!==0&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.colors,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,this.positions.length/3))}}},"./src/rendering/text/titleText.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return u});var n=g("./src/rendering/shaders/shaderUtils.js");class u{constructor(t,e={}){this.gl=t,this.texsizeX=e.texsizeX,this.texsizeY=e.texsizeY,this.aspectx=e.aspectx,this.aspecty=e.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions(),this.textTexture=this.gl.createTexture(),this.indexBuf=t.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.vertexBuf=this.gl.createBuffer(),this.canvas=document.createElement("canvas"),this.canvas.width=this.texsizeX,this.canvas.height=this.texsizeY,this.context2D=this.canvas.getContext("2d"),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}generateTitleTexture(t){this.context2D.clearRect(0,0,this.texsizeX,this.texsizeY),this.fontSize=Math.floor(16*(this.texsizeX/256)),this.fontSize=Math.max(this.fontSize,6),this.context2D.font=`italic ${this.fontSize}px Times New Roman`;let e=t,s=this.context2D.measureText(e).width;if(s>this.texsizeX){const a=.91*(this.texsizeX/s);e=`${e.substring(0,Math.floor(e.length*a))}...`,s=this.context2D.measureText(e).width}this.context2D.fillStyle="#FFFFFF",this.context2D.fillText(e,(this.texsizeX-s)/2,this.texsizeY/2);const i=new Uint8Array(this.context2D.getImageData(0,0,this.texsizeX,this.texsizeY).data.buffer);this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.texsizeX,this.texsizeY,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}updateGlobals(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.canvas.width=this.texsizeX,this.canvas.height=this.texsizeY}buildPositions(){const f=.13333333333333333,v=2/7,c=[];for(let o=0;o<8;o++){const E=o*v-1;for(let p=0;p<16;p++){const P=p*f-1;c.push(P,-E,0)}}const d=[];for(let o=0;o<7;o++)for(let E=0;E<15;E++){const p=E+16*o,P=E+16*(o+1),q=E+1+16*(o+1),C=E+1+16*o;d.push(p,P,C),d.push(P,q,C)}this.vertices=new Float32Array(c),this.indices=new Uint16Array(d)}createShader(){this.shaderProgram=this.gl.createProgram();const t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,`#version 300 es
       const vec2 halfmad = vec2(0.5);
       in vec2 aPos;
       in vec2 aUv;
       out vec2 uv_orig;
       out vec2 uv;
       void main(void) {
         gl_Position = vec4(aPos, 0.0, 1.0);
         uv_orig = aPos * halfmad + halfmad;
         uv = aUv;
       }`),this.gl.compileShader(t);const e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,`#version 300 es
       precision ${this.floatPrecision} float;
       precision highp int;
       precision mediump sampler2D;

       in vec2 uv_orig;
       in vec2 uv;
       out vec4 fragColor;
       uniform sampler2D uTexture;
       uniform float textColor;

       void main(void) {
         fragColor = texture(uTexture, uv) * vec4(textColor);
       }`),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.uvLocation=this.gl.getAttribLocation(this.shaderProgram,"aUv"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.textColorLoc=this.gl.getUniformLocation(this.shaderProgram,"textColor")}generateUvs(t,e,s){const r=[];for(let o=0;o<8;o++)for(let E=0;E<16;E++){const p=E/15,P=(o/7-.5)*.75+.5,q=p*2-1;let C=P*2-1;t>=1&&(C+=1/this.texsizeY),r.push(q,e?C:-C)}const c=Math.max(0,1-t*1.5)**1.8*1.3;for(let o=0;o<8;o++)for(let E=0;E<16;E++){const p=o*16+E;r[p]+=c*.07*Math.sin(s.time*.31+r[p]*.39-r[p+1]*1.94),r[p]+=c*.044*Math.sin(s.time*.81-r[p]*1.91+r[p+1]*.27),r[p]+=c*.061*Math.sin(s.time*1.31+r[p]*.61+r[p+1]*.74),r[p+1]+=c*.061*Math.sin(s.time*.37+r[p]*1.83+r[p+1]*.69),r[p+1]+=c*.07*Math.sin(s.time*.67+r[p]*.42-r[p+1]*1.39),r[p+1]+=c*.087*Math.sin(s.time*1.07+r[p]*3.55+r[p+1]*.89)}const d=1.01/(t**.21+.01);for(let o=0;o<r.length/2;o++)r[o*2]*=d,r[o*2+1]*=d*this.invAspecty,r[o*2]=(r[o*2]+1)/2,r[o*2+1]=(r[o*2+1]+1)/2;return new Float32Array(r)}renderTitle(t,e,s){this.gl.useProgram(this.shaderProgram);const i=this.generateUvs(t,e,s);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.uvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.uvLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textTexture),this.gl.uniform1i(this.textureLoc,0),this.gl.uniform1f(this.textColorLoc,t**.3),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0)}}},"./src/rendering/waves/basicWaveform.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return A});var n=g("./src/rendering/shaders/shaderUtils.js"),u=g("./src/rendering/waves/waveUtils.js");class A{constructor(e,s={}){this.gl=e;const i=512;this.positions=new Float32Array(i*3),this.positions2=new Float32Array(i*3),this.oldPositions=new Float32Array(i*3),this.oldPositions2=new Float32Array(i*3),this.smoothedPositions=new Float32Array((i*2-1)*3),this.smoothedPositions2=new Float32Array((i*2-1)*3),this.color=[0,0,0,1],this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.vertexBuf=this.gl.createBuffer()}updateGlobals(e){this.texsizeX=e.texsizeX,this.texsizeY=e.texsizeY,this.aspectx=e.aspectx,this.aspecty=e.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}createShader(){this.shaderProgram=this.gl.createProgram();const e=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(e,`
      #version 300 es
      in vec3 aPos;
      uniform vec2 thickOffset;
      void main(void) {
        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);
      }
      `.trim()),this.gl.compileShader(e);const s=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(s,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      out vec4 fragColor;
      uniform vec4 u_color;
      void main(void) {
        fragColor = u_color;
      }
      `.trim()),this.gl.compileShader(s),this.gl.attachShader(this.shaderProgram,e),this.gl.attachShader(this.shaderProgram,s),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}static processWaveform(e,s){const i=[],a=s.wave_scale/128,h=s.wave_smoothing,l=a*(1-h);i.push(e[0]*a);for(let r=1;r<e.length;r++)i.push(e[r]*l+i[r-1]*h);return i}generateWaveform(e,s,i,a,h){let l=h.wave_a;const r=(h.bass+h.mid+h.treb)/3;if(r>-.01&&l>.001&&i.length>0){const f=A.processWaveform(i,h),v=A.processWaveform(a,h),c=Math.floor(h.wave_mode)%8,d=Math.floor(h.old_wave_mode)%8,o=h.wave_x*2-1,E=h.wave_y*2-1;this.numVert=0,this.oldNumVert=0;const p=e&&c!==d?2:1;for(let b=0;b<p;b++){const _=b===0?c:d;let T=h.wave_mystery;(_===0||_===1||_===4)&&(T<-1||T>1)&&(T=T*.5+.5,T-=Math.floor(T),T=Math.abs(T),T=T*2-1);let x,I,M;if(b===0?(I=this.positions,M=this.positions2):(I=this.oldPositions,M=this.oldPositions2),l=h.wave_a,_===0){if(h.modwavealphabyvolume>0){const y=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/y}l=Math.clamp(l,0,1),x=Math.floor(f.length/2)+1;const R=1/(x-1),S=Math.floor((f.length-x)/2);for(let y=0;y<x-1;y++){let F=.5+.4*v[y+S]+T;const D=y*R*2*Math.PI+h.time*.2;if(y<x/10){let X=y/(x*.1);X=.5-.5*Math.cos(X*Math.PI);const O=.5+.4*v[y+x+S]+T;F=(1-X)*O+F*X}I[y*3+0]=F*Math.cos(D)*this.aspecty+o,I[y*3+1]=F*Math.sin(D)*this.aspectx+E,I[y*3+2]=0}I[(x-1)*3+0]=I[0],I[(x-1)*3+1]=I[1],I[(x-1)*3+2]=0}else if(_===1){if(l*=1.25,h.modwavealphabyvolume>0){const R=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/R}l=Math.clamp(l,0,1),x=Math.floor(f.length/2);for(let R=0;R<x;R++){const S=.53+.43*v[R]+T,y=f[R+32]*.5*Math.PI+h.time*2.3;I[R*3+0]=S*Math.cos(y)*this.aspecty+o,I[R*3+1]=S*Math.sin(y)*this.aspectx+E,I[R*3+2]=0}}else if(_===2){if(this.texsizeX<1024?l*=.09:this.texsizeX>=1024&&this.texsizeX<2048?l*=.11:l*=.13,h.modwavealphabyvolume>0){const R=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/R}l=Math.clamp(l,0,1),x=f.length;for(let R=0;R<f.length;R++)I[R*3+0]=v[R]*this.aspecty+o,I[R*3+1]=f[(R+32)%f.length]*this.aspectx+E,I[R*3+2]=0}else if(_===3){if(this.texsizeX<1024?l*=.15:this.texsizeX>=1024&&this.texsizeX<2048?l*=.22:l*=.33,l*=1.3,l*=h.treb*h.treb,h.modwavealphabyvolume>0){const R=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/R}l=Math.clamp(l,0,1),x=f.length;for(let R=0;R<f.length;R++)I[R*3+0]=v[R]*this.aspecty+o,I[R*3+1]=f[(R+32)%f.length]*this.aspectx+E,I[R*3+2]=0}else if(_===4){if(h.modwavealphabyvolume>0){const D=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/D}l=Math.clamp(l,0,1),x=f.length,x>this.texsizeX/3&&(x=Math.floor(this.texsizeX/3));const R=1/x,S=Math.floor((f.length-x)/2),y=.45+.5*(T*.5+.5),F=1-y;for(let D=0;D<x;D++){let X=2*D*R+(o-1)+v[(D+25+S)%f.length]*.44,O=f[D+S]*.47+E;D>1&&(X=X*F+y*(I[(D-1)*3+0]*2-I[(D-2)*3+0]),O=O*F+y*(I[(D-1)*3+1]*2-I[(D-2)*3+1])),I[D*3+0]=X,I[D*3+1]=O,I[D*3+2]=0}}else if(_===5){if(this.texsizeX<1024?l*=.09:this.texsizeX>=1024&&this.texsizeX<2048?l*=.11:l*=.13,h.modwavealphabyvolume>0){const y=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/y}l=Math.clamp(l,0,1);const R=Math.cos(h.time*.3),S=Math.sin(h.time*.3);x=f.length;for(let y=0;y<f.length;y++){const F=(y+32)%f.length,D=v[y]*f[F]+f[y]*v[F],X=v[y]*v[y]-f[F]*f[F];I[y*3+0]=(D*R-X*S)*(this.aspecty+o),I[y*3+1]=(D*S+X*R)*(this.aspectx+E),I[y*3+2]=0}}else if(_===6||_===7){if(h.modwavealphabyvolume>0){const B=h.modwavealphaend-h.modwavealphastart;l*=(r-h.modwavealphastart)/B}l=Math.clamp(l,0,1),x=Math.floor(f.length/2),x>this.texsizeX/3&&(x=Math.floor(this.texsizeX/3));const R=Math.floor((f.length-x)/2),S=Math.PI*.5*T;let y=Math.cos(S),F=Math.sin(S);const D=[o*Math.cos(S+Math.PI*.5)-y*3,o*Math.cos(S+Math.PI*.5)+y*3],X=[o*Math.sin(S+Math.PI*.5)-F*3,o*Math.sin(S+Math.PI*.5)+F*3];for(let B=0;B<2;B++)for(let Q=0;Q<4;Q++){let z,Y=!1;switch(Q){case 0:D[B]>1.1&&(z=(1.1-D[1-B])/(D[B]-D[1-B]),Y=!0);break;case 1:D[B]<-1.1&&(z=(-1.1-D[1-B])/(D[B]-D[1-B]),Y=!0);break;case 2:X[B]>1.1&&(z=(1.1-X[1-B])/(X[B]-X[1-B]),Y=!0);break;case 3:X[B]<-1.1&&(z=(-1.1-X[1-B])/(X[B]-X[1-B]),Y=!0);break}if(Y){const W=D[B]-D[1-B],L=X[B]-X[1-B];D[B]=D[1-B]+W*z,X[B]=X[1-B]+L*z}}y=(D[1]-D[0])/x,F=(X[1]-X[0])/x;const O=Math.atan2(F,y),k=Math.cos(O+Math.PI*.5),K=Math.sin(O+Math.PI*.5);if(_===6)for(let B=0;B<x;B++){const Q=f[B+R];I[B*3+0]=D[0]+y*B+k*.25*Q,I[B*3+1]=X[0]+F*B+K*.25*Q,I[B*3+2]=0}else if(_===7){const B=(E*.5+.5)**2;for(let Q=0;Q<x;Q++){const z=f[Q+R];I[Q*3+0]=D[0]+y*Q+k*(.25*z+B),I[Q*3+1]=X[0]+F*Q+K*(.25*z+B),I[Q*3+2]=0}for(let Q=0;Q<x;Q++){const z=v[Q+R];M[Q*3+0]=D[0]+y*Q+k*(.25*z-B),M[Q*3+1]=X[0]+F*Q+K*(.25*z-B),M[Q*3+2]=0}}}b===0?(this.positions=I,this.positions2=M,this.numVert=x,this.alpha=l):(this.oldPositions=I,this.oldPositions2=M,this.oldNumVert=x,this.oldAlpha=l)}const P=.5-.5*Math.cos(s*Math.PI),q=1-P;this.oldNumVert>0&&(l=P*this.alpha+q*this.oldAlpha);let C=Math.clamp(h.wave_r,0,1),U=Math.clamp(h.wave_g,0,1),w=Math.clamp(h.wave_b,0,1);if(h.wave_brighten!==0){const b=Math.max(C,U,w);b>.01&&(C/=b,U/=b,w/=b)}if(this.color=[C,U,w,l],this.oldNumVert>0)if(c===7){const b=(this.oldNumVert-1)/(this.numVert*2);for(let _=0;_<this.numVert;_++){const T=_*b,x=Math.floor(T),I=T-x,M=this.oldPositions[x*3+0]*(1-I)+this.oldPositions[(x+1)*3+0]*I,R=this.oldPositions[x*3+1]*(1-I)+this.oldPositions[(x+1)*3+1]*I;this.positions[_*3+0]=this.positions[_*3+0]*P+M*q,this.positions[_*3+1]=this.positions[_*3+1]*P+R*q,this.positions[_*3+2]=0}for(let _=0;_<this.numVert;_++){const T=(_+this.numVert)*b,x=Math.floor(T),I=T-x,M=this.oldPositions[x*3+0]*(1-I)+this.oldPositions[(x+1)*3+0]*I,R=this.oldPositions[x*3+1]*(1-I)+this.oldPositions[(x+1)*3+1]*I;this.positions2[_*3+0]=this.positions2[_*3+0]*P+M*q,this.positions2[_*3+1]=this.positions2[_*3+1]*P+R*q,this.positions2[_*3+2]=0}}else if(d===7){const b=this.numVert/2,_=(this.oldNumVert-1)/b;for(let T=0;T<b;T++){const x=T*_,I=Math.floor(x),M=x-I,R=this.oldPositions[I*3+0]*(1-M)+this.oldPositions[(I+1)*3+0]*M,S=this.oldPositions[I*3+1]*(1-M)+this.oldPositions[(I+1)*3+1]*M;this.positions[T*3+0]=this.positions[T*3+0]*P+R*q,this.positions[T*3+1]=this.positions[T*3+1]*P+S*q,this.positions[T*3+2]=0}for(let T=0;T<b;T++){const x=T*_,I=Math.floor(x),M=x-I,R=this.oldPositions2[I*3+0]*(1-M)+this.oldPositions2[(I+1)*3+0]*M,S=this.oldPositions2[I*3+1]*(1-M)+this.oldPositions2[(I+1)*3+1]*M;this.positions2[T*3+0]=this.positions[(T+b)*3+0]*P+R*q,this.positions2[T*3+1]=this.positions[(T+b)*3+1]*P+S*q,this.positions2[T*3+2]=0}}else{const b=(this.oldNumVert-1)/this.numVert;for(let _=0;_<this.numVert;_++){const T=_*b,x=Math.floor(T),I=T-x,M=this.oldPositions[x*3+0]*(1-I)+this.oldPositions[(x+1)*3+0]*I,R=this.oldPositions[x*3+1]*(1-I)+this.oldPositions[(x+1)*3+1]*I;this.positions[_*3+0]=this.positions[_*3+0]*P+M*q,this.positions[_*3+1]=this.positions[_*3+1]*P+R*q,this.positions[_*3+2]=0}}for(let b=0;b<this.numVert;b++)this.positions[b*3+1]=-this.positions[b*3+1];if(this.smoothedNumVert=this.numVert*2-1,u.default.smoothWave(this.positions,this.smoothedPositions,this.numVert),c===7||d===7){for(let b=0;b<this.numVert;b++)this.positions2[b*3+1]=-this.positions2[b*3+1];u.default.smoothWave(this.positions2,this.smoothedPositions2,this.numVert)}return!0}return!1}drawBasicWaveform(e,s,i,a,h){if(this.generateWaveform(e,s,i,a,h)){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.smoothedPositions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,this.color);let l=1;(h.wave_thick!==0||h.wave_dots!==0)&&(l=4),h.additivewave!==0?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);const r=h.wave_dots!==0?this.gl.POINTS:this.gl.LINE_STRIP;for(let v=0;v<l;v++)v===0?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):v===1?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):v===2?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):v===3&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(r,0,this.smoothedNumVert);if(Math.floor(h.wave_mode)%8===7){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.smoothedPositions2,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc);for(let v=0;v<l;v++)v===0?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):v===1?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):v===2?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):v===3&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(r,0,this.smoothedNumVert)}}}}},"./src/rendering/waves/customWaveform.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return t});var n=g("./src/utils.js"),u=g("./src/rendering/shaders/shaderUtils.js"),A=g("./src/rendering/waves/waveUtils.js");class t{constructor(s,i,a){this.index=s,this.gl=i;const h=512;this.pointsData=[new Float32Array(h),new Float32Array(h)],this.positions=new Float32Array(h*3),this.colors=new Float32Array(h*4),this.smoothedPositions=new Float32Array((h*2-1)*3),this.smoothedColors=new Float32Array((h*2-1)*4),this.texsizeX=a.texsizeX,this.texsizeY=a.texsizeY,this.mesh_width=a.mesh_width,this.mesh_height=a.mesh_height,this.aspectx=a.aspectx,this.aspecty=a.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.floatPrecision=u.default.getFragmentFloatPrecision(this.gl),this.createShader()}updateGlobals(s){this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}createShader(){this.shaderProgram=this.gl.createProgram();const s=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(s,`
      #version 300 es
      uniform float uSize;
      uniform vec2 thickOffset;
      in vec3 aPos;
      in vec4 aColor;
      out vec4 vColor;
      void main(void) {
        vColor = aColor;
        gl_PointSize = uSize;
        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);
      }
      `.trim()),this.gl.compileShader(s);const i=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(i,`
      #version 300 es
      precision ${this.floatPrecision} float;
      precision highp int;
      precision mediump sampler2D;
      in vec4 vColor;
      out vec4 fragColor;
      void main(void) {
        fragColor = vColor;
      }
      `.trim()),this.gl.compileShader(i),this.gl.attachShader(this.shaderProgram,s),this.gl.attachShader(this.shaderProgram,i),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor"),this.sizeLoc=this.gl.getUniformLocation(this.shaderProgram,"uSize"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}generateWaveform(s,i,a,h,l,r,f,v){if(f.baseVals.enabled!==0&&s.length>0){let c;if(r.preset.useWASM)c=r.runWaveFrameEquations(this.index,l);else{const x=Object.assign({},r.mdVSWaves[this.index],r.mdVSFrameMapWaves[this.index],r.mdVSQAfterFrame,r.mdVSTWaveInits[this.index],l);c=r.runWaveFrameEquations(this.index,x)}const d=512;Object.prototype.hasOwnProperty.call(c,"samples")?this.samples=c.samples:this.samples=d,this.samples>d&&(this.samples=d),this.samples=Math.floor(this.samples);const o=r.preset.waves[this.index].baseVals,E=Math.floor(c.sep),p=c.scaling,P=c.spectrum,q=c.smoothing,C=o.usedots,U=c.r,w=c.g,b=c.b,_=c.a,T=r.preset.baseVals.wave_scale;if(this.samples-=E,this.samples>=2||C!==0&&this.samples>=1){const x=P!==0,I=(x?.15:.004)*p*T,M=x?a:s,R=x?h:i,S=x?0:Math.floor((d-this.samples)/2-E/2),y=x?0:Math.floor((d-this.samples)/2+E/2),F=x?(d-E)/this.samples:1,D=(q*.98)**.5,X=1-D;this.pointsData[0][0]=M[S],this.pointsData[1][0]=R[y];for(let O=1;O<this.samples;O++){const k=M[Math.floor(O*F+S)],K=R[Math.floor(O*F+y)];this.pointsData[0][O]=k*X+this.pointsData[0][O-1]*D,this.pointsData[1][O]=K*X+this.pointsData[1][O-1]*D}for(let O=this.samples-2;O>=0;O--)this.pointsData[0][O]=this.pointsData[0][O]*X+this.pointsData[0][O+1]*D,this.pointsData[1][O]=this.pointsData[1][O]*X+this.pointsData[1][O+1]*D;for(let O=0;O<this.samples;O++)this.pointsData[0][O]*=I,this.pointsData[1][O]*=I;if(r.preset.useWASM){const O=r.preset.globalPools[`wavePerFrame${this.index}`];for(let k=0;k<this.samples;k++){const K=this.pointsData[0][k],B=this.pointsData[1][k];O.sample.value=k/(this.samples-1),O.value1.value=K,O.value2.value=B,O.x.value=.5+K,O.y.value=.5+B,O.r.value=U,O.g.value=w,O.b.value=b,O.a.value=_,f.point_eqs&&r.preset.waves[this.index].point_eqs();const Q=(O.x.value*2-1)*this.invAspectx,z=(O.y.value*-2+1)*this.invAspecty,Y=O.r.value,W=O.g.value,L=O.b.value,rt=O.a.value;this.positions[k*3+0]=Q,this.positions[k*3+1]=z,this.positions[k*3+2]=0,this.colors[k*4+0]=Y,this.colors[k*4+1]=W,this.colors[k*4+2]=L,this.colors[k*4+3]=rt*v}}else for(let O=0;O<this.samples;O++){const k=this.pointsData[0][O],K=this.pointsData[1][O];c.sample=O/(this.samples-1),c.value1=k,c.value2=K,c.x=.5+k,c.y=.5+K,c.r=U,c.g=w,c.b=b,c.a=_,f.point_eqs!==""&&(c=r.runWavePointEquations(this.index,c));const B=(c.x*2-1)*this.invAspectx,Q=(c.y*-2+1)*this.invAspecty,z=c.r,Y=c.g,W=c.b,L=c.a;this.positions[O*3+0]=B,this.positions[O*3+1]=Q,this.positions[O*3+2]=0,this.colors[O*4+0]=z,this.colors[O*4+1]=Y,this.colors[O*4+2]=W,this.colors[O*4+3]=L*v}if(r.preset.useWASM)c.usedots=C,c.thick=o.thick,c.additive=o.additive;else{const O=r.mdVSUserKeysWaves[this.index],k=n.default.pick(c,O);r.mdVSFrameMapWaves[this.index]=k}return this.mdVSWaveFrame=c,C===0&&A.default.smoothWaveAndColor(this.positions,this.colors,this.smoothedPositions,this.smoothedColors,this.samples),!0}}return!1}drawCustomWaveform(s,i,a,h,l,r,f,v){if(v&&this.generateWaveform(i,a,h,l,r,f,v,s)){this.gl.useProgram(this.shaderProgram);const c=this.mdVSWaveFrame.usedots!==0,d=this.mdVSWaveFrame.thick!==0,o=this.mdVSWaveFrame.additive!==0;let E,p,P;c?(E=this.positions,p=this.colors,P=this.samples):(E=this.smoothedPositions,p=this.smoothedColors,P=this.samples*2-1),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,E,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,p,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation);let q=1;c?d?this.gl.uniform1f(this.sizeLoc,2+(this.texsizeX>=1024?1:0)):this.gl.uniform1f(this.sizeLoc,1+(this.texsizeX>=1024?1:0)):(this.gl.uniform1f(this.sizeLoc,1),d&&(q=4)),o?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);const C=c?this.gl.POINTS:this.gl.LINE_STRIP;for(let U=0;U<q;U++)U===0?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):U===1?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):U===2?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):U===3&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(C,0,P)}}}},"./src/rendering/waves/waveUtils.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{static smoothWave(A,t,e,s=!1){let f=0,v=0,c,d=1;for(let o=0;o<e-1;o++){c=d,d=Math.min(e-1,o+2);for(let E=0;E<3;E++)t[f*3+E]=A[o*3+E];if(s)for(let E=0;E<3;E++)t[(f+1)*3+E]=(-.15*A[v*3+E]+1.15*A[o*3+E]+1.15*A[c*3+E]+-.15*A[d*3+E])*.5;else{for(let E=0;E<2;E++)t[(f+1)*3+E]=(-.15*A[v*3+E]+1.15*A[o*3+E]+1.15*A[c*3+E]+-.15*A[d*3+E])*.5;t[(f+1)*3+2]=0}v=o,f+=2}for(let o=0;o<3;o++)t[f*3+o]=A[(e-1)*3+o]}static smoothWaveAndColor(A,t,e,s,i,a=!1){let c=0,d=0,o,E=1;for(let p=0;p<i-1;p++){o=E,E=Math.min(i-1,p+2);for(let P=0;P<3;P++)e[c*3+P]=A[p*3+P];if(a)for(let P=0;P<3;P++)e[(c+1)*3+P]=(-.15*A[d*3+P]+1.15*A[p*3+P]+1.15*A[o*3+P]+-.15*A[E*3+P])*.5;else{for(let P=0;P<2;P++)e[(c+1)*3+P]=(-.15*A[d*3+P]+1.15*A[p*3+P]+1.15*A[o*3+P]+-.15*A[E*3+P])*.5;e[(c+1)*3+2]=0}for(let P=0;P<4;P++)s[c*4+P]=t[p*4+P],s[(c+1)*4+P]=t[p*4+P];d=p,c+=2}for(let p=0;p<3;p++)e[c*3+p]=A[(i-1)*3+p];for(let p=0;p<4;p++)s[c*4+p]=t[(i-1)*4+p]}}},"./src/utils.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return n});class n{static atan2(A,t){let e=Math.atan2(A,t);return e<0&&(e+=2*Math.PI),e}static cloneVars(A){return Object.assign({},A)}static range(A,t){return t===void 0?[...Array(A).keys()]:Array.from({length:t-A},(e,s)=>s+A)}static pick(A,t){const e={};for(let s=0;s<t.length;s++){const i=t[s];e[i]=A[i]||0}return e}static omit(A,t){const e=Object.assign({},A);for(let s=0;s<t.length;s++){const i=t[s];delete e[i]}return e}static setWasm(A,t,e){for(let s=0;s<e.length;s++){const i=e[s];A[i].value=t[i]}}static pickWasm(A,t){const e={};for(let s=0;s<t.length;s++){const i=t[s];e[i]=A[i].value}return e}}},"./src/visualizer.js":function(N,m,g){g.r(m),g.d(m,"default",function(){return f});var n=g("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=g.n(n),A=g("./node_modules/eel-wasm/dist/src/index.js"),t=g("./node_modules/@assemblyscript/loader/index.js"),e=g("./src/audio/audioProcessor.js"),s=g("./src/rendering/renderer.js"),i=g("./src/utils.js"),a=g("./src/assemblyscript/presetFunctions.ts"),h=g.n(a);function l(v,c){var d=Object.keys(v);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(v);c&&(o=o.filter(function(E){return Object.getOwnPropertyDescriptor(v,E).enumerable})),d.push.apply(d,o)}return d}function r(v){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?l(Object(d),!0).forEach(function(o){u()(v,o,d[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(d)):l(Object(d)).forEach(function(o){Object.defineProperty(v,o,Object.getOwnPropertyDescriptor(d,o))})}return v}class f{constructor(c,d,o){this.opts=o,this.audio=new e.default(c);const E=o.width||1200,p=o.height||900;this.internalCanvas=document.createElement("canvas"),this.internalCanvas.width=E,this.internalCanvas.height=p,this.gl=this.internalCanvas.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1}),this.outputGl=d.getContext("2d"),this.baseValsDefaults={decay:.98,gammaadj:2,echo_zoom:2,echo_alpha:0,echo_orient:0,red_blue:0,brighten:0,darken:0,wrap:1,darken_center:0,solarize:0,invert:0,bmotionvectorson:1,fshader:0,b1n:0,b2n:0,b3n:0,b1x:1,b2x:1,b3x:1,b1ed:.25,wave_mode:0,additivewave:0,wave_dots:0,wave_thick:0,wave_a:.8,wave_scale:1,wave_smoothing:.75,wave_mystery:0,modwavealphabyvolume:0,modwavealphastart:.75,modwavealphaend:.95,wave_r:1,wave_g:1,wave_b:1,wave_x:.5,wave_y:.5,wave_brighten:1,mv_x:12,mv_y:9,mv_dx:0,mv_dy:0,mv_l:.9,mv_r:1,mv_g:1,mv_b:1,mv_a:1,warpanimspeed:1,warpscale:1,zoomexp:1,zoom:1,rot:0,cx:.5,cy:.5,dx:0,dy:0,warp:1,sx:1,sy:1,ob_size:.01,ob_r:0,ob_g:0,ob_b:0,ob_a:0,ib_size:.01,ib_r:.25,ib_g:.25,ib_b:.25,ib_a:0},this.shapeBaseValsDefaults={enabled:0,sides:4,additive:0,thickoutline:0,textured:0,num_inst:1,tex_zoom:1,tex_ang:0,x:.5,y:.5,rad:.1,ang:0,r:1,g:0,b:0,a:1,r2:0,g2:1,b2:0,a2:0,border_r:1,border_g:1,border_b:1,border_a:.1},this.waveBaseValsDefaults={enabled:0,samples:512,sep:0,scaling:1,smoothing:.5,r:1,g:1,b:1,a:1,spectrum:0,usedots:0,thick:0,additive:0},this.qs=i.default.range(1,33).map(P=>`q${P}`),this.ts=i.default.range(1,9).map(P=>`t${P}`),this.globalPerFrameVars=["old_wave_mode","frame","time","fps","bass","bass_att","mid","mid_att","treb","treb_att","meshx","meshy","aspectx","aspecty","pixelsx","pixelsy","rand_start","rand_preset"],this.globalPerPixelVars=["frame","time","fps","bass","bass_att","mid","mid_att","treb","treb_att","meshx","meshy","aspectx","aspecty","pixelsx","pixelsy","rand_start","rand_preset","x","y","rad","ang"],this.globalShapeVars=["frame","time","fps","bass","bass_att","mid","mid_att","treb","treb_att","meshx","meshy","aspectx","aspecty","pixelsx","pixelsy","rand_start","rand_preset","instance"],this.shapeBaseVars=["x","y","rad","ang","r","g","b","a","r2","g2","b2","a2","border_r","border_g","border_b","border_a","thickoutline","textured","tex_zoom","tex_ang","additive"],this.globalWaveVars=["frame","time","fps","bass","bass_att","mid","mid_att","treb","treb_att","meshx","meshy","aspectx","aspecty","pixelsx","pixelsy","rand_start","rand_preset","x","y","sample","value1","value2"],this.renderer=new s.default(this.gl,this.audio,o)}loseGLContext(){this.gl.getExtension("WEBGL_lose_context").loseContext(),this.outputGl=null}connectAudio(c){this.audioNode=c,this.audio.connectAudio(c)}disconnectAudio(c){this.audio.disconnectAudio(c)}static overrideDefaultVars(c,d){const o={};return Object.keys(c).forEach(E=>{Object.prototype.hasOwnProperty.call(d,E)?o[E]=d[E]:o[E]=c[E]}),o}createQVars(){const c={};return this.qs.forEach(d=>{c[d]=new WebAssembly.Global({value:"f64",mutable:!0},0)}),c}createTVars(){const c={};return this.ts.forEach(d=>{c[d]=new WebAssembly.Global({value:"f64",mutable:!0},0)}),c}createPerFramePool(c){const d={};return Object.keys(this.baseValsDefaults).forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},c[o])}),this.globalPerFrameVars.forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},0)}),d}createPerPixelPool(c){const d={};return Object.keys(this.baseValsDefaults).forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},c[o])}),this.globalPerPixelVars.forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},0)}),d}createCustomShapePerFramePool(c){const d={};return Object.keys(this.shapeBaseValsDefaults).forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},c[o])}),this.globalShapeVars.forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},0)}),d}createCustomWavePerFramePool(c){const d={};return Object.keys(this.waveBaseValsDefaults).forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},c[o])}),this.globalWaveVars.forEach(o=>{d[o]=new WebAssembly.Global({value:"f64",mutable:!0},0)}),d}static makeShapeResetPool(c,d,o){return d.reduce((E,p)=>r(r({},E),{},{[`${p}_${o}`]:c[p]}),{})}static base64ToArrayBuffer(c){for(var d=window.atob(c),o=d.length,E=new Uint8Array(o),p=0;p<o;p++)E[p]=d.charCodeAt(p);return E.buffer}async loadPreset(c,d=0){const o=JSON.parse(JSON.stringify(c));o.baseVals=f.overrideDefaultVars(this.baseValsDefaults,o.baseVals);for(let p=0;p<o.shapes.length;p++)o.shapes[p].baseVals=f.overrideDefaultVars(this.shapeBaseValsDefaults,o.shapes[p].baseVals);for(let p=0;p<o.waves.length;p++)o.waves[p].baseVals=f.overrideDefaultVars(this.waveBaseValsDefaults,o.waves[p].baseVals);const E=o.useJS&&!this.opts.onlyUseWASM;Object.prototype.hasOwnProperty.call(o,"init_eqs_eel")&&!E?(o.useWASM=!0,await this.loadWASMPreset(o,d)):this.opts.onlyUseWASM?console.warn("Tried to load a preset that doesn't support WASM with onlyUseWASM on"):Object.prototype.hasOwnProperty.call(o,"init_eqs_str")?this.loadJSPreset(o,d):console.warn("Tried to load a JS preset that doesn't have converted strings")}async loadWASMPreset(c,d){const o=this.createQVars(),E=this.createTVars(),p={perFrame:r(r({},o),this.createPerFramePool(c.baseVals)),perVertex:r(r({},o),this.createPerPixelPool(c.baseVals))},P={presetInit:{pool:"perFrame",code:c.init_eqs_eel},perFrame:{pool:"perFrame",code:c.frame_eqs_eel}};c.pixel_eqs_eel!==""&&(P.perPixel={pool:"perVertex",code:c.pixel_eqs_eel});for(let w=0;w<c.shapes.length;w++)p[`shapePerFrame${w}`]=r(r(r({},o),E),this.createCustomShapePerFramePool(c.shapes[w].baseVals)),c.shapes[w].baseVals.enabled!==0&&(P[`shapes_${w}_init_eqs`]={pool:`shapePerFrame${w}`,code:c.shapes[w].init_eqs_eel},P[`shapes_${w}_frame_eqs`]={pool:`shapePerFrame${w}`,code:c.shapes[w].frame_eqs_eel});for(let w=0;w<c.waves.length;w++)c.waves[w].baseVals.enabled!==0&&(p[`wavePerFrame${w}`]=r(r(r({},o),E),this.createCustomWavePerFramePool(c.waves[w].baseVals)),P[`waves_${w}_init_eqs`]={pool:`wavePerFrame${w}`,code:c.waves[w].init_eqs_eel},P[`waves_${w}_frame_eqs`]={pool:`wavePerFrame${w}`,code:c.waves[w].frame_eqs_eel},c.waves[w].point_eqs_eel&&c.waves[w].point_eqs_eel!==""&&(P[`waves_${w}_point_eqs`]={pool:`wavePerFrame${w}`,code:c.waves[w].point_eqs_eel}));const q=await Object(A.loadModule)({pools:p,functions:P,eelVersion:c.version||2}),C=w=>w||(()=>{}),U=await t.default.instantiate(f.base64ToArrayBuffer(h()()),{pixelEqs:{perPixelEqs:C(q.exports.perPixel)},pixelVarPool:{warp:p.perVertex.warp,zoom:p.perVertex.zoom,zoomexp:p.perVertex.zoomexp,cx:p.perVertex.cx,cy:p.perVertex.cy,sx:p.perVertex.sx,sy:p.perVertex.sy,dx:p.perVertex.dx,dy:p.perVertex.dy,rot:p.perVertex.rot,x:p.perVertex.x,y:p.perVertex.y,ang:p.perVertex.ang,rad:p.perVertex.rad},qVarPool:o,tVarPool:E,shapePool0:f.makeShapeResetPool(p.shapePerFrame0,this.shapeBaseVars,0),shapePool1:f.makeShapeResetPool(p.shapePerFrame1,this.shapeBaseVars,1),shapePool2:f.makeShapeResetPool(p.shapePerFrame2,this.shapeBaseVars,2),shapePool3:f.makeShapeResetPool(p.shapePerFrame3,this.shapeBaseVars,3),console:{logi:w=>{console.log("logi: "+w)},logf:w=>{console.log("logf: "+w)}},env:{abort:()=>{}}});c.globalPools=p,c.init_eqs=C(q.exports.presetInit),c.frame_eqs=C(q.exports.perFrame),c.save_qs=U.exports.saveQs,c.restore_qs=U.exports.restoreQs,c.save_ts=U.exports.saveTs,c.restore_ts=U.exports.restoreTs,q.exports.perPixel&&(c.pixel_eqs=q.exports.perPixel),c.pixel_eqs_initialize_array=(w,b)=>{const _=U.exports.createFloat32Array((w+1)*(b+1)*2);c.pixel_eqs_array=_},c.pixel_eqs_get_array=()=>U.exports.__getFloat32ArrayView(c.pixel_eqs_array),c.pixel_eqs_wasm=(...w)=>U.exports.runPixelEquations(c.pixel_eqs_array,...w);for(let w=0;w<c.shapes.length;w++)c.shapes[w].baseVals.enabled!==0&&(c.shapes[w].init_eqs=C(q.exports[`shapes_${w}_init_eqs`]),c.shapes[w].frame_eqs=q.exports[`shapes_${w}_frame_eqs`],c.shapes[w].frame_eqs_save=()=>U.exports[`shape${w}_save`](),c.shapes[w].frame_eqs_restore=()=>U.exports[`shape${w}_restore`]());for(let w=0;w<c.waves.length;w++)if(c.waves[w].baseVals.enabled!==0){const b={init_eqs:C(q.exports[`waves_${w}_init_eqs`]),frame_eqs:C(q.exports[`waves_${w}_frame_eqs`])};c.waves[w].point_eqs_eel&&c.waves[w].point_eqs_eel!==""?b.point_eqs=q.exports[`waves_${w}_point_eqs`]:b.point_eqs="",c.waves[w]=Object.assign({},c.waves[w],b)}this.renderer.loadPreset(c,d)}loadJSPreset(c,d){if(typeof c.init_eqs!="function"){c.init_eqs=new Function("a",`${c.init_eqs_str} return a;`),c.frame_eqs=new Function("a",`${c.frame_eqs_str} return a;`),c.pixel_eqs_str&&c.pixel_eqs_str!==""?c.pixel_eqs=new Function("a",`${c.pixel_eqs_str} return a;`):c.pixel_eqs="";for(let o=0;o<c.shapes.length;o++)c.shapes[o].baseVals.enabled!==0&&(c.shapes[o]=Object.assign({},c.shapes[o],{init_eqs:new Function("a",`${c.shapes[o].init_eqs_str} return a;`),frame_eqs:new Function("a",`${c.shapes[o].frame_eqs_str} return a;`)}));for(let o=0;o<c.waves.length;o++)if(c.waves[o].baseVals.enabled!==0){const E={init_eqs:new Function("a",`${c.waves[o].init_eqs_str} return a;`),frame_eqs:new Function("a",`${c.waves[o].frame_eqs_str} return a;`)};c.waves[o].point_eqs_str&&c.waves[o].point_eqs_str!==""?E.point_eqs=new Function("a",`${c.waves[o].point_eqs_str} return a;`):E.point_eqs="",c.waves[o]=Object.assign({},c.waves[o],E)}}this.renderer.loadPreset(c,d)}loadExtraImages(c){this.renderer.loadExtraImages(c)}setRendererSize(c,d,o={}){this.internalCanvas.width=c,this.internalCanvas.height=d,this.renderer.setRendererSize(c,d,o)}setInternalMeshSize(c,d){this.renderer.setInternalMeshSize(c,d)}setOutputAA(c){this.renderer.setOutputAA(c)}setCanvas(c){this.outputGl=c.getContext("2d")}render(c){const d=this.renderer.render(c);return this.outputGl&&this.outputGl.drawImage(this.internalCanvas,0,0),d}launchSongTitleAnim(c){this.renderer.launchSongTitleAnim(c)}toDataURL(){return this.renderer.toDataURL()}warpBufferToDataURL(){return this.renderer.warpBufferToDataURL()}}}})})}(_t)),_t.exports}var wt=It();const yt=Pt(wt);class Rt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`
            <div class="visualizer-container">
                <canvas id="visualizerCanvas"></canvas>
            </div>
        `}connectedCallback(){this.loadCSS(),this.canvas=this.shadowRoot.getElementById("visualizerCanvas"),this.canvas.width=800,this.canvas.height=600,window.addEventListener("resize",()=>this.resizeCanvas()),window.addEventListener("audio-ready",V=>{const{audioContext:N,sourceNode:m}=V.detail;this.initButterchurn(N,m)})}loadCSS(){const V=document.createElement("link");V.rel="stylesheet",V.href="components/audio-visualizer/audio-visualizer.css",this.shadowRoot.appendChild(V)}resizeCanvas(){this.canvas.width=this.offsetWidth||800,this.canvas.height=this.offsetHeight||600,this.butterchurn&&this.butterchurn.setRendererSize(this.canvas.width,this.canvas.height)}initButterchurn(V,N){this.butterchurn=yt.createVisualizer(V,this.canvas,{width:this.canvas.width,height:this.canvas.height}),this.butterchurn.connectAudio(N),this.renderButterchurn()}renderButterchurn(){const V=()=>{requestAnimationFrame(V),this.butterchurn.render()};V()}}customElements.define("audio-visualizer",Rt);
